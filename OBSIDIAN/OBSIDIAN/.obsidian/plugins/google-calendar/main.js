/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var PL=Object.create;var tu=Object.defineProperty,ML=Object.defineProperties,UL=Object.getOwnPropertyDescriptor,FL=Object.getOwnPropertyDescriptors,qL=Object.getOwnPropertyNames,j1=Object.getOwnPropertySymbols,GL=Object.getPrototypeOf,H1=Object.prototype.hasOwnProperty,VL=Object.prototype.propertyIsEnumerable;var Y1=(e,t,r)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,en=(e,t)=>{for(var r in t||(t={}))H1.call(t,r)&&Y1(e,r,t[r]);if(j1)for(var r of j1(t))VL.call(t,r)&&Y1(e,r,t[r]);return e},un=(e,t)=>ML(e,FL(t)),W1=e=>tu(e,"__esModule",{value:!0});var D9=typeof require!="undefined"?require:e=>{throw new Error('Dynamic require of "'+e+'" is not supported')};var ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),KL=(e,t)=>{W1(e);for(var r in t)tu(e,r,{get:t[r],enumerable:!0})},jL=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of qL(t))!H1.call(e,n)&&n!=="default"&&tu(e,n,{get:()=>t[n],enumerable:!(r=UL(t,n))||r.enumerable});return e},ut=e=>jL(W1(tu(e!=null?PL(GL(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var U=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},s=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,s);l((r=r.apply(e,t)).next())});var r0=ce((F9,t_)=>{"use strict";var yf=Object.prototype.hasOwnProperty,z1=Object.prototype.toString,Q1=Object.defineProperty,X1=Object.getOwnPropertyDescriptor,J1=function(t){return typeof Array.isArray=="function"?Array.isArray(t):z1.call(t)==="[object Array]"},Z1=function(t){if(!t||z1.call(t)!=="[object Object]")return!1;var r=yf.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&yf.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i=="undefined"||yf.call(t,i)},$1=function(t,r){Q1&&r.name==="__proto__"?Q1(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},e_=function(t,r){if(r==="__proto__")if(yf.call(t,r)){if(X1)return X1(t,r).value}else return;return t[r]};t_.exports=function e(){var t,r,n,i,a,s,l=arguments[0],c=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<f;++c)if(t=arguments[c],t!=null)for(r in t)n=e_(l,r),i=e_(t,r),l!==i&&(d&&i&&(Z1(i)||(a=J1(i)))?(a?(a=!1,s=n&&J1(n)?n:[]):s=n&&Z1(n)?n:{},$1(l,{name:r,newValue:e(d,s,i)})):typeof i!="undefined"&&$1(l,{name:r,newValue:i}));return l}});var n0=ce((Do,r_)=>{"use strict";var HL=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof pa!="undefined")return pa;throw new Error("unable to locate global object")},pa=HL();r_.exports=Do=pa.fetch;pa.fetch&&(Do.default=pa.fetch.bind(pa));Do.Headers=pa.Headers;Do.Request=pa.Request;Do.Response=pa.Response});var i0=ce((q9,n_)=>{"use strict";var Pi=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Pi.writable=e=>Pi(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";Pi.readable=e=>Pi(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";Pi.duplex=e=>Pi.writable(e)&&Pi.readable(e);Pi.transform=e=>Pi.duplex(e)&&typeof e._transform=="function";n_.exports=Pi});var a0=ce(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.GaxiosError=void 0;var i_=class extends Error{constructor(t,r,n){super(t);this.response=n,this.config=r,this.code=n.status.toString()}};vf.GaxiosError=i_});var s_=ce(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.getRetryConfig=void 0;function YL(e){return U(this,null,function*(){var t;let r=a_(e);if(!e||!e.config||!r&&!e.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,e.config.retryConfig=r,!(yield(r.shouldRetry||WL)(e)))return{shouldRetry:!1,config:e.config};let s=(r.currentRetryAttempt?0:(t=r.retryDelay)!==null&&t!==void 0?t:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;e.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(c=>{setTimeout(c,s)});return r.onRetryAttempt&&r.onRetryAttempt(e),yield l,{shouldRetry:!0,config:e.config}})}_f.getRetryConfig=YL;function WL(e){let t=a_(e);if(e.name==="AbortError"||!t||t.retry===0||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!e.config.method||t.httpMethodsToRetry.indexOf(e.config.method.toUpperCase())<0)return!1;if(e.response&&e.response.status){let r=!1;for(let[n,i]of t.statusCodesToRetry){let a=e.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function a_(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}});var l_=ce((K9,o_)=>{var Oo=1e3,Lo=Oo*60,Po=Lo*60,Is=Po*24,zL=Is*7,QL=Is*365.25;o_.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return XL(e);if(r==="number"&&isFinite(e))return t.long?ZL(e):JL(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function XL(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*QL;case"weeks":case"week":case"w":return r*zL;case"days":case"day":case"d":return r*Is;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Po;case"minutes":case"minute":case"mins":case"min":case"m":return r*Lo;case"seconds":case"second":case"secs":case"sec":case"s":return r*Oo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function JL(e){var t=Math.abs(e);return t>=Is?Math.round(e/Is)+"d":t>=Po?Math.round(e/Po)+"h":t>=Lo?Math.round(e/Lo)+"m":t>=Oo?Math.round(e/Oo)+"s":e+"ms"}function ZL(e){var t=Math.abs(e);return t>=Is?wf(e,t,Is,"day"):t>=Po?wf(e,t,Po,"hour"):t>=Lo?wf(e,t,Lo,"minute"):t>=Oo?wf(e,t,Oo,"second"):e+" ms"}function wf(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var c_=ce((j9,u_)=>{function $L(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=s,r.humanize=l_(),r.destroy=f,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(d){let h,g=null,y,m;function _(...w){if(!_.enabled)return;let E=_,S=Number(new Date),N=S-(h||S);E.diff=N,E.prev=h,E.curr=S,h=S,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let R=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(O,te)=>{if(O==="%%")return"%";R++;let V=r.formatters[te];if(typeof V=="function"){let M=w[R];O=V.call(E,M),w.splice(R,1),R--}return O}),r.formatArgs.call(E,w),(E.log||r.log).apply(E,w)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:w=>{g=w}}),typeof r.init=="function"&&r.init(_),_}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),y=g.length;for(h=0;h<y;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}u_.exports=$L});var Cf=ce((Mn,Ef)=>{Mn.formatArgs=t3;Mn.save=r3;Mn.load=n3;Mn.useColors=e3;Mn.storage=i3();Mn.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Mn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e3(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function t3(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ef.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Mn.log=console.debug||console.log||(()=>{});function r3(e){try{e?Mn.storage.setItem("debug",e):Mn.storage.removeItem("debug")}catch(t){}}function n3(){let e;try{e=Mn.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function i3(){try{return localStorage}catch(e){}}Ef.exports=c_()(Mn);var{formatters:a3}=Ef.exports;a3.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var f_=ce(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});function s3(e){return function(t,r){return new Promise((n,i)=>{e.call(this,t,r,(a,s)=>{a?i(a):n(s)})})}}s0.default=s3});var p_=ce((l0,h_)=>{"use strict";var d_=l0&&l0.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o3=require("events"),l3=d_(Cf()),u3=d_(f_()),nu=l3.default("agent-base");function c3(e){return Boolean(e)&&typeof e.addRequest=="function"}function o0(){let{stack:e}=new Error;return typeof e!="string"?!1:e.split(`
`).some(t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1)}function bf(e,t){return new bf.Agent(e,t)}(function(e){class t extends o3.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:o0()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:o0()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=o0()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,c=a.timeout||this.timeout,f=y=>{n._hadError||(n.emit("error",y),n._hadError=!0)},d=()=>{l=null,s=!0;let y=new Error(`A "socket" was not created for HTTP request before ${c}ms`);y.code="ETIMEOUT",f(y)},h=y=>{s||(l!==null&&(clearTimeout(l),l=null),f(y))},g=y=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),c3(y)){nu("Callback returned another Agent instance %o",y.constructor.name),y.addRequest(n,a);return}if(y){y.once("free",()=>{this.freeSocket(y,a)}),n.onSocket(y);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(m)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(nu("Converting legacy callback function to promise"),this.promisifiedCallback=u3.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(l=setTimeout(d,c)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{nu("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(y){Promise.reject(y).catch(h)}}freeSocket(n,i){nu("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){nu("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype})(bf||(bf={}));h_.exports=bf});var g_=ce(au=>{"use strict";var f3=au&&au.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(au,"__esModule",{value:!0});var d3=f3(Cf()),iu=d3.default("https-proxy-agent:parse-proxy-response");function h3(e){return new Promise((t,r)=>{let n=0,i=[];function a(){let h=e.read();h?d(h):e.once("readable",a)}function s(){e.removeListener("end",c),e.removeListener("error",f),e.removeListener("close",l),e.removeListener("readable",a)}function l(h){iu("onclose had error %o",h)}function c(){iu("onend")}function f(h){s(),iu("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){iu("have not received end of HTTP headers yet..."),a();return}let m=g.toString("ascii",0,g.indexOf(`\r
`)),_=+m.split(" ")[1];iu("got proxy server response: %o",m),t({statusCode:_,buffered:g})}e.on("error",f),e.on("close",l),e.on("end",c),a()})}au.default=h3});var __=ce(ks=>{"use strict";var p3=ks&&ks.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function c(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,c)}f((n=n.apply(e,t||[])).next())})},Mo=ks&&ks.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ks,"__esModule",{value:!0});var m_=Mo(require("net")),y_=Mo(require("tls")),g3=Mo(require("url")),m3=Mo(require("assert")),y3=Mo(Cf()),v3=p_(),_3=Mo(g_()),su=y3.default("https-proxy-agent:agent"),v_=class extends v3.Agent{constructor(t){let r;if(typeof t=="string"?r=g3.default.parse(t):r=t,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");su("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||C3(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(t,r){return p3(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(su("Creating `tls.Socket`: %o",n),a=y_.default.connect(n)):(su("Creating `net.Socket`: %o",n),a=m_.default.connect(n));let s=Object.assign({},n.headers),c=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;E3(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let w of Object.keys(s))c+=`${w}: ${s[w]}\r
`;let g=_3.default(a);a.write(`${c}\r
`);let{statusCode:y,buffered:m}=yield g;if(y===200){if(t.once("socket",w3),r.secureEndpoint){su("Upgrading socket connection to TLS");let w=r.servername||r.host;return y_.default.connect(Object.assign(Object.assign({},b3(r,"host","hostname","path","port")),{socket:a,servername:w}))}return a}a.destroy();let _=new m_.default.Socket({writable:!1});return _.readable=!0,t.once("socket",w=>{su("replaying proxy buffer for failed request"),m3.default(w.listenerCount("data")>0),w.push(m),w.push(null)}),_})}};ks.default=v_;function w3(e){e.resume()}function E3(e,t){return Boolean(!t&&e===80||t&&e===443)}function C3(e){return typeof e=="string"?/^https:?$/i.test(e):!1}function b3(e,...t){let r={},n;for(n in e)t.includes(n)||(r[n]=e[n]);return r}});var d0=ce((f0,w_)=>{"use strict";var x3=f0&&f0.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u0=x3(__());function c0(e){return new u0.default(e)}(function(e){e.HttpsProxyAgent=u0.default,e.prototype=u0.default.prototype})(c0||(c0={}));w_.exports=c0});var T_=ce(Uo=>{"use strict";var xf=Uo&&Uo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Gaxios=void 0;var S3=xf(r0()),T3=require("https"),A3=xf(n0()),I3=xf(require("querystring")),k3=xf(i0()),E_=require("url"),N3=a0(),R3=s_(),B3=O3()?window.fetch:A3.default;function D3(){return typeof window!="undefined"&&!!window}function O3(){return D3()&&!!window.fetch}function L3(){return typeof Buffer!="undefined"}function C_(e,t){return!!b_(e,t)}function b_(e,t){t=t.toLowerCase();for(let r of Object.keys((e==null?void 0:e.headers)||{}))if(t===r.toLowerCase())return e.headers[r]}var h0;function x_(){var e,t,r,n;let i=((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.HTTPS_PROXY)||((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(h0=d0()),i}x_();function P3(e){var t;let r=(t=process.env.NO_PROXY)!==null&&t!==void 0?t:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new E_.URL(e);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function M3(e){if(!P3(e))return x_()}var S_=class{constructor(t){this.agentCache=new Map,this.defaults=t||{}}request(){return U(this,arguments,function*(t={}){return t=this.validateOpts(t),this._request(t)})}_defaultAdapter(t){return U(this,null,function*(){let n=yield(t.fetchImplementation||B3)(t.url,t),i=yield this.getResponseData(t,n);return this.translateResponse(t,n,i)})}_request(){return U(this,arguments,function*(t={}){try{let r;if(t.adapter?r=yield t.adapter(t,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(t),!t.validateStatus(r.status))throw new N3.GaxiosError(`Request failed with status code ${r.status}`,t,r);return r}catch(r){let n=r;n.config=t;let{shouldRetry:i,config:a}=yield(0,R3.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(t,r){return U(this,null,function*(){switch(t.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(t){let r=(0,S3.default)(!0,{},this.defaults,t);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof t.maxContentLength=="number"&&(r.size=t.maxContentLength),typeof t.maxRedirects=="number"&&(r.follow=t.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;k3.default.readable(r.data)?r.body=r.data:L3()&&Buffer.isBuffer(r.data)?(r.body=r.data,C_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(b_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(C_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=M3(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new E_.URL(i);r.agent=new h0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new h0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new T3.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(t){return t>=200&&t<300}paramsSerializer(t){return I3.default.stringify(t)}translateResponse(t,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:t,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Uo.Gaxios=S_});var Fo=ce(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.request=vi.instance=vi.Gaxios=vi.GaxiosError=void 0;var A_=T_();Object.defineProperty(vi,"Gaxios",{enumerable:!0,get:function(){return A_.Gaxios}});var U3=a0();Object.defineProperty(vi,"GaxiosError",{enumerable:!0,get:function(){return U3.GaxiosError}});vi.instance=new A_.Gaxios;function F3(e){return U(this,null,function*(){return vi.instance.request(e)})}vi.request=F3});var p0=ce((I_,Sf)=>{(function(e){"use strict";var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function y(D){var O,te,V,M=fe.prototype={constructor:fe,toString:null,valueOf:null},le=new fe(1),se=20,_e=4,Oe=-7,Ne=21,Se=-1e7,Ee=1e7,ve=!1,ze=1,Ve=0,vt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},pt="0123456789abcdefghijklmnopqrstuvwxyz",Qe=!0;function fe(A,B){var L,Y,G,Q,J,H,X,ne,Z=this;if(!(Z instanceof fe))return new fe(A,B);if(B==null){if(A&&A._isBigNumber===!0){Z.s=A.s,!A.c||A.e>Ee?Z.c=Z.e=null:A.e<Se?Z.c=[Z.e=0]:(Z.e=A.e,Z.c=A.c.slice());return}if((H=typeof A=="number")&&A*0==0){if(Z.s=1/A<0?(A=-A,-1):1,A===~~A){for(Q=0,J=A;J>=10;J/=10,Q++);Q>Ee?Z.c=Z.e=null:(Z.e=Q,Z.c=[A]);return}ne=String(A)}else{if(!r.test(ne=String(A)))return V(Z,ne,H);Z.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(Q=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(J=ne.search(/e/i))>0?(Q<0&&(Q=J),Q+=+ne.slice(J+1),ne=ne.substring(0,J)):Q<0&&(Q=ne.length)}else{if(E(B,2,pt.length,"Base"),B==10&&Qe)return Z=new fe(A),Ze(Z,se+Z.e+1,_e);if(ne=String(A),H=typeof A=="number"){if(A*0!=0)return V(Z,ne,H,B);if(Z.s=1/A<0?(ne=ne.slice(1),-1):1,fe.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(s+A)}else Z.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(L=pt.slice(0,B),Q=J=0,X=ne.length;J<X;J++)if(L.indexOf(Y=ne.charAt(J))<0){if(Y=="."){if(J>Q){Q=X;continue}}else if(!G&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){G=!0,J=-1,Q=0;continue}return V(Z,String(A),H,B)}H=!1,ne=te(ne,B,10,Z.s),(Q=ne.indexOf("."))>-1?ne=ne.replace(".",""):Q=ne.length}for(J=0;ne.charCodeAt(J)===48;J++);for(X=ne.length;ne.charCodeAt(--X)===48;);if(ne=ne.slice(J,++X)){if(X-=J,H&&fe.DEBUG&&X>15&&(A>f||A!==i(A)))throw Error(s+Z.s*A);if((Q=Q-J-1)>Ee)Z.c=Z.e=null;else if(Q<Se)Z.c=[Z.e=0];else{if(Z.e=Q,Z.c=[],J=(Q+1)%c,Q<0&&(J+=c),J<X){for(J&&Z.c.push(+ne.slice(0,J)),X-=c;J<X;)Z.c.push(+ne.slice(J,J+=c));J=c-(ne=ne.slice(J)).length}else J-=X;for(;J--;ne+="0");Z.c.push(+ne)}}else Z.c=[Z.e=0]}fe.clone=y,fe.ROUND_UP=0,fe.ROUND_DOWN=1,fe.ROUND_CEIL=2,fe.ROUND_FLOOR=3,fe.ROUND_HALF_UP=4,fe.ROUND_HALF_DOWN=5,fe.ROUND_HALF_EVEN=6,fe.ROUND_HALF_CEIL=7,fe.ROUND_HALF_FLOOR=8,fe.EUCLID=9,fe.config=fe.set=function(A){var B,L;if(A!=null)if(typeof A=="object"){if(A.hasOwnProperty(B="DECIMAL_PLACES")&&(L=A[B],E(L,0,g,B),se=L),A.hasOwnProperty(B="ROUNDING_MODE")&&(L=A[B],E(L,0,8,B),_e=L),A.hasOwnProperty(B="EXPONENTIAL_AT")&&(L=A[B],L&&L.pop?(E(L[0],-g,0,B),E(L[1],0,g,B),Oe=L[0],Ne=L[1]):(E(L,-g,g,B),Oe=-(Ne=L<0?-L:L))),A.hasOwnProperty(B="RANGE"))if(L=A[B],L&&L.pop)E(L[0],-g,-1,B),E(L[1],1,g,B),Se=L[0],Ee=L[1];else if(E(L,-g,g,B),L)Se=-(Ee=L<0?-L:L);else throw Error(a+B+" cannot be zero: "+L);if(A.hasOwnProperty(B="CRYPTO"))if(L=A[B],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ve=L;else throw ve=!L,Error(a+"crypto unavailable");else ve=L;else throw Error(a+B+" not true or false: "+L);if(A.hasOwnProperty(B="MODULO_MODE")&&(L=A[B],E(L,0,9,B),ze=L),A.hasOwnProperty(B="POW_PRECISION")&&(L=A[B],E(L,0,g,B),Ve=L),A.hasOwnProperty(B="FORMAT"))if(L=A[B],typeof L=="object")vt=L;else throw Error(a+B+" not an object: "+L);if(A.hasOwnProperty(B="ALPHABET"))if(L=A[B],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))Qe=L.slice(0,10)=="0123456789",pt=L;else throw Error(a+B+" invalid: "+L)}else throw Error(a+"Object expected: "+A);return{DECIMAL_PLACES:se,ROUNDING_MODE:_e,EXPONENTIAL_AT:[Oe,Ne],RANGE:[Se,Ee],CRYPTO:ve,MODULO_MODE:ze,POW_PRECISION:Ve,FORMAT:vt,ALPHABET:pt}},fe.isBigNumber=function(A){if(!A||A._isBigNumber!==!0)return!1;if(!fe.DEBUG)return!0;var B,L,Y=A.c,G=A.e,Q=A.s;e:if({}.toString.call(Y)=="[object Array]"){if((Q===1||Q===-1)&&G>=-g&&G<=g&&G===i(G)){if(Y[0]===0){if(G===0&&Y.length===1)return!0;break e}if(B=(G+1)%c,B<1&&(B+=c),String(Y[0]).length==B){for(B=0;B<Y.length;B++)if(L=Y[B],L<0||L>=l||L!==i(L))break e;if(L!==0)return!0}}}else if(Y===null&&G===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(a+"Invalid BigNumber: "+A)},fe.maximum=fe.max=function(){return tt(arguments,M.lt)},fe.minimum=fe.min=function(){return tt(arguments,M.gt)},fe.random=function(){var A=9007199254740992,B=Math.random()*A&2097151?function(){return i(Math.random()*A)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var Y,G,Q,J,H,X=0,ne=[],Z=new fe(le);if(L==null?L=se:E(L,0,g),J=n(L/c),ve)if(crypto.getRandomValues){for(Y=crypto.getRandomValues(new Uint32Array(J*=2));X<J;)H=Y[X]*131072+(Y[X+1]>>>11),H>=9e15?(G=crypto.getRandomValues(new Uint32Array(2)),Y[X]=G[0],Y[X+1]=G[1]):(ne.push(H%1e14),X+=2);X=J/2}else if(crypto.randomBytes){for(Y=crypto.randomBytes(J*=7);X<J;)H=(Y[X]&31)*281474976710656+Y[X+1]*1099511627776+Y[X+2]*4294967296+Y[X+3]*16777216+(Y[X+4]<<16)+(Y[X+5]<<8)+Y[X+6],H>=9e15?crypto.randomBytes(7).copy(Y,X):(ne.push(H%1e14),X+=7);X=J/7}else throw ve=!1,Error(a+"crypto unavailable");if(!ve)for(;X<J;)H=B(),H<9e15&&(ne[X++]=H%1e14);for(J=ne[--X],L%=c,J&&L&&(H=d[c-L],ne[X]=i(J/H)*H);ne[X]===0;ne.pop(),X--);if(X<0)ne=[Q=0];else{for(Q=-1;ne[0]===0;ne.splice(0,1),Q-=c);for(X=1,H=ne[0];H>=10;H/=10,X++);X<c&&(Q-=c-X)}return Z.e=Q,Z.c=ne,Z}}(),fe.sum=function(){for(var A=1,B=arguments,L=new fe(B[0]);A<B.length;)L=L.plus(B[A++]);return L},te=function(){var A="0123456789";function B(L,Y,G,Q){for(var J,H=[0],X,ne=0,Z=L.length;ne<Z;){for(X=H.length;X--;H[X]*=Y);for(H[0]+=Q.indexOf(L.charAt(ne++)),J=0;J<H.length;J++)H[J]>G-1&&(H[J+1]==null&&(H[J+1]=0),H[J+1]+=H[J]/G|0,H[J]%=G)}return H.reverse()}return function(L,Y,G,Q,J){var H,X,ne,Z,de,Me,Fe,ot,jt=L.indexOf("."),Ht=se,rt=_e;for(jt>=0&&(Z=Ve,Ve=0,L=L.replace(".",""),ot=new fe(Y),Me=ot.pow(L.length-jt),Ve=Z,ot.c=B(R(_(Me.c),Me.e,"0"),10,G,A),ot.e=ot.c.length),Fe=B(L,Y,G,J?(H=pt,A):(H=A,pt)),ne=Z=Fe.length;Fe[--Z]==0;Fe.pop());if(!Fe[0])return H.charAt(0);if(jt<0?--ne:(Me.c=Fe,Me.e=ne,Me.s=Q,Me=O(Me,ot,Ht,rt,G),Fe=Me.c,de=Me.r,ne=Me.e),X=ne+Ht+1,jt=Fe[X],Z=G/2,de=de||X<0||Fe[X+1]!=null,de=rt<4?(jt!=null||de)&&(rt==0||rt==(Me.s<0?3:2)):jt>Z||jt==Z&&(rt==4||de||rt==6&&Fe[X-1]&1||rt==(Me.s<0?8:7)),X<1||!Fe[0])L=de?R(H.charAt(1),-Ht,H.charAt(0)):H.charAt(0);else{if(Fe.length=X,de)for(--G;++Fe[--X]>G;)Fe[X]=0,X||(++ne,Fe=[1].concat(Fe));for(Z=Fe.length;!Fe[--Z];);for(jt=0,L="";jt<=Z;L+=H.charAt(Fe[jt++]));L=R(L,ne,H.charAt(0))}return L}}(),O=function(){function A(Y,G,Q){var J,H,X,ne,Z=0,de=Y.length,Me=G%h,Fe=G/h|0;for(Y=Y.slice();de--;)X=Y[de]%h,ne=Y[de]/h|0,J=Fe*X+ne*Me,H=Me*X+J%h*h+Z,Z=(H/Q|0)+(J/h|0)+Fe*ne,Y[de]=H%Q;return Z&&(Y=[Z].concat(Y)),Y}function B(Y,G,Q,J){var H,X;if(Q!=J)X=Q>J?1:-1;else for(H=X=0;H<Q;H++)if(Y[H]!=G[H]){X=Y[H]>G[H]?1:-1;break}return X}function L(Y,G,Q,J){for(var H=0;Q--;)Y[Q]-=H,H=Y[Q]<G[Q]?1:0,Y[Q]=H*J+Y[Q]-G[Q];for(;!Y[0]&&Y.length>1;Y.splice(0,1));}return function(Y,G,Q,J,H){var X,ne,Z,de,Me,Fe,ot,jt,Ht,rt,kt,cr,Ba,ms,ys,_n,na,Jr=Y.s==G.s?1:-1,Ar=Y.c,ar=G.c;if(!Ar||!Ar[0]||!ar||!ar[0])return new fe(!Y.s||!G.s||(Ar?ar&&Ar[0]==ar[0]:!ar)?NaN:Ar&&Ar[0]==0||!ar?Jr*0:Jr/0);for(jt=new fe(Jr),Ht=jt.c=[],ne=Y.e-G.e,Jr=Q+ne+1,H||(H=l,ne=m(Y.e/c)-m(G.e/c),Jr=Jr/c|0),Z=0;ar[Z]==(Ar[Z]||0);Z++);if(ar[Z]>(Ar[Z]||0)&&ne--,Jr<0)Ht.push(1),de=!0;else{for(ms=Ar.length,_n=ar.length,Z=0,Jr+=2,Me=i(H/(ar[0]+1)),Me>1&&(ar=A(ar,Me,H),Ar=A(Ar,Me,H),_n=ar.length,ms=Ar.length),Ba=_n,rt=Ar.slice(0,_n),kt=rt.length;kt<_n;rt[kt++]=0);na=ar.slice(),na=[0].concat(na),ys=ar[0],ar[1]>=H/2&&ys++;do{if(Me=0,X=B(ar,rt,_n,kt),X<0){if(cr=rt[0],_n!=kt&&(cr=cr*H+(rt[1]||0)),Me=i(cr/ys),Me>1)for(Me>=H&&(Me=H-1),Fe=A(ar,Me,H),ot=Fe.length,kt=rt.length;B(Fe,rt,ot,kt)==1;)Me--,L(Fe,_n<ot?na:ar,ot,H),ot=Fe.length,X=1;else Me==0&&(X=Me=1),Fe=ar.slice(),ot=Fe.length;if(ot<kt&&(Fe=[0].concat(Fe)),L(rt,Fe,kt,H),kt=rt.length,X==-1)for(;B(ar,rt,_n,kt)<1;)Me++,L(rt,_n<kt?na:ar,kt,H),kt=rt.length}else X===0&&(Me++,rt=[0]);Ht[Z++]=Me,rt[0]?rt[kt++]=Ar[Ba]||0:(rt=[Ar[Ba]],kt=1)}while((Ba++<ms||rt[0]!=null)&&Jr--);de=rt[0]!=null,Ht[0]||Ht.splice(0,1)}if(H==l){for(Z=1,Jr=Ht[0];Jr>=10;Jr/=10,Z++);Ze(jt,Q+(jt.e=Z+ne*c-1)+1,J,de)}else jt.e=ne,jt.r=+de;return jt}}();function gt(A,B,L,Y){var G,Q,J,H,X;if(L==null?L=_e:E(L,0,8),!A.c)return A.toString();if(G=A.c[0],J=A.e,B==null)X=_(A.c),X=Y==1||Y==2&&(J<=Oe||J>=Ne)?N(X,J):R(X,J,"0");else if(A=Ze(new fe(A),B,L),Q=A.e,X=_(A.c),H=X.length,Y==1||Y==2&&(B<=Q||Q<=Oe)){for(;H<B;X+="0",H++);X=N(X,Q)}else if(B-=J,X=R(X,Q,"0"),Q+1>H){if(--B>0)for(X+=".";B--;X+="0");}else if(B+=Q-H,B>0)for(Q+1==H&&(X+=".");B--;X+="0");return A.s<0&&G?"-"+X:X}function tt(A,B){for(var L,Y=1,G=new fe(A[0]);Y<A.length;Y++)if(L=new fe(A[Y]),L.s)B.call(G,L)&&(G=L);else{G=L;break}return G}function _t(A,B,L){for(var Y=1,G=B.length;!B[--G];B.pop());for(G=B[0];G>=10;G/=10,Y++);return(L=Y+L*c-1)>Ee?A.c=A.e=null:L<Se?A.c=[A.e=0]:(A.e=L,A.c=B),A}V=function(){var A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,L=/^\.([^.]+)$/,Y=/^-?(Infinity|NaN)$/,G=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,J,H,X){var ne,Z=H?J:J.replace(G,"");if(Y.test(Z))Q.s=isNaN(Z)?null:Z<0?-1:1;else{if(!H&&(Z=Z.replace(A,function(de,Me,Fe){return ne=(Fe=Fe.toLowerCase())=="x"?16:Fe=="b"?2:8,!X||X==ne?Me:de}),X&&(ne=X,Z=Z.replace(B,"$1").replace(L,"0.$1")),J!=Z))return new fe(Z,ne);if(fe.DEBUG)throw Error(a+"Not a"+(X?" base "+X:"")+" number: "+J);Q.s=null}Q.c=Q.e=null}}();function Ze(A,B,L,Y){var G,Q,J,H,X,ne,Z,de=A.c,Me=d;if(de){e:{for(G=1,H=de[0];H>=10;H/=10,G++);if(Q=B-G,Q<0)Q+=c,J=B,X=de[ne=0],Z=X/Me[G-J-1]%10|0;else if(ne=n((Q+1)/c),ne>=de.length)if(Y){for(;de.length<=ne;de.push(0));X=Z=0,G=1,Q%=c,J=Q-c+1}else break e;else{for(X=H=de[ne],G=1;H>=10;H/=10,G++);Q%=c,J=Q-c+G,Z=J<0?0:X/Me[G-J-1]%10|0}if(Y=Y||B<0||de[ne+1]!=null||(J<0?X:X%Me[G-J-1]),Y=L<4?(Z||Y)&&(L==0||L==(A.s<0?3:2)):Z>5||Z==5&&(L==4||Y||L==6&&(Q>0?J>0?X/Me[G-J]:0:de[ne-1])%10&1||L==(A.s<0?8:7)),B<1||!de[0])return de.length=0,Y?(B-=A.e+1,de[0]=Me[(c-B%c)%c],A.e=-B||0):de[0]=A.e=0,A;if(Q==0?(de.length=ne,H=1,ne--):(de.length=ne+1,H=Me[c-Q],de[ne]=J>0?i(X/Me[G-J]%Me[J])*H:0),Y)for(;;)if(ne==0){for(Q=1,J=de[0];J>=10;J/=10,Q++);for(J=de[0]+=H,H=1;J>=10;J/=10,H++);Q!=H&&(A.e++,de[0]==l&&(de[0]=1));break}else{if(de[ne]+=H,de[ne]!=l)break;de[ne--]=0,H=1}for(Q=de.length;de[--Q]===0;de.pop());}A.e>Ee?A.c=A.e=null:A.e<Se&&(A.c=[A.e=0])}return A}function Ce(A){var B,L=A.e;return L===null?A.toString():(B=_(A.c),B=L<=Oe||L>=Ne?N(B,L):R(B,L,"0"),A.s<0?"-"+B:B)}return M.absoluteValue=M.abs=function(){var A=new fe(this);return A.s<0&&(A.s=1),A},M.comparedTo=function(A,B){return w(this,new fe(A,B))},M.decimalPlaces=M.dp=function(A,B){var L,Y,G,Q=this;if(A!=null)return E(A,0,g),B==null?B=_e:E(B,0,8),Ze(new fe(Q),A+Q.e+1,B);if(!(L=Q.c))return null;if(Y=((G=L.length-1)-m(this.e/c))*c,G=L[G])for(;G%10==0;G/=10,Y--);return Y<0&&(Y=0),Y},M.dividedBy=M.div=function(A,B){return O(this,new fe(A,B),se,_e)},M.dividedToIntegerBy=M.idiv=function(A,B){return O(this,new fe(A,B),0,1)},M.exponentiatedBy=M.pow=function(A,B){var L,Y,G,Q,J,H,X,ne,Z,de=this;if(A=new fe(A),A.c&&!A.isInteger())throw Error(a+"Exponent not an integer: "+Ce(A));if(B!=null&&(B=new fe(B)),H=A.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!A.c||!A.c[0])return Z=new fe(Math.pow(+Ce(de),H?2-S(A):+Ce(A))),B?Z.mod(B):Z;if(X=A.s<0,B){if(B.c?!B.c[0]:!B.s)return new fe(NaN);Y=!X&&de.isInteger()&&B.isInteger(),Y&&(de=de.mod(B))}else{if(A.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||H&&de.c[1]>=24e7:de.c[0]<8e13||H&&de.c[0]<=9999975e7)))return Q=de.s<0&&S(A)?-0:0,de.e>-1&&(Q=1/Q),new fe(X?1/Q:Q);Ve&&(Q=n(Ve/c+2))}for(H?(L=new fe(.5),X&&(A.s=1),ne=S(A)):(G=Math.abs(+Ce(A)),ne=G%2),Z=new fe(le);;){if(ne){if(Z=Z.times(de),!Z.c)break;Q?Z.c.length>Q&&(Z.c.length=Q):Y&&(Z=Z.mod(B))}if(G){if(G=i(G/2),G===0)break;ne=G%2}else if(A=A.times(L),Ze(A,A.e+1,1),A.e>14)ne=S(A);else{if(G=+Ce(A),G===0)break;ne=G%2}de=de.times(de),Q?de.c&&de.c.length>Q&&(de.c.length=Q):Y&&(de=de.mod(B))}return Y?Z:(X&&(Z=le.div(Z)),B?Z.mod(B):Q?Ze(Z,Ve,_e,J):Z)},M.integerValue=function(A){var B=new fe(this);return A==null?A=_e:E(A,0,8),Ze(B,B.e+1,A)},M.isEqualTo=M.eq=function(A,B){return w(this,new fe(A,B))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(A,B){return w(this,new fe(A,B))>0},M.isGreaterThanOrEqualTo=M.gte=function(A,B){return(B=w(this,new fe(A,B)))===1||B===0},M.isInteger=function(){return!!this.c&&m(this.e/c)>this.c.length-2},M.isLessThan=M.lt=function(A,B){return w(this,new fe(A,B))<0},M.isLessThanOrEqualTo=M.lte=function(A,B){return(B=w(this,new fe(A,B)))===-1||B===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(A,B){var L,Y,G,Q,J=this,H=J.s;if(A=new fe(A,B),B=A.s,!H||!B)return new fe(NaN);if(H!=B)return A.s=-B,J.plus(A);var X=J.e/c,ne=A.e/c,Z=J.c,de=A.c;if(!X||!ne){if(!Z||!de)return Z?(A.s=-B,A):new fe(de?J:NaN);if(!Z[0]||!de[0])return de[0]?(A.s=-B,A):new fe(Z[0]?J:_e==3?-0:0)}if(X=m(X),ne=m(ne),Z=Z.slice(),H=X-ne){for((Q=H<0)?(H=-H,G=Z):(ne=X,G=de),G.reverse(),B=H;B--;G.push(0));G.reverse()}else for(Y=(Q=(H=Z.length)<(B=de.length))?H:B,H=B=0;B<Y;B++)if(Z[B]!=de[B]){Q=Z[B]<de[B];break}if(Q&&(G=Z,Z=de,de=G,A.s=-A.s),B=(Y=de.length)-(L=Z.length),B>0)for(;B--;Z[L++]=0);for(B=l-1;Y>H;){if(Z[--Y]<de[Y]){for(L=Y;L&&!Z[--L];Z[L]=B);--Z[L],Z[Y]+=l}Z[Y]-=de[Y]}for(;Z[0]==0;Z.splice(0,1),--ne);return Z[0]?_t(A,Z,ne):(A.s=_e==3?-1:1,A.c=[A.e=0],A)},M.modulo=M.mod=function(A,B){var L,Y,G=this;return A=new fe(A,B),!G.c||!A.s||A.c&&!A.c[0]?new fe(NaN):!A.c||G.c&&!G.c[0]?new fe(G):(ze==9?(Y=A.s,A.s=1,L=O(G,A,0,3),A.s=Y,L.s*=Y):L=O(G,A,0,ze),A=G.minus(L.times(A)),!A.c[0]&&ze==1&&(A.s=G.s),A)},M.multipliedBy=M.times=function(A,B){var L,Y,G,Q,J,H,X,ne,Z,de,Me,Fe,ot,jt,Ht,rt=this,kt=rt.c,cr=(A=new fe(A,B)).c;if(!kt||!cr||!kt[0]||!cr[0])return!rt.s||!A.s||kt&&!kt[0]&&!cr||cr&&!cr[0]&&!kt?A.c=A.e=A.s=null:(A.s*=rt.s,!kt||!cr?A.c=A.e=null:(A.c=[0],A.e=0)),A;for(Y=m(rt.e/c)+m(A.e/c),A.s*=rt.s,X=kt.length,de=cr.length,X<de&&(ot=kt,kt=cr,cr=ot,G=X,X=de,de=G),G=X+de,ot=[];G--;ot.push(0));for(jt=l,Ht=h,G=de;--G>=0;){for(L=0,Me=cr[G]%Ht,Fe=cr[G]/Ht|0,J=X,Q=G+J;Q>G;)ne=kt[--J]%Ht,Z=kt[J]/Ht|0,H=Fe*ne+Z*Me,ne=Me*ne+H%Ht*Ht+ot[Q]+L,L=(ne/jt|0)+(H/Ht|0)+Fe*Z,ot[Q--]=ne%jt;ot[Q]=L}return L?++Y:ot.splice(0,1),_t(A,ot,Y)},M.negated=function(){var A=new fe(this);return A.s=-A.s||null,A},M.plus=function(A,B){var L,Y=this,G=Y.s;if(A=new fe(A,B),B=A.s,!G||!B)return new fe(NaN);if(G!=B)return A.s=-B,Y.minus(A);var Q=Y.e/c,J=A.e/c,H=Y.c,X=A.c;if(!Q||!J){if(!H||!X)return new fe(G/0);if(!H[0]||!X[0])return X[0]?A:new fe(H[0]?Y:G*0)}if(Q=m(Q),J=m(J),H=H.slice(),G=Q-J){for(G>0?(J=Q,L=X):(G=-G,L=H),L.reverse();G--;L.push(0));L.reverse()}for(G=H.length,B=X.length,G-B<0&&(L=X,X=H,H=L,B=G),G=0;B;)G=(H[--B]=H[B]+X[B]+G)/l|0,H[B]=l===H[B]?0:H[B]%l;return G&&(H=[G].concat(H),++J),_t(A,H,J)},M.precision=M.sd=function(A,B){var L,Y,G,Q=this;if(A!=null&&A!==!!A)return E(A,1,g),B==null?B=_e:E(B,0,8),Ze(new fe(Q),A,B);if(!(L=Q.c))return null;if(G=L.length-1,Y=G*c+1,G=L[G]){for(;G%10==0;G/=10,Y--);for(G=L[0];G>=10;G/=10,Y++);}return A&&Q.e+1>Y&&(Y=Q.e+1),Y},M.shiftedBy=function(A){return E(A,-f,f),this.times("1e"+A)},M.squareRoot=M.sqrt=function(){var A,B,L,Y,G,Q=this,J=Q.c,H=Q.s,X=Q.e,ne=se+4,Z=new fe("0.5");if(H!==1||!J||!J[0])return new fe(!H||H<0&&(!J||J[0])?NaN:J?Q:1/0);if(H=Math.sqrt(+Ce(Q)),H==0||H==1/0?(B=_(J),(B.length+X)%2==0&&(B+="0"),H=Math.sqrt(+B),X=m((X+1)/2)-(X<0||X%2),H==1/0?B="5e"+X:(B=H.toExponential(),B=B.slice(0,B.indexOf("e")+1)+X),L=new fe(B)):L=new fe(H+""),L.c[0]){for(X=L.e,H=X+ne,H<3&&(H=0);;)if(G=L,L=Z.times(G.plus(O(Q,G,ne,1))),_(G.c).slice(0,H)===(B=_(L.c)).slice(0,H))if(L.e<X&&--H,B=B.slice(H-3,H+1),B=="9999"||!Y&&B=="4999"){if(!Y&&(Ze(G,G.e+se+2,0),G.times(G).eq(Q))){L=G;break}ne+=4,H+=4,Y=1}else{(!+B||!+B.slice(1)&&B.charAt(0)=="5")&&(Ze(L,L.e+se+2,1),A=!L.times(L).eq(Q));break}}return Ze(L,L.e+se+1,_e,A)},M.toExponential=function(A,B){return A!=null&&(E(A,0,g),A++),gt(this,A,B,1)},M.toFixed=function(A,B){return A!=null&&(E(A,0,g),A=A+this.e+1),gt(this,A,B)},M.toFormat=function(A,B,L){var Y,G=this;if(L==null)A!=null&&B&&typeof B=="object"?(L=B,B=null):A&&typeof A=="object"?(L=A,A=B=null):L=vt;else if(typeof L!="object")throw Error(a+"Argument not an object: "+L);if(Y=G.toFixed(A,B),G.c){var Q,J=Y.split("."),H=+L.groupSize,X=+L.secondaryGroupSize,ne=L.groupSeparator||"",Z=J[0],de=J[1],Me=G.s<0,Fe=Me?Z.slice(1):Z,ot=Fe.length;if(X&&(Q=H,H=X,X=Q,ot-=Q),H>0&&ot>0){for(Q=ot%H||H,Z=Fe.substr(0,Q);Q<ot;Q+=H)Z+=ne+Fe.substr(Q,H);X>0&&(Z+=ne+Fe.slice(Q)),Me&&(Z="-"+Z)}Y=de?Z+(L.decimalSeparator||"")+((X=+L.fractionGroupSize)?de.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):de):Z}return(L.prefix||"")+Y+(L.suffix||"")},M.toFraction=function(A){var B,L,Y,G,Q,J,H,X,ne,Z,de,Me,Fe=this,ot=Fe.c;if(A!=null&&(H=new fe(A),!H.isInteger()&&(H.c||H.s!==1)||H.lt(le)))throw Error(a+"Argument "+(H.isInteger()?"out of range: ":"not an integer: ")+Ce(H));if(!ot)return new fe(Fe);for(B=new fe(le),ne=L=new fe(le),Y=X=new fe(le),Me=_(ot),Q=B.e=Me.length-Fe.e-1,B.c[0]=d[(J=Q%c)<0?c+J:J],A=!A||H.comparedTo(B)>0?Q>0?B:ne:H,J=Ee,Ee=1/0,H=new fe(Me),X.c[0]=0;Z=O(H,B,0,1),G=L.plus(Z.times(Y)),G.comparedTo(A)!=1;)L=Y,Y=G,ne=X.plus(Z.times(G=ne)),X=G,B=H.minus(Z.times(G=B)),H=G;return G=O(A.minus(L),Y,0,1),X=X.plus(G.times(ne)),L=L.plus(G.times(Y)),X.s=ne.s=Fe.s,Q=Q*2,de=O(ne,Y,Q,_e).minus(Fe).abs().comparedTo(O(X,L,Q,_e).minus(Fe).abs())<1?[ne,Y]:[X,L],Ee=J,de},M.toNumber=function(){return+Ce(this)},M.toPrecision=function(A,B){return A!=null&&E(A,1,g),gt(this,A,B,2)},M.toString=function(A){var B,L=this,Y=L.s,G=L.e;return G===null?Y?(B="Infinity",Y<0&&(B="-"+B)):B="NaN":(A==null?B=G<=Oe||G>=Ne?N(_(L.c),G):R(_(L.c),G,"0"):A===10&&Qe?(L=Ze(new fe(L),se+G+1,_e),B=R(_(L.c),L.e,"0")):(E(A,2,pt.length,"Base"),B=te(R(_(L.c),G,"0"),10,A,Y,!0)),Y<0&&L.c[0]&&(B="-"+B)),B},M.valueOf=M.toJSON=function(){return Ce(this)},M._isBigNumber=!0,D!=null&&fe.set(D),fe}function m(D){var O=D|0;return D>0||D===O?O:O-1}function _(D){for(var O,te,V=1,M=D.length,le=D[0]+"";V<M;){for(O=D[V++]+"",te=c-O.length;te--;O="0"+O);le+=O}for(M=le.length;le.charCodeAt(--M)===48;);return le.slice(0,M+1||1)}function w(D,O){var te,V,M=D.c,le=O.c,se=D.s,_e=O.s,Oe=D.e,Ne=O.e;if(!se||!_e)return null;if(te=M&&!M[0],V=le&&!le[0],te||V)return te?V?0:-_e:se;if(se!=_e)return se;if(te=se<0,V=Oe==Ne,!M||!le)return V?0:!M^te?1:-1;if(!V)return Oe>Ne^te?1:-1;for(_e=(Oe=M.length)<(Ne=le.length)?Oe:Ne,se=0;se<_e;se++)if(M[se]!=le[se])return M[se]>le[se]^te?1:-1;return Oe==Ne?0:Oe>Ne^te?1:-1}function E(D,O,te,V){if(D<O||D>te||D!==i(D))throw Error(a+(V||"Argument")+(typeof D=="number"?D<O||D>te?" out of range: ":" not an integer: ":" not a primitive number: ")+String(D))}function S(D){var O=D.c.length-1;return m(D.e/c)==O&&D.c[O]%2!=0}function N(D,O){return(D.length>1?D.charAt(0)+"."+D.slice(1):D)+(O<0?"e":"e+")+O}function R(D,O,te){var V,M;if(O<0){for(M=te+".";++O;M+=te);D=M+D}else if(V=D.length,++O>V){for(M=te,O-=V;--O;M+=te);D+=M}else O<V&&(D=D.slice(0,O)+"."+D.slice(O));return D}t=y(),t.default=t.BigNumber=t,typeof define=="function"&&define.amd?define(function(){return t}):typeof Sf!="undefined"&&Sf.exports?Sf.exports=t:(e||(e=typeof self!="undefined"&&self?self:window),e.BigNumber=t)})(I_)});var B_=ce((X9,R_)=>{var k_=p0(),N_=R_.exports;(function(){"use strict";function e(f){return f<10?"0"+f:f}var t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function c(f,d){var h,g,y,m,_=n,w,E=d[f],S=E!=null&&(E instanceof k_||k_.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(f)),typeof s=="function"&&(E=s.call(d,f,E)),typeof E){case"string":return S?E:l(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(n+=i,w=[],Object.prototype.toString.apply(E)==="[object Array]"){for(m=E.length,h=0;h<m;h+=1)w[h]=c(h,E)||"null";return y=w.length===0?"[]":n?`[
`+n+w.join(`,
`+n)+`
`+_+"]":"["+w.join(",")+"]",n=_,y}if(s&&typeof s=="object")for(m=s.length,h=0;h<m;h+=1)typeof s[h]=="string"&&(g=s[h],y=c(g,E),y&&w.push(l(g)+(n?": ":":")+y));else Object.keys(E).forEach(function(N){var R=c(N,E);R&&w.push(l(N)+(n?": ":":")+R)});return y=w.length===0?"{}":n?`{
`+n+w.join(`,
`+n)+`
`+_+"}":"{"+w.join(",")+"}",n=_,y}}typeof N_.stringify!="function"&&(N_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return c("",{"":f})})})()});var O_=ce((J9,D_)=>{var Tf=null,q3=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,G3=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,V3=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(e!=null){if(e.strict===!0&&(t.strict=!0),e.storeAsString===!0&&(t.storeAsString=!0),t.alwaysParseAsBig=e.alwaysParseAsBig===!0?e.alwaysParseAsBig:!1,t.useNativeBigInt=e.useNativeBigInt===!0?e.useNativeBigInt:!1,typeof e.constructorAction!="undefined")if(e.constructorAction==="error"||e.constructorAction==="ignore"||e.constructorAction==="preserve")t.constructorAction=e.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`);if(typeof e.protoAction!="undefined")if(e.protoAction==="error"||e.protoAction==="ignore"||e.protoAction==="preserve")t.protoAction=e.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(_){throw{name:"SyntaxError",message:_,at:r,text:a}},l=function(_){return _&&_!==n&&s("Expected '"+_+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},c=function(){var _,w="";for(n==="-"&&(w="-",l("-"));n>="0"&&n<="9";)w+=n,l();if(n===".")for(w+=".";l()&&n>="0"&&n<="9";)w+=n;if(n==="e"||n==="E")for(w+=n,l(),(n==="-"||n==="+")&&(w+=n,l());n>="0"&&n<="9";)w+=n,l();if(_=+w,!isFinite(_))s("Bad number");else return Tf==null&&(Tf=p0()),w.length>15?t.storeAsString?w:t.useNativeBigInt?BigInt(w):new Tf(w):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(_):new Tf(_):_},f=function(){var _,w,E="",S;if(n==='"')for(var N=r;l();){if(n==='"')return r-1>N&&(E+=a.substring(N,r-1)),l(),E;if(n==="\\"){if(r-1>N&&(E+=a.substring(N,r-1)),l(),n==="u"){for(S=0,w=0;w<4&&(_=parseInt(l(),16),!!isFinite(_));w+=1)S=S*16+_;E+=String.fromCharCode(S)}else if(typeof i[n]=="string")E+=i[n];else break;N=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,y=function(){var _=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),_;for(;n;){if(_.push(g()),d(),n==="]")return l("]"),_;l(","),d()}}s("Bad array")},m=function(){var _,w=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),w;for(;n;){if(_=f(),d(),l(":"),t.strict===!0&&Object.hasOwnProperty.call(w,_)&&s('Duplicate key "'+_+'"'),q3.test(_)===!0?t.protoAction==="error"?s("Object contains forbidden prototype property"):t.protoAction==="ignore"?g():w[_]=g():G3.test(_)===!0?t.constructorAction==="error"?s("Object contains forbidden constructor property"):t.constructorAction==="ignore"?g():w[_]=g():w[_]=g(),d(),n==="}")return l("}"),w;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return m();case"[":return y();case'"':return f();case"-":return c();default:return n>="0"&&n<="9"?c():h()}},function(_,w){var E;return a=_+"",r=0,n=" ",E=g(),d(),n&&s("Syntax error"),typeof w=="function"?function S(N,R){var D,O,te=N[R];return te&&typeof te=="object"&&Object.keys(te).forEach(function(V){O=S(te,V),O!==void 0?te[V]=O:delete te[V]}),w.call(N,R,te)}({"":E},""):E}};D_.exports=V3});var M_=ce((Z9,Af)=>{var L_=B_().stringify,P_=O_();Af.exports=function(e){return{parse:P_(e),stringify:L_}};Af.exports.parse=P_();Af.exports.stringify=L_});var kf=ce(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.requestTimeout=Ot.resetIsAvailableCache=Ot.isAvailable=Ot.project=Ot.instance=Ot.HEADERS=Ot.HEADER_VALUE=Ot.HEADER_NAME=Ot.SECONDARY_HOST_ADDRESS=Ot.HOST_ADDRESS=Ot.BASE_PATH=void 0;var g0=Fo(),K3=M_();Ot.BASE_PATH="/computeMetadata/v1";Ot.HOST_ADDRESS="http://169.254.169.254";Ot.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ot.HEADER_NAME="Metadata-Flavor";Ot.HEADER_VALUE="Google";Ot.HEADERS=Object.freeze({[Ot.HEADER_NAME]:Ot.HEADER_VALUE});function m0(e){return e||(e=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ot.HOST_ADDRESS),/^https?:\/\//.test(e)||(e=`http://${e}`),new URL(Ot.BASE_PATH,e).href}function j3(e){Object.keys(e).forEach(t=>{switch(t){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${t}' is not a valid configuration option.`)}})}function y0(e,t,r=3,n=!1){return U(this,null,function*(){t=t||{},typeof t=="string"&&(t={property:t});let i="";typeof t=="object"&&t.property&&(i="/"+t.property),j3(t);try{let s=yield(n?H3:g0.request)({url:`${m0()}/${e}${i}`,headers:Object.assign({},Ot.HEADERS,t.headers),retryConfig:{noResponseRetries:r},params:t.params,responseType:"text",timeout:U_()});if(s.headers[Ot.HEADER_NAME.toLowerCase()]!==Ot.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Ot.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return K3.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function H3(e){return U(this,null,function*(){let t=un(en({},e),{url:e.url.replace(m0(),m0(Ot.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,g0.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,g0.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function Y3(e){return y0("instance",e)}Ot.instance=Y3;function W3(e){return y0("project",e)}Ot.project=W3;function z3(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var If;function Q3(){return U(this,null,function*(){try{return If===void 0&&(If=y0("instance",void 0,z3(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield If,!0}catch(e){let t=e;if(process.env.DEBUG_AUTH&&console.info(t),t.type==="request-timeout"||t.response&&t.response.status===404)return!1;if(!(t.response&&t.response.status===404)&&(!t.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(t.code))){let r="UNKNOWN";t.code&&(r=t.code),process.emitWarning(`received unexpected error = ${t.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Ot.isAvailable=Q3;function X3(){If=void 0}Ot.resetIsAvailableCache=X3;function U_(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Ot.requestTimeout=U_});var G_=ce(Nf=>{"use strict";Nf.byteLength=Z3;Nf.toByteArray=e4;Nf.fromByteArray=n4;var Mi=[],Jn=[],J3=typeof Uint8Array!="undefined"?Uint8Array:Array,v0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ns=0,F_=v0.length;Ns<F_;++Ns)Mi[Ns]=v0[Ns],Jn[v0.charCodeAt(Ns)]=Ns;var Ns,F_;Jn["-".charCodeAt(0)]=62;Jn["_".charCodeAt(0)]=63;function q_(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function Z3(e){var t=q_(e),r=t[0],n=t[1];return(r+n)*3/4-n}function $3(e,t,r){return(t+r)*3/4-r}function e4(e){var t,r=q_(e),n=r[0],i=r[1],a=new J3($3(e,n,i)),s=0,l=i>0?n-4:n,c;for(c=0;c<l;c+=4)t=Jn[e.charCodeAt(c)]<<18|Jn[e.charCodeAt(c+1)]<<12|Jn[e.charCodeAt(c+2)]<<6|Jn[e.charCodeAt(c+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=t&255;return i===2&&(t=Jn[e.charCodeAt(c)]<<2|Jn[e.charCodeAt(c+1)]>>4,a[s++]=t&255),i===1&&(t=Jn[e.charCodeAt(c)]<<10|Jn[e.charCodeAt(c+1)]<<4|Jn[e.charCodeAt(c+2)]>>2,a[s++]=t>>8&255,a[s++]=t&255),a}function t4(e){return Mi[e>>18&63]+Mi[e>>12&63]+Mi[e>>6&63]+Mi[e&63]}function r4(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(t4(n));return i.join("")}function n4(e){for(var t,r=e.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(r4(e,s,s+a>l?l:s+a));return n===1?(t=e[r-1],i.push(Mi[t>>2]+Mi[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(Mi[t>>10]+Mi[t>>4&63]+Mi[t<<2&63]+"=")),i.join("")}});var K_=ce(V_=>{(function(e){function t(){}function r(c,f){if(c=c===void 0?"utf-8":c,f=f===void 0?{fatal:!1}:f,s.indexOf(c.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+c+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(c){return Buffer.from(c.buffer,c.byteOffset,c.byteLength).toString("utf-8")}function i(c){var f=URL.createObjectURL(new Blob([c],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(c)}finally{URL.revokeObjectURL(f)}}function a(c){for(var f=0,d=Math.min(65536,c.length+1),h=new Uint16Array(d),g=[],y=0;;){var m=f<c.length;if(!m||y>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,y))),!m)return g.join("");c=c.subarray(f),y=f=0}if(m=c[f++],(m&128)==0)h[y++]=m;else if((m&224)==192){var _=c[f++]&63;h[y++]=(m&31)<<6|_}else if((m&240)==224){_=c[f++]&63;var w=c[f++]&63;h[y++]=(m&31)<<12|_<<6|w}else if((m&248)==240){_=c[f++]&63,w=c[f++]&63;var E=c[f++]&63;m=(m&7)<<18|_<<12|w<<6|E,65535<m&&(m-=65536,h[y++]=m>>>10&1023|55296,m=56320|m&1023),h[y++]=m}}}if(e.TextEncoder&&e.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(c,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=c.length,h=0,g=Math.max(32,d+(d>>>1)+7),y=new Uint8Array(g>>>3<<3);f<d;){var m=c.charCodeAt(f++);if(55296<=m&&56319>=m){if(f<d){var _=c.charCodeAt(f);(_&64512)==56320&&(++f,m=((m&1023)<<10)+(_&1023)+65536)}if(55296<=m&&56319>=m)continue}if(h+4>y.length&&(g+=8,g*=1+f/c.length*2,g=g>>>3<<3,_=new Uint8Array(g),_.set(y),y=_),(m&4294967168)==0)y[h++]=m;else{if((m&4294965248)==0)y[h++]=m>>>6&31|192;else if((m&4294901760)==0)y[h++]=m>>>12&15|224,y[h++]=m>>>6&63|128;else if((m&4292870144)==0)y[h++]=m>>>18&7|240,y[h++]=m>>>12&63|128,y[h++]=m>>>6&63|128;else continue;y[h++]=m&63|128}}return y.slice?y.slice(0,h):y.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(c,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return c=c instanceof Uint8Array?c:c.buffer instanceof ArrayBuffer?new Uint8Array(c.buffer):new Uint8Array(c),l(c)},e.TextEncoder=t,e.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:V_)});var j_=ce(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.BrowserCrypto=void 0;var qo=G_();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&K_();var i4=Go(),ou=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(t){return U(this,null,function*(){let r=new TextEncoder().encode(t),n=yield window.crypto.subtle.digest("SHA-256",r);return qo.fromByteArray(new Uint8Array(n))})}randomBytesBase64(t){let r=new Uint8Array(t);return window.crypto.getRandomValues(r),qo.fromByteArray(r)}static padBase64(t){for(;t.length%4!=0;)t+="=";return t}verify(t,r,n){return U(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=qo.toByteArray(ou.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",t,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(t,r){return U(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",t,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return qo.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(t){let r=qo.toByteArray(ou.padBase64(t));return new TextDecoder().decode(r)}encodeBase64StringUtf8(t){let r=new TextEncoder().encode(t);return qo.fromByteArray(r)}sha256DigestHex(t){return U(this,null,function*(){let r=new TextEncoder().encode(t),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,i4.fromArrayBufferToHex)(n)})}signWithHmacSha256(t,r){return U(this,null,function*(){let n=typeof t=="string"?t:String.fromCharCode(...new Uint16Array(t)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};Rf.BrowserCrypto=ou});var Y_=ce(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.NodeCrypto=void 0;var Vo=require("crypto"),H_=class{sha256DigestBase64(t){return U(this,null,function*(){return Vo.createHash("sha256").update(t).digest("base64")})}randomBytesBase64(t){return Vo.randomBytes(t).toString("base64")}verify(t,r,n){return U(this,null,function*(){let i=Vo.createVerify("sha256");return i.update(r),i.end(),i.verify(t,n,"base64")})}sign(t,r){return U(this,null,function*(){let n=Vo.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(t,"base64")})}decodeBase64StringUtf8(t){return Buffer.from(t,"base64").toString("utf-8")}encodeBase64StringUtf8(t){return Buffer.from(t,"utf-8").toString("base64")}sha256DigestHex(t){return U(this,null,function*(){return Vo.createHash("sha256").update(t).digest("hex")})}signWithHmacSha256(t,r){return U(this,null,function*(){let n=typeof t=="string"?t:s4(t);return a4(Vo.createHmac("sha256",n).update(r).digest())})}};Bf.NodeCrypto=H_;function a4(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function s4(e){return Buffer.from(e)}});var Go=ce(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.fromArrayBufferToHex=Ha.hasBrowserCrypto=Ha.createCrypto=void 0;var o4=j_(),l4=Y_();function u4(){return W_()?new o4.BrowserCrypto:new l4.NodeCrypto}Ha.createCrypto=u4;function W_(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}Ha.hasBrowserCrypto=W_;function c4(e){return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}Ha.fromArrayBufferToHex=c4});var z_=ce(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.validate=void 0;function f4(e){let t=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of t)if(e[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}Df.validate=f4});var Q_=ce((sV,d4)=>{d4.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var lu=ce(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.DefaultTransporter=void 0;var X_=Fo(),h4=z_(),J_=Q_(),Z_="google-api-nodejs-client",Ko=class{configure(t={}){if(t.headers=t.headers||{},typeof window=="undefined"){let r=t.headers["User-Agent"];r?r.includes(`${Z_}/`)||(t.headers["User-Agent"]=`${r} ${Ko.USER_AGENT}`):t.headers["User-Agent"]=Ko.USER_AGENT;let n=`auth/${J_.version}`;if(t.headers["x-goog-api-client"]&&!t.headers["x-goog-api-client"].includes(n))t.headers["x-goog-api-client"]=`${t.headers["x-goog-api-client"]} ${n}`;else if(!t.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");t.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return t}request(t,r){t=this.configure(t);try{(0,h4.validate)(t)}catch(n){if(r)return r(n);throw n}if(r)(0,X_.request)(t).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,X_.request)(t).catch(n=>{throw this.processError(n)})}processError(t){let r=t.response,n=t,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};Of.DefaultTransporter=Ko;Ko.USER_AGENT=`${Z_}/${J_.version}`});var ew=ce((lV,$_)=>{"use strict";var p4=e=>e==null?[]:Array.isArray(e)?e:typeof e=="string"?[e]:typeof e[Symbol.iterator]=="function"?[...e]:[e];$_.exports=p4});var jo=ce((_0,rw)=>{var Lf=require("buffer"),Ui=Lf.Buffer;function tw(e,t){for(var r in e)t[r]=e[r]}Ui.from&&Ui.alloc&&Ui.allocUnsafe&&Ui.allocUnsafeSlow?rw.exports=Lf:(tw(Lf,_0),_0.Buffer=Rs);function Rs(e,t,r){return Ui(e,t,r)}Rs.prototype=Object.create(Ui.prototype);tw(Ui,Rs);Rs.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Ui(e,t,r)};Rs.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Ui(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Rs.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ui(e)};Rs.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Lf.SlowBuffer(e)}});var iw=ce((uV,nw)=>{"use strict";function w0(e){var t=(e/8|0)+(e%8==0?0:1);return t}var g4={ES256:w0(256),ES384:w0(384),ES512:w0(521)};function m4(e){var t=g4[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}nw.exports=m4});var E0=ce((cV,cw)=>{"use strict";var Pf=jo().Buffer,aw=iw(),Mf=128,sw=0,y4=32,v4=16,_4=2,ow=v4|y4|sw<<6,Uf=_4|sw<<6;function w4(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lw(e){if(Pf.isBuffer(e))return e;if(typeof e=="string")return Pf.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function E4(e,t){e=lw(e);var r=aw(t),n=r+1,i=e.length,a=0;if(e[a++]!==ow)throw new Error('Could not find expected "seq"');var s=e[a++];if(s===(Mf|1)&&(s=e[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(e[a++]!==Uf)throw new Error('Could not find expected "int" for "r"');var l=e[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var c=a;if(a+=l,e[a++]!==Uf)throw new Error('Could not find expected "int" for "s"');var f=e[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,y=Pf.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)y[a]=0;e.copy(y,a,c+Math.max(-h,0),c+l),a=r;for(var m=a;a<m+g;++a)y[a]=0;return e.copy(y,a,d+Math.max(-g,0),d+f),y=y.toString("base64"),y=w4(y),y}function uw(e,t,r){for(var n=0;t+n<r&&e[t+n]===0;)++n;var i=e[t+n]>=Mf;return i&&--n,n}function C4(e,t){e=lw(e);var r=aw(t),n=e.length;if(n!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=uw(e,0,r),a=uw(e,r,e.length),s=r-i,l=r-a,c=1+1+s+1+1+l,f=c<Mf,d=Pf.allocUnsafe((f?2:3)+c),h=0;return d[h++]=ow,f?d[h++]=c:(d[h++]=Mf|1,d[h++]=c&255),d[h++]=Uf,d[h++]=s,i<0?(d[h++]=0,h+=e.copy(d,h,0,r)):h+=e.copy(d,h,i,r),d[h++]=Uf,d[h++]=l,a<0?(d[h++]=0,e.copy(d,h,r)):e.copy(d,h,r+a),d}cw.exports={derToJose:E4,joseToDer:C4}});var uu=ce(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.AuthClient=void 0;var b4=require("events"),x4=lu(),fw=class extends b4.EventEmitter{constructor(){super(...arguments);this.transporter=new x4.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(t){this.credentials=t}addSharedMetadataHeaders(t){return!t["x-goog-user-project"]&&this.quotaProjectId&&(t["x-goog-user-project"]=this.quotaProjectId),t}};Ff.AuthClient=fw});var C0=ce(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.LoginTicket=void 0;var dw=class{constructor(t,r){this.envelope=t,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let t=this.getPayload();return t&&t.sub?t.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};qf.LoginTicket=dw});var Bs=ce(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.OAuth2Client=Fi.CertificateFormat=Fi.CodeChallengeMethod=void 0;var Gf=require("querystring"),S4=require("stream"),T4=E0(),b0=Go(),A4=uu(),I4=C0(),k4;(function(e){e.Plain="plain",e.S256="S256"})(k4=Fi.CodeChallengeMethod||(Fi.CodeChallengeMethod={}));var Ya;(function(e){e.PEM="PEM",e.JWK="JWK"})(Ya=Fi.CertificateFormat||(Fi.CertificateFormat={}));var Jt=class extends A4.AuthClient{constructor(t,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=Ya.PEM,this.refreshTokenPromises=new Map;let i=t&&typeof t=="object"?t:{clientId:t,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(t={}){if(t.code_challenge_method&&!t.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return t.response_type=t.response_type||"code",t.client_id=t.client_id||this._clientId,t.redirect_uri=t.redirect_uri||this.redirectUri,t.scope instanceof Array&&(t.scope=t.scope.join(" ")),Jt.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+Gf.stringify(t)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return U(this,null,function*(){let t=(0,b0.createCrypto)(),n=t.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield t.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(t,r){let n=typeof t=="string"?{code:t}:t;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(t){return U(this,null,function*(){let r=Jt.GOOGLE_OAUTH2_TOKEN_URL_,n={code:t.code,client_id:t.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:t.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:t.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:Gf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(t){return U(this,null,function*(){if(!t)return this.refreshTokenNoCache(t);if(this.refreshTokenPromises.has(t))return this.refreshTokenPromises.get(t);let r=this.refreshTokenNoCache(t).then(n=>(this.refreshTokenPromises.delete(t),n),n=>{throw this.refreshTokenPromises.delete(t),n});return this.refreshTokenPromises.set(t,r),r})}refreshTokenNoCache(t){return U(this,null,function*(){if(!t)throw new Error("No refresh token is set.");let r=Jt.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:t,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:Gf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(t){if(t)this.refreshAccessTokenAsync().then(r=>t(null,r.credentials,r.res),t);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return U(this,null,function*(){let t=yield this.refreshToken(this.credentials.refresh_token),r=t.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:t.res}})}getAccessToken(t){if(t)this.getAccessTokenAsync().then(r=>t(null,r.token,r.res),t);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return U(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(t){return U(this,null,function*(){return(yield this.getRequestMetadataAsync(t)).headers})}getRequestMetadataAsync(t){return U(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let c={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(c)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let c=l;throw c.response&&(c.response.status===403||c.response.status===404)&&(c.message=`Could not refresh access token: ${c.message}`),c}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(t){let r=Gf.stringify({token:t});return`${Jt.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(t,r){let n={url:Jt.getRevokeTokenUrl(t),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(t){if(t)this.revokeCredentialsAsync().then(r=>t(null,r),t);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return U(this,null,function*(){let t=this.credentials.access_token;if(this.credentials={},t)return this.revokeToken(t);throw new Error("No access token to revoke.")})}request(t,r){if(r)this.requestAsync(t).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(t)}requestAsync(t,r=!1){return U(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(t.url);t.headers=t.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(t.headers.Authorization=i.headers.Authorization),this.apiKey&&(t.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),c=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof S4.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(t,!0);if(!r&&d&&!f&&c){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(t,!0)}}throw i}return n})}verifyIdToken(t,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(t).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(t)}verifyIdTokenAsync(t){return U(this,null,function*(){if(!t.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(t.idToken,r.certs,t.audience,Jt.ISSUERS_,t.maxExpiry)})}getTokenInfo(t){return U(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${t}`},url:Jt.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(t){if(t)this.getFederatedSignonCertsAsync().then(r=>t(null,r.certs,r.res),t);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return U(this,null,function*(){let t=new Date().getTime(),r=(0,b0.hasBrowserCrypto)()?Ya.JWK:Ya.PEM;if(this.certificateExpiry&&t<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case Ya.PEM:i=Jt.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case Ya.JWK:i=Jt.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case Ya.PEM:l=n.data;break;case Ya.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let c=new Date;return this.certificateExpiry=s===-1?null:new Date(c.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(t){if(t)this.getIapPublicKeysAsync().then(r=>t(null,r.pubkeys,r.res),t);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return U(this,null,function*(){let t,r=Jt.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{t=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:t.data,res:t}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(t,r,n,i,a){return U(this,null,function*(){let s=(0,b0.createCrypto)();a||(a=Jt.MAX_TOKEN_LIFETIME_SECS_);let l=t.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+t);let c=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(N){throw N instanceof Error&&(N.message=`Can't parse token envelope: ${l[0]}': ${N.message}`),N}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(N){throw N instanceof Error&&(N.message=`Can't parse token payload '${l[0]}`),N}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=T4.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,c,f)))throw new Error("Invalid token signature: "+t);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let m=Number(h.iat);if(isNaN(m))throw new Error("iat field using invalid format");let _=Number(h.exp);if(isNaN(_))throw new Error("exp field using invalid format");let w=new Date().getTime()/1e3;if(_>=w+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let E=m-Jt.CLOCK_SKEW_SECS_,S=_+Jt.CLOCK_SKEW_SECS_;if(w<E)throw new Error("Token used too early, "+w+" < "+E+": "+JSON.stringify(h));if(w>S)throw new Error("Token used too late, "+w+" > "+S+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let N=h.aud,R=!1;if(n.constructor===Array?R=n.indexOf(N)>-1:R=N===n,!R)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new I4.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return U(this,null,function*(){if(this.refreshHandler){let t=yield this.refreshHandler();if(!t.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return t}})}isTokenExpiring(){let t=this.credentials.expiry_date;return t?t<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Fi.OAuth2Client=Jt;Jt.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";Jt.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";Jt.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";Jt.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";Jt.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";Jt.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";Jt.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";Jt.CLOCK_SKEW_SECS_=300;Jt.MAX_TOKEN_LIFETIME_SECS_=86400;Jt.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var x0=ce(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.Compute=void 0;var N4=ew(),R4=Fo(),hw=kf(),B4=Bs(),pw=class extends B4.OAuth2Client{constructor(t={}){super(t);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=t.serviceAccountEmail||"default",this.scopes=N4(t.scopes)}refreshTokenNoCache(t){return U(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield hw.instance(a)}catch(a){throw a instanceof R4.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(t){return U(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${t}`,n;try{let i={property:r};n=yield hw.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(t){let r=t.response;r&&r.status&&(t.code=r.status.toString(),r.status===403?t.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+t.message:r.status===404&&(t.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+t.message))}};Vf.Compute=pw});var S0=ce(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.IdTokenClient=void 0;var D4=Bs(),gw=class extends D4.OAuth2Client{constructor(t){super();this.targetAudience=t.targetAudience,this.idTokenProvider=t.idTokenProvider}getRequestMetadataAsync(t){return U(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(t){let r=t.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};Kf.IdTokenClient=gw});var T0=ce(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.getEnv=ga.clear=ga.GCPEnv=void 0;var mw=kf(),Wa;(function(e){e.APP_ENGINE="APP_ENGINE",e.KUBERNETES_ENGINE="KUBERNETES_ENGINE",e.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",e.COMPUTE_ENGINE="COMPUTE_ENGINE",e.CLOUD_RUN="CLOUD_RUN",e.NONE="NONE"})(Wa=ga.GCPEnv||(ga.GCPEnv={}));var cu;function O4(){cu=void 0}ga.clear=O4;function L4(){return U(this,null,function*(){return cu||(cu=P4(),cu)})}ga.getEnv=L4;function P4(){return U(this,null,function*(){let e=Wa.NONE;return M4()?e=Wa.APP_ENGINE:U4()?e=Wa.CLOUD_FUNCTIONS:(yield G4())?(yield q4())?e=Wa.KUBERNETES_ENGINE:F4()?e=Wa.CLOUD_RUN:e=Wa.COMPUTE_ENGINE:e=Wa.NONE,e})}function M4(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function U4(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function F4(){return!!process.env.K_CONFIGURATION}function q4(){return U(this,null,function*(){try{return yield mw.instance("attributes/cluster-name"),!0}catch(e){return!1}})}function G4(){return U(this,null,function*(){return mw.isAvailable()})}});var A0=ce(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.GaxiosError=void 0;var yw=class extends Error{constructor(t,r,n){super(t);this.response=n,this.config=r,this.code=n.status.toString()}};jf.GaxiosError=yw});var _w=ce(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.getRetryConfig=void 0;function V4(e){return U(this,null,function*(){var t;let r=vw(e);if(!e||!e.config||!r&&!e.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,e.config.retryConfig=r,!(yield(r.shouldRetry||K4)(e)))return{shouldRetry:!1,config:e.config};let s=(r.currentRetryAttempt?0:(t=r.retryDelay)!==null&&t!==void 0?t:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;e.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(c=>{setTimeout(c,s)});return r.onRetryAttempt&&r.onRetryAttempt(e),yield l,{shouldRetry:!0,config:e.config}})}Hf.getRetryConfig=V4;function K4(e){let t=vw(e);if(e.name==="AbortError"||!t||t.retry===0||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!e.config.method||t.httpMethodsToRetry.indexOf(e.config.method.toUpperCase())<0)return!1;if(e.response&&e.response.status){let r=!1;for(let[n,i]of t.statusCodesToRetry){let a=e.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function vw(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}});var Sw=ce(Ho=>{"use strict";var Yf=Ho&&Ho.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.Gaxios=void 0;var j4=Yf(r0()),H4=require("https"),Y4=Yf(n0()),W4=Yf(require("querystring")),z4=Yf(i0()),ww=require("url"),Q4=A0(),X4=_w(),J4=$4()?window.fetch:Y4.default;function Z4(){return typeof window!="undefined"&&!!window}function $4(){return Z4()&&!!window.fetch}function eP(){return typeof Buffer!="undefined"}function Ew(e,t){return!!Cw(e,t)}function Cw(e,t){t=t.toLowerCase();for(let r of Object.keys((e==null?void 0:e.headers)||{}))if(t===r.toLowerCase())return e.headers[r]}var I0;function bw(){let e=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return e&&(I0=d0()),e}bw();function tP(e){var t;let r=(t=process.env.NO_PROXY)!==null&&t!==void 0?t:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new ww.URL(e);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function rP(e){if(!tP(e))return bw()}var xw=class{constructor(t){this.agentCache=new Map,this.defaults=t||{}}request(){return U(this,arguments,function*(t={}){return t=this.validateOpts(t),this._request(t)})}_defaultAdapter(t){return U(this,null,function*(){let n=yield(t.fetchImplementation||J4)(t.url,t),i=yield this.getResponseData(t,n);return this.translateResponse(t,n,i)})}_request(){return U(this,arguments,function*(t={}){try{let r;if(t.adapter?r=yield t.adapter(t,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(t),!t.validateStatus(r.status))throw new Q4.GaxiosError(`Request failed with status code ${r.status}`,t,r);return r}catch(r){let n=r;n.config=t;let{shouldRetry:i,config:a}=yield X4.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(t,r){return U(this,null,function*(){switch(t.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(t){let r=j4.default(!0,{},this.defaults,t);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof t.maxContentLength=="number"&&(r.size=t.maxContentLength),typeof t.maxRedirects=="number"&&(r.follow=t.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;z4.default.readable(r.data)?r.body=r.data:eP()&&Buffer.isBuffer(r.data)?(r.body=r.data,Ew(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(Cw(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Ew(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=rP(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new ww.URL(i);r.agent=new I0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new I0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new H4.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(t){return t>=200&&t<300}paramsSerializer(t){return W4.default.stringify(t)}translateResponse(t,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:t,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Ho.Gaxios=xw});var Aw=ce(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.request=qi.instance=qi.Gaxios=void 0;var Tw=Sw();Object.defineProperty(qi,"Gaxios",{enumerable:!0,get:function(){return Tw.Gaxios}});var nP=A0();Object.defineProperty(qi,"GaxiosError",{enumerable:!0,get:function(){return nP.GaxiosError}});qi.instance=new Tw.Gaxios;function iP(e){return U(this,null,function*(){return qi.instance.request(e)})}qi.request=iP});var k0=ce((EV,Iw)=>{var Wf=jo().Buffer,aP=require("stream"),sP=require("util");function zf(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Wf.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Wf.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}sP.inherits(zf,aP);zf.prototype.write=function(t){this.buffer=Wf.concat([this.buffer,Wf.from(t)]),this.emit("data",t)};zf.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};Iw.exports=zf});var Nw=ce((CV,kw)=>{"use strict";var fu=require("buffer").Buffer,N0=require("buffer").SlowBuffer;kw.exports=Qf;function Qf(e,t){if(!fu.isBuffer(e)||!fu.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}Qf.install=function(){fu.prototype.equal=N0.prototype.equal=function(t){return Qf(this,t)}};var oP=fu.prototype.equal,lP=N0.prototype.equal;Qf.restore=function(){fu.prototype.equal=oP,N0.prototype.equal=lP}});var D0=ce((bV,Fw)=>{var uP=Nw(),Yo=jo().Buffer,Gi=require("crypto"),Rw=E0(),Bw=require("util"),cP=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,du="secret must be a string or buffer",Wo="key must be a string or a buffer",fP="key must be a string, a buffer or an object",R0=typeof Gi.createPublicKey=="function";R0&&(Wo+=" or a KeyObject",du+="or a KeyObject");function Dw(e){if(!Yo.isBuffer(e)&&typeof e!="string"&&(!R0||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw _i(Wo)}function Ow(e){if(!Yo.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw _i(fP)}function dP(e){if(!Yo.isBuffer(e)){if(typeof e=="string")return e;if(!R0||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw _i(du)}}function B0(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lw(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function _i(e){var t=[].slice.call(arguments,1),r=Bw.format.bind(Bw,e).apply(null,t);return new TypeError(r)}function hP(e){return Yo.isBuffer(e)||typeof e=="string"}function hu(e){return hP(e)||(e=JSON.stringify(e)),e}function Pw(e){return function(r,n){dP(n),r=hu(r);var i=Gi.createHmac("sha"+e,n),a=(i.update(r),i.digest("base64"));return B0(a)}}function pP(e){return function(r,n,i){var a=Pw(e)(r,i);return uP(Yo.from(n),Yo.from(a))}}function Mw(e){return function(r,n){Ow(n),r=hu(r);var i=Gi.createSign("RSA-SHA"+e),a=(i.update(r),i.sign(n,"base64"));return B0(a)}}function Uw(e){return function(r,n,i){Dw(i),r=hu(r),n=Lw(n);var a=Gi.createVerify("RSA-SHA"+e);return a.update(r),a.verify(i,n,"base64")}}function gP(e){return function(r,n){Ow(n),r=hu(r);var i=Gi.createSign("RSA-SHA"+e),a=(i.update(r),i.sign({key:n,padding:Gi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Gi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return B0(a)}}function mP(e){return function(r,n,i){Dw(i),r=hu(r),n=Lw(n);var a=Gi.createVerify("RSA-SHA"+e);return a.update(r),a.verify({key:i,padding:Gi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Gi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function yP(e){var t=Mw(e);return function(){var n=t.apply(null,arguments);return n=Rw.derToJose(n,"ES"+e),n}}function vP(e){var t=Uw(e);return function(n,i,a){i=Rw.joseToDer(i,"ES"+e).toString("base64");var s=t(n,i,a);return s}}function _P(){return function(){return""}}function wP(){return function(t,r){return r===""}}Fw.exports=function(t){var r={hs:Pw,rs:Mw,ps:gP,es:yP,none:_P},n={hs:pP,rs:Uw,ps:mP,es:vP,none:wP},i=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw _i(cP,t);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var O0=ce((xV,qw)=>{var EP=require("buffer").Buffer;qw.exports=function(t){return typeof t=="string"?t:typeof t=="number"||EP.isBuffer(t)?t.toString():JSON.stringify(t)}});var Yw=ce((SV,Hw)=>{var CP=jo().Buffer,Gw=k0(),bP=D0(),xP=require("stream"),Vw=O0(),L0=require("util");function Kw(e,t){return CP.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function SP(e,t,r){r=r||"utf8";var n=Kw(Vw(e),"binary"),i=Kw(Vw(t),r);return L0.format("%s.%s",n,i)}function jw(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,a=bP(t.alg),s=SP(t,r,i),l=a.sign(s,n);return L0.format("%s.%s",s,l)}function Xf(e){var t=e.secret||e.privateKey||e.key,r=new Gw(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Gw(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}L0.inherits(Xf,xP);Xf.prototype.sign=function(){try{var t=jw({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Xf.sign=jw;Hw.exports=Xf});var rE=ce((TV,tE)=>{var Ww=jo().Buffer,zw=k0(),TP=D0(),AP=require("stream"),Qw=O0(),IP=require("util"),kP=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function NP(e){return Object.prototype.toString.call(e)==="[object Object]"}function RP(e){if(NP(e))return e;try{return JSON.parse(e)}catch(t){return}}function Xw(e){var t=e.split(".",1)[0];return RP(Ww.from(t,"base64").toString("binary"))}function BP(e){return e.split(".",2).join(".")}function Jw(e){return e.split(".")[2]}function DP(e,t){t=t||"utf8";var r=e.split(".")[1];return Ww.from(r,"base64").toString(t)}function Zw(e){return kP.test(e)&&!!Xw(e)}function $w(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=Qw(e);var i=Jw(e),a=BP(e),s=TP(t);return s.verify(a,i,r)}function eE(e,t){if(t=t||{},e=Qw(e),!Zw(e))return null;var r=Xw(e);if(!r)return null;var n=DP(e);return(r.typ==="JWT"||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:Jw(e)}}function zo(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new zw(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new zw(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}IP.inherits(zo,AP);zo.prototype.verify=function(){try{var t=$w(this.signature.buffer,this.algorithm,this.key.buffer),r=eE(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};zo.decode=eE;zo.isValid=Zw;zo.verify=$w;tE.exports=zo});var P0=ce(za=>{var nE=Yw(),Jf=rE(),OP=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];za.ALGORITHMS=OP;za.sign=nE.sign;za.verify=Jf.verify;za.decode=Jf.decode;za.isValid=Jf.isValid;za.createSign=function(t){return new nE(t)};za.createVerify=function(t){return new Jf(t)}});var dt=ce((IV,iE)=>{iE.exports={options:{usePureJavaScript:!1}}});var oE=ce((kV,sE)=>{var M0={};sE.exports=M0;var aE={};M0.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=LP(e,t);else{var i=0,a=t.length,s=t.charAt(0),l=[0];for(i=0;i<e.length;++i){for(var c=0,f=e[i];c<l.length;++c)f+=l[c]<<8,l[c]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=t[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};M0.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=aE[t];if(!r){r=aE[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var l=r[e.charCodeAt(n)];if(l===void 0)return;for(var c=0,f=l;c<s.length;++c)f+=s[c]*i,s[c]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;e[d]===a&&d<e.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function LP(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,l=e.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=a.length-1;r>=0;--r)c+=t[a[r]];return c}});var Lt=ce((NV,fE)=>{var lE=dt(),uE=oE(),j=fE.exports=lE.util=lE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){j.nextTick=process.nextTick,typeof setImmediate=="function"?j.setImmediate=setImmediate:j.setImmediate=j.nextTick;return}if(typeof setImmediate=="function"){j.setImmediate=function(){return setImmediate.apply(void 0,arguments)},j.nextTick=function(l){return setImmediate(l)};return}if(j.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var f=t.slice();t.length=0,f.forEach(function(d){d()})}};var s=l,e="forge.setImmediate",t=[];j.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=j.setImmediate;j.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),a(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n))}}j.nextTick=j.setImmediate})();j.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;j.globalScope=function(){return j.isNodejs?global:typeof self=="undefined"?window:self}();j.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};j.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};j.isArrayBufferView=function(e){return e&&j.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function pu(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}j.ByteBuffer=U0;function U0(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(j.isArrayBuffer(e)||j.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof U0||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}j.ByteStringBuffer=U0;var PP=4096;j.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>PP&&(this.data.substr(0,1),this._constructedStringLength=0)};j.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};j.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};j.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};j.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};j.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};j.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(j.encodeUtf8(e))};j.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};j.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};j.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};j.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};j.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};j.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};j.ByteStringBuffer.prototype.putInt=function(e,t){pu(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};j.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};j.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};j.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};j.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};j.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};j.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};j.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};j.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};j.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};j.ByteStringBuffer.prototype.getInt=function(e){pu(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};j.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};j.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};j.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};j.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};j.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};j.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};j.ByteStringBuffer.prototype.copy=function(){var e=j.createBuffer(this.data);return e.read=this.read,e};j.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};j.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};j.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};j.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};j.ByteStringBuffer.prototype.toString=function(){return j.decodeUtf8(this.bytes())};function MP(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=j.isArrayBuffer(e),n=j.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}j.DataBuffer=MP;j.DataBuffer.prototype.length=function(){return this.write-this.read};j.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};j.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};j.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};j.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};j.DataBuffer.prototype.putBytes=function(e,t){if(j.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(j.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof j.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&j.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof j.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=j.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=j.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=j.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};j.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};j.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};j.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};j.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};j.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};j.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};j.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};j.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};j.DataBuffer.prototype.putInt=function(e,t){pu(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};j.DataBuffer.prototype.putSignedInt=function(e,t){return pu(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};j.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};j.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};j.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};j.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};j.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};j.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};j.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};j.DataBuffer.prototype.getInt=function(e){pu(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};j.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};j.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};j.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};j.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};j.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};j.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};j.DataBuffer.prototype.copy=function(){return new j.DataBuffer(this)};j.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};j.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};j.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};j.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};j.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return j.binary.raw.encode(t);if(e==="hex")return j.binary.hex.encode(t);if(e==="base64")return j.binary.base64.encode(t);if(e==="utf8")return j.text.utf8.decode(t);if(e==="utf16")return j.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};j.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=j.encodeUtf8(e)),new j.ByteBuffer(e)};j.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};j.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};j.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};j.bytesToHex=function(e){return j.createBuffer(e).toHex()};j.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Xa=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],cE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";j.encode64=function(e,t){for(var r="",n="",i,a,s,l=0;l<e.length;)i=e.charCodeAt(l++),a=e.charCodeAt(l++),s=e.charCodeAt(l++),r+=Qa.charAt(i>>2),r+=Qa.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Qa.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Qa.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};j.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=Xa[e.charCodeAt(s++)-43],n=Xa[e.charCodeAt(s++)-43],i=Xa[e.charCodeAt(s++)-43],a=Xa[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};j.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};j.decodeUtf8=function(e){return decodeURIComponent(escape(e))};j.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:uE.encode,decode:uE.decode}};j.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};j.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};j.binary.hex.encode=j.bytesToHex;j.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};j.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,l=0;l<e.byteLength;)i=e[l++],a=e[l++],s=e[l++],r+=Qa.charAt(i>>2),r+=Qa.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Qa.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Qa.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};j.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,c=0,f=r;c<e.length;)i=Xa[e.charCodeAt(c++)-43],a=Xa[e.charCodeAt(c++)-43],s=Xa[e.charCodeAt(c++)-43],l=Xa[e.charCodeAt(c++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return t?f-r:n.subarray(0,f)};j.binary.base58.encode=function(e,t){return j.binary.baseN.encode(e,cE,t)};j.binary.base58.decode=function(e,t){return j.binary.baseN.decode(e,cE,t)};j.text={utf8:{},utf16:{}};j.text.utf8.encode=function(e,t,r){e=j.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};j.text.utf8.decode=function(e){return j.decodeUtf8(String.fromCharCode.apply(null,e))};j.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<e.length;++l)i[s++]=e.charCodeAt(l),a+=2;return t?a-r:n};j.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};j.deflate=function(e,t,r){if(t=j.decode64(e.deflate(j.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};j.inflate=function(e,t,r){var n=e.inflate(j.encode64(t)).rval;return n===null?null:j.decode64(n)};var F0=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=j.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},q0=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(j.decode64(r))),r},UP=function(e,t,r,n){var i=q0(e,t);i===null&&(i={}),i[r]=n,F0(e,t,i)},FP=function(e,t,r){var n=q0(e,t);return n!==null&&(n=r in n?n[r]:null),n},qP=function(e,t,r){var n=q0(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),F0(e,t,n)}},GP=function(e,t){F0(e,t,null)},Zf=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(c){s=c}if(a)break}if(!a)throw s;return n};j.setItem=function(e,t,r,n,i){Zf(UP,arguments,i)};j.getItem=function(e,t,r,n){return Zf(FP,arguments,n)};j.removeItem=function(e,t,r,n){Zf(qP,arguments,n)};j.clearItems=function(e,t,r){Zf(GP,arguments,r)};j.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};j.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(e.substring(s)),a.join("")};j.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,l=n===void 0?".":n,c=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return c+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};j.formatSize=function(e){return e>=1073741824?e=j.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=j.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=j.formatNumber(e/1024,0)+" KiB":e=j.formatNumber(e,0)+" bytes",e};j.bytesFromIP=function(e){return e.indexOf(".")!==-1?j.bytesFromIPv4(e):e.indexOf(":")!==-1?j.bytesFromIPv6(e):null};j.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=j.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};j.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=j.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=j.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};j.bytesToIP=function(e){return e.length===4?j.bytesToIPv4(e):e.length===16?j.bytesToIPv6(e):null};j.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};j.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=j.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=t.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};j.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in j&&!e.update)return t(null,j.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return j.cores=navigator.hardwareConcurrency,t(null,j.cores);if(typeof Worker=="undefined")return j.cores=1,t(null,j.cores);if(typeof Blob=="undefined")return j.cores=2,t(null,j.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,c){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return j.cores=Math.max(1,f),URL.revokeObjectURL(r),t(null,j.cores)}i(c,function(d,h){s.push(a(c,h)),n(s,l-1,c)})}function i(s,l){for(var c=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var y=0;y<s;++y)c[y].terminate();l(null,f)}}),c.push(h)}for(var d=0;d<s;++d)c[d].postMessage(d)}function a(s,l){for(var c=[],f=0;f<s;++f)for(var d=l[f],h=c[f]=[],g=0;g<s;++g)if(f!==g){var y=l[g];(d.st>y.st&&d.st<y.et||y.st>d.st&&y.st<d.et)&&h.push(g)}return c.reduce(function(m,_){return Math.max(m,_.length)},0)}}});var $f=ce((RV,dE)=>{var Lr=dt();Lt();dE.exports=Lr.cipher=Lr.cipher||{};Lr.cipher.algorithms=Lr.cipher.algorithms||{};Lr.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Lr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Lr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Lr.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Lr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Lr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Lr.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Lr.cipher.algorithms[e]=t};Lr.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Lr.cipher.algorithms?Lr.cipher.algorithms[e]:null};var G0=Lr.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};G0.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Lr.util.createBuffer(),this.output=e.output||Lr.util.createBuffer(),this.mode.start(t)};G0.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};G0.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var K0=ce((BV,hE)=>{var Pr=dt();Lt();Pr.cipher=Pr.cipher||{};var Et=hE.exports=Pr.cipher.modes=Pr.cipher.modes||{};Et.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.ecb.prototype.start=function(e){};Et.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Et.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Et.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Et.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Et.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=ed(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Et.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Et.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Et.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Et.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Et.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Pr.util.createBuffer(),this._partialBytes=0};Et.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ed(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Et.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Et.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Pr.util.createBuffer(),this._partialBytes=0};Et.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ed(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Et.ofb.prototype.decrypt=Et.ofb.prototype.encrypt;Et.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Pr.util.createBuffer(),this._partialBytes=0};Et.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ed(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}td(this._inBlock)};Et.ctr.prototype.decrypt=Et.ctr.prototype.encrypt;Et.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Pr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Et.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Pr.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=Pr.util.createBuffer(e.additionalData):r=Pr.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Pr.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(V0(n*8)))}this._inBlock=this._j0.slice(0),td(this._inBlock),this._partialBytes=0,r=Pr.util.createBuffer(r),this._aDataLength=V0(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Et.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),td(this._inBlock)};Et.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),td(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Et.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Pr.util.createBuffer();var n=this._aDataLength.concat(V0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Et.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Et.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Et.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};Et.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Et.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],c=s/n|0,f=(n-1-s%n)*t;l[c]=1<<t-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,e),t)}return a};Et.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],c=i[s];i[a+s]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[e[0]^f[0],e[1]^f[1],e[2]^f[2],e[3]^f[3]]}return i};function ed(e,t){if(typeof e=="string"&&(e=Pr.util.createBuffer(e)),Pr.util.isArray(e)&&e.length>4){var r=e;e=Pr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Pr.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function td(e){e[e.length-1]=e[e.length-1]+1&4294967295}function V0(e){return[e/4294967296|0,e&4294967295]}});var Ja=ce((DV,yE)=>{var Zt=dt();$f();K0();Lt();yE.exports=Zt.aes=Zt.aes||{};Zt.aes.startEncrypting=function(e,t,r,n){var i=rd({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Zt.aes.createEncryptionCipher=function(e,t){return rd({key:e,output:null,decrypt:!1,mode:t})};Zt.aes.startDecrypting=function(e,t,r,n){var i=rd({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Zt.aes.createDecryptionCipher=function(e,t){return rd({key:e,output:null,decrypt:!0,mode:t})};Zt.aes.Algorithm=function(e,t){j0||gE();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Y0(r._w,n,i,!1)},decrypt:function(n,i){return Y0(r._w,n,i,!0)}}}),r._init=!1};Zt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Zt.util.createBuffer(t);else if(Zt.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Zt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!Zt.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!Zt.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=mE(t,e.decrypt&&!s),this._init=!0}};Zt.aes._expandKey=function(e,t){return j0||gE(),mE(e,t)};Zt.aes._updateBlock=Y0;Qo("AES-ECB",Zt.cipher.modes.ecb);Qo("AES-CBC",Zt.cipher.modes.cbc);Qo("AES-CFB",Zt.cipher.modes.cfb);Qo("AES-OFB",Zt.cipher.modes.ofb);Qo("AES-CTR",Zt.cipher.modes.ctr);Qo("AES-GCM",Zt.cipher.modes.gcm);function Qo(e,t){var r=function(){return new Zt.aes.Algorithm(e,t)};Zt.cipher.registerAlgorithm(e,r)}var j0=!1,Xo=4,cn,H0,pE,Ds,wi;function gE(){j0=!0,pE=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;cn=new Array(256),H0=new Array(256),Ds=new Array(4),wi=new Array(4);for(var t=0;t<4;++t)Ds[t]=new Array(256),wi[t]=new Array(256);for(var r=0,n=0,i,a,s,l,c,f,d,t=0;t<256;++t){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,cn[r]=l,H0[l]=r,c=e[l],i=e[r],a=e[i],s=e[a],f=c<<24^l<<16^l<<8^(l^c),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Ds[h][r]=f,wi[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function mE(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,l=Xo*s,c=a;c<l;++c)n=r[c-1],c%a==0?(n=cn[n>>>16&255]<<24^cn[n>>>8&255]<<16^cn[n&255]<<8^cn[n>>>24]^pE[i]<<24,i++):a>6&&c%a==4&&(n=cn[n>>>24]<<24^cn[n>>>16&255]<<16^cn[n>>>8&255]<<8^cn[n&255]),r[c]=r[c-a]^n;if(t){var f,d=wi[0],h=wi[1],g=wi[2],y=wi[3],m=r.slice(0);l=r.length;for(var c=0,_=l-Xo;c<l;c+=Xo,_-=Xo)if(c===0||c===l-Xo)m[c]=r[_],m[c+1]=r[_+3],m[c+2]=r[_+2],m[c+3]=r[_+1];else for(var w=0;w<Xo;++w)f=r[_+w],m[c+(3&-w)]=d[cn[f>>>24]]^h[cn[f>>>16&255]]^g[cn[f>>>8&255]]^y[cn[f&255]];r=m}return r}function Y0(e,t,r,n){var i=e.length/4-1,a,s,l,c,f;n?(a=wi[0],s=wi[1],l=wi[2],c=wi[3],f=H0):(a=Ds[0],s=Ds[1],l=Ds[2],c=Ds[3],f=cn);var d,h,g,y,m,_,w;d=t[0]^e[0],h=t[n?3:1]^e[1],g=t[2]^e[2],y=t[n?1:3]^e[3];for(var E=3,S=1;S<i;++S)m=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^c[y&255]^e[++E],_=a[h>>>24]^s[g>>>16&255]^l[y>>>8&255]^c[d&255]^e[++E],w=a[g>>>24]^s[y>>>16&255]^l[d>>>8&255]^c[h&255]^e[++E],y=a[y>>>24]^s[d>>>16&255]^l[h>>>8&255]^c[g&255]^e[++E],d=m,h=_,g=w;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[y&255]^e[++E],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[y>>>8&255]<<8^f[d&255]^e[++E],r[2]=f[g>>>24]<<24^f[y>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^e[++E],r[n?1:3]=f[y>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^e[++E]}function rd(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Zt.cipher.createDecipher(r,e.key):n=Zt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof Zt.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var Za=ce((OV,vE)=>{var gu=dt();gu.pki=gu.pki||{};var W0=vE.exports=gu.pki.oids=gu.oids=gu.oids||{};function we(e,t){W0[e]=t,W0[t]=e}function qt(e,t){W0[e]=t}we("1.2.840.113549.1.1.1","rsaEncryption");we("1.2.840.113549.1.1.4","md5WithRSAEncryption");we("1.2.840.113549.1.1.5","sha1WithRSAEncryption");we("1.2.840.113549.1.1.7","RSAES-OAEP");we("1.2.840.113549.1.1.8","mgf1");we("1.2.840.113549.1.1.9","pSpecified");we("1.2.840.113549.1.1.10","RSASSA-PSS");we("1.2.840.113549.1.1.11","sha256WithRSAEncryption");we("1.2.840.113549.1.1.12","sha384WithRSAEncryption");we("1.2.840.113549.1.1.13","sha512WithRSAEncryption");we("1.3.101.112","EdDSA25519");we("1.2.840.10040.4.3","dsa-with-sha1");we("1.3.14.3.2.7","desCBC");we("1.3.14.3.2.26","sha1");we("1.3.14.3.2.29","sha1WithRSASignature");we("2.16.840.1.101.3.4.2.1","sha256");we("2.16.840.1.101.3.4.2.2","sha384");we("2.16.840.1.101.3.4.2.3","sha512");we("2.16.840.1.101.3.4.2.4","sha224");we("2.16.840.1.101.3.4.2.5","sha512-224");we("2.16.840.1.101.3.4.2.6","sha512-256");we("1.2.840.113549.2.2","md2");we("1.2.840.113549.2.5","md5");we("1.2.840.113549.1.7.1","data");we("1.2.840.113549.1.7.2","signedData");we("1.2.840.113549.1.7.3","envelopedData");we("1.2.840.113549.1.7.4","signedAndEnvelopedData");we("1.2.840.113549.1.7.5","digestedData");we("1.2.840.113549.1.7.6","encryptedData");we("1.2.840.113549.1.9.1","emailAddress");we("1.2.840.113549.1.9.2","unstructuredName");we("1.2.840.113549.1.9.3","contentType");we("1.2.840.113549.1.9.4","messageDigest");we("1.2.840.113549.1.9.5","signingTime");we("1.2.840.113549.1.9.6","counterSignature");we("1.2.840.113549.1.9.7","challengePassword");we("1.2.840.113549.1.9.8","unstructuredAddress");we("1.2.840.113549.1.9.14","extensionRequest");we("1.2.840.113549.1.9.20","friendlyName");we("1.2.840.113549.1.9.21","localKeyId");we("1.2.840.113549.1.9.22.1","x509Certificate");we("1.2.840.113549.1.12.10.1.1","keyBag");we("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");we("1.2.840.113549.1.12.10.1.3","certBag");we("1.2.840.113549.1.12.10.1.4","crlBag");we("1.2.840.113549.1.12.10.1.5","secretBag");we("1.2.840.113549.1.12.10.1.6","safeContentsBag");we("1.2.840.113549.1.5.13","pkcs5PBES2");we("1.2.840.113549.1.5.12","pkcs5PBKDF2");we("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");we("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");we("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");we("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");we("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");we("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");we("1.2.840.113549.2.7","hmacWithSHA1");we("1.2.840.113549.2.8","hmacWithSHA224");we("1.2.840.113549.2.9","hmacWithSHA256");we("1.2.840.113549.2.10","hmacWithSHA384");we("1.2.840.113549.2.11","hmacWithSHA512");we("1.2.840.113549.3.7","des-EDE3-CBC");we("2.16.840.1.101.3.4.1.2","aes128-CBC");we("2.16.840.1.101.3.4.1.22","aes192-CBC");we("2.16.840.1.101.3.4.1.42","aes256-CBC");we("2.5.4.3","commonName");we("2.5.4.4","surname");we("2.5.4.5","serialNumber");we("2.5.4.6","countryName");we("2.5.4.7","localityName");we("2.5.4.8","stateOrProvinceName");we("2.5.4.9","streetAddress");we("2.5.4.10","organizationName");we("2.5.4.11","organizationalUnitName");we("2.5.4.12","title");we("2.5.4.13","description");we("2.5.4.15","businessCategory");we("2.5.4.17","postalCode");we("2.5.4.42","givenName");we("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");we("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");we("2.16.840.1.113730.1.1","nsCertType");we("2.16.840.1.113730.1.13","nsComment");qt("2.5.29.1","authorityKeyIdentifier");qt("2.5.29.2","keyAttributes");qt("2.5.29.3","certificatePolicies");qt("2.5.29.4","keyUsageRestriction");qt("2.5.29.5","policyMapping");qt("2.5.29.6","subtreesConstraint");qt("2.5.29.7","subjectAltName");qt("2.5.29.8","issuerAltName");qt("2.5.29.9","subjectDirectoryAttributes");qt("2.5.29.10","basicConstraints");qt("2.5.29.11","nameConstraints");qt("2.5.29.12","policyConstraints");qt("2.5.29.13","basicConstraints");we("2.5.29.14","subjectKeyIdentifier");we("2.5.29.15","keyUsage");qt("2.5.29.16","privateKeyUsagePeriod");we("2.5.29.17","subjectAltName");we("2.5.29.18","issuerAltName");we("2.5.29.19","basicConstraints");qt("2.5.29.20","cRLNumber");qt("2.5.29.21","cRLReason");qt("2.5.29.22","expirationDate");qt("2.5.29.23","instructionCode");qt("2.5.29.24","invalidityDate");qt("2.5.29.25","cRLDistributionPoints");qt("2.5.29.26","issuingDistributionPoint");qt("2.5.29.27","deltaCRLIndicator");qt("2.5.29.28","issuingDistributionPoint");qt("2.5.29.29","certificateIssuer");qt("2.5.29.30","nameConstraints");we("2.5.29.31","cRLDistributionPoints");we("2.5.29.32","certificatePolicies");qt("2.5.29.33","policyMappings");qt("2.5.29.34","policyConstraints");we("2.5.29.35","authorityKeyIdentifier");qt("2.5.29.36","policyConstraints");we("2.5.29.37","extKeyUsage");qt("2.5.29.46","freshestCRL");qt("2.5.29.54","inhibitAnyPolicy");we("1.3.6.1.4.1.11129.2.4.2","timestampList");we("1.3.6.1.5.5.7.1.1","authorityInfoAccess");we("1.3.6.1.5.5.7.3.1","serverAuth");we("1.3.6.1.5.5.7.3.2","clientAuth");we("1.3.6.1.5.5.7.3.3","codeSigning");we("1.3.6.1.5.5.7.3.4","emailProtection");we("1.3.6.1.5.5.7.3.8","timeStamping")});var Ei=ce((LV,wE)=>{var nr=dt();Lt();Za();var ke=wE.exports=nr.asn1=nr.asn1||{};ke.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ke.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ke.create=function(e,t,r,n,i){if(nr.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:e,type:t,constructed:r,composed:r||nr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=ke.copy(l)),l};ke.copy=function(e,t){var r;if(nr.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(ke.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:ke.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};ke.equals=function(e,t,r){if(nr.util.isArray(e)){if(!nr.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!ke.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&ke.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};ke.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function mu(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var VP=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;mu(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};ke.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=nr.util.createBuffer(e));var r=e.length(),n=nd(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function nd(e,t,r,n){var i;mu(e,t,2);var a=e.getByte();t--;var s=a&192,l=a&31;i=e.length();var c=VP(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=e.length(),f.remaining=t,f.requested=c,f}c=t}var d,h,g=(a&32)==32;if(g)if(d=[],c===void 0)for(;;){if(mu(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),d.push(nd(e,t,r+1,n)),t-=i-e.length()}else for(;c>0;)i=e.length(),d.push(nd(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(d===void 0&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&(h=e.bytes(c)),d===void 0&&n.decodeBitStrings&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&c>1){var y=e.read,m=t,_=0;if(l===ke.Type.BITSTRING&&(mu(e,t,1),_=e.getByte(),t--),_===0)try{i=e.length();var w={strict:!0,decodeBitStrings:!0},E=nd(e,t,r+1,w),S=i-e.length();t-=S,l==ke.Type.BITSTRING&&S++;var N=E.tagClass;S===c&&(N===ke.Class.UNIVERSAL||N===ke.Class.CONTEXT_SPECIFIC)&&(d=[E])}catch(D){}d===void 0&&(e.read=y,t=m)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(l===ke.Type.BMPSTRING)for(d="";c>0;c-=2)mu(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2;else d=e.getBytes(c),t-=c}var R=h===void 0?null:{bitStringContents:h};return ke.create(s,l,g,d,R)}ke.toDer=function(e){var t=nr.util.createBuffer(),r=e.tagClass|e.type,n=nr.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=ke.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(ke.toDer(e.value[a]))}else if(e.type===ke.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===ke.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)t.putByte(l.charCodeAt(a))}return t.putBuffer(n),t};ke.oidToDer=function(e){var t=e.split("."),r=nr.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,l=2;l<t.length;++l){n=!0,i=[],a=parseInt(t[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};ke.derToOid=function(e){var t;typeof e=="string"&&(e=nr.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};ke.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),l=0;if(e.length>11){var c=e.charAt(10),f=10;c!=="+"&&c!=="-"&&(l=parseInt(e.substr(10,2),10),f+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,l,0),f&&(c=e.charAt(f),c==="+"||c==="-")){var d=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10),g=d*60+h;g*=6e4,c==="+"?t.setTime(+t-g):t.setTime(+t+g)}return t};ke.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),l=parseInt(e.substr(12,2),10),c=0,f=0,d=!1;e.charAt(e.length-1)==="Z"&&(d=!0);var h=e.length-5,g=e.charAt(h);if(g==="+"||g==="-"){var y=parseInt(e.substr(h+1,2),10),m=parseInt(e.substr(h+4,2),10);f=y*60+m,f*=6e4,g==="+"&&(f*=-1),d=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),d?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,l,c),t.setTime(+t+f)):(t.setFullYear(r,n,i),t.setHours(a,s,l,c)),t};ke.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};ke.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};ke.integerToDer=function(e){var t=nr.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};ke.derToInteger=function(e){typeof e=="string"&&(e=nr.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};ke.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&nr.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=ke.validate(e.value[a],t.value[s],r,n),i?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var l;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var _E=/[^\\u0000-\\u00ff]/;ke.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case ke.Class.UNIVERSAL:n+="Universal:";break;case ke.Class.APPLICATION:n+="Application:";break;case ke.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case ke.Class.PRIVATE:n+="Private:";break}if(e.tagClass===ke.Class.UNIVERSAL)switch(n+=e.type,e.type){case ke.Type.NONE:n+=" (None)";break;case ke.Type.BOOLEAN:n+=" (Boolean)";break;case ke.Type.INTEGER:n+=" (Integer)";break;case ke.Type.BITSTRING:n+=" (Bit string)";break;case ke.Type.OCTETSTRING:n+=" (Octet string)";break;case ke.Type.NULL:n+=" (Null)";break;case ke.Type.OID:n+=" (Object Identifier)";break;case ke.Type.ODESC:n+=" (Object Descriptor)";break;case ke.Type.EXTERNAL:n+=" (External or Instance of)";break;case ke.Type.REAL:n+=" (Real)";break;case ke.Type.ENUMERATED:n+=" (Enumerated)";break;case ke.Type.EMBEDDED:n+=" (Embedded PDV)";break;case ke.Type.UTF8:n+=" (UTF8)";break;case ke.Type.ROID:n+=" (Relative Object Identifier)";break;case ke.Type.SEQUENCE:n+=" (Sequence)";break;case ke.Type.SET:n+=" (Set)";break;case ke.Type.PRINTABLESTRING:n+=" (Printable String)";break;case ke.Type.IA5String:n+=" (IA5String (ASCII))";break;case ke.Type.UTCTIME:n+=" (UTC time)";break;case ke.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case ke.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,l="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,l+=ke.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",e.type===ke.Type.OID){var c=ke.derToOid(e.value);n+=c,nr.pki&&nr.pki.oids&&c in nr.pki.oids&&(n+=" ("+nr.pki.oids[c]+") ")}if(e.type===ke.Type.INTEGER)try{n+=ke.derToInteger(e.value)}catch(d){n+="0x"+nr.util.bytesToHex(e.value)}else if(e.type===ke.Type.BITSTRING){if(e.value.length>1?n+="0x"+nr.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(e.type===ke.Type.OCTETSTRING)_E.test(e.value)||(n+="("+e.value+") "),n+="0x"+nr.util.bytesToHex(e.value);else if(e.type===ke.Type.UTF8)try{n+=nr.util.decodeUtf8(e.value)}catch(d){if(d.message==="URI malformed")n+="0x"+nr.util.bytesToHex(e.value)+" (malformed UTF8)";else throw d}else e.type===ke.Type.PRINTABLESTRING||e.type===ke.Type.IA5String?n+=e.value:_E.test(e.value)?n+="0x"+nr.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Vi=ce((PV,EE)=>{var id=dt();EE.exports=id.md=id.md||{};id.md.algorithms=id.md.algorithms||{}});var Jo=ce((MV,CE)=>{var ma=dt();Vi();Lt();var KP=CE.exports=ma.hmac=ma.hmac||{};KP.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in ma.md.algorithms)t=ma.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=ma.util.createBuffer(s);else if(ma.util.isArray(s)){var l=s;s=ma.util.createBuffer();for(var c=0;c<l.length;++c)s.putByte(l[c])}var f=s.length();f>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=ma.util.createBuffer(),n=ma.util.createBuffer(),f=s.length();for(var c=0;c<f;++c){var l=s.at(c);r.putByte(54^l),n.putByte(92^l)}if(f<t.blockLength)for(var l=t.blockLength-f,c=0;c<l;++c)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var sd=ce((UV,TE)=>{var Ki=dt();Vi();Lt();var bE=TE.exports=Ki.md5=Ki.md5||{};Ki.md.md5=Ki.md.algorithms.md5=bE;bE.create=function(){xE||jP();var e=null,t=Ki.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Ki.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Ki.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),SE(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ki.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(z0.substr(0,n.blockLength-s));for(var l,c=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};SE(d,r,i);var h=Ki.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var z0=null,ad=null,yu=null,Zo=null,xE=!1;function jP(){z0=String.fromCharCode(128),z0+=Ki.util.fillString(String.fromCharCode(0),64),ad=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],yu=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Zo=new Array(64);for(var e=0;e<64;++e)Zo[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);xE=!0}function SE(e,t,r){for(var n,i,a,s,l,c,f,d,h=r.length();h>=64;){for(i=e.h0,a=e.h1,s=e.h2,l=e.h3,d=0;d<16;++d)t[d]=r.getInt32Le(),c=l^a&(s^l),n=i+c+Zo[d]+t[d],f=yu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)c=s^l&(a^s),n=i+c+Zo[d]+t[ad[d]],f=yu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)c=a^s^l,n=i+c+Zo[d]+t[ad[d]],f=yu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)c=s^(a|~l),n=i+c+Zo[d]+t[ad[d]],f=yu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+l|0,h-=64}}});var Os=ce((FV,IE)=>{var od=dt();Lt();var AE=IE.exports=od.pem=od.pem||{};AE.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=ld(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=ld(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=ld(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=ld(e.headers[i]);return e.procType&&(r+=`\r
`),r+=od.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};AE.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:od.util.decode64(a[3])};if(t.push(l),!!a[2]){for(var c=a[2].split(i),f=0;a&&f<c.length;){for(var d=c[f].replace(/\s+$/,""),h=f+1;h<c.length;++h){var g=c[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var y={name:a[1],values:[]},m=a[2].split(","),_=0;_<m.length;++_)y.values.push(HP(m[_]));if(l.procType)if(!l.contentDomain&&y.name==="Content-Domain")l.contentDomain=m[0]||"";else if(!l.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function ld(e){for(var t=e.name+": ",r=[],n=function(c,f){return" "+f},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var l=t[s];l===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+l+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function HP(e){return e.replace(/^\s+/,"")}});var vu=ce((qV,NE)=>{var or=dt();$f();K0();Lt();NE.exports=or.des=or.des||{};or.des.startEncrypting=function(e,t,r,n){var i=ud({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};or.des.createEncryptionCipher=function(e,t){return ud({key:e,output:null,decrypt:!1,mode:t})};or.des.startDecrypting=function(e,t,r,n){var i=ud({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};or.des.createDecryptionCipher=function(e,t){return ud({key:e,output:null,decrypt:!0,mode:t})};or.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return kE(r._keys,n,i,!1)},decrypt:function(n,i){return kE(r._keys,n,i,!0)}}}),r._init=!1};or.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=or.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=e6(t),this._init=!0}};ji("DES-ECB",or.cipher.modes.ecb);ji("DES-CBC",or.cipher.modes.cbc);ji("DES-CFB",or.cipher.modes.cfb);ji("DES-OFB",or.cipher.modes.ofb);ji("DES-CTR",or.cipher.modes.ctr);ji("3DES-ECB",or.cipher.modes.ecb);ji("3DES-CBC",or.cipher.modes.cbc);ji("3DES-CFB",or.cipher.modes.cfb);ji("3DES-OFB",or.cipher.modes.ofb);ji("3DES-CTR",or.cipher.modes.ctr);function ji(e,t){var r=function(){return new or.des.Algorithm(e,t)};or.cipher.registerAlgorithm(e,r)}var YP=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],WP=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],zP=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],QP=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],XP=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],JP=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],ZP=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],$P=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function e6(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=e.length()>8?3:1,w=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,N,R=0;R<_;R++){var D=e.getInt32(),O=e.getInt32();N=(D>>>4^O)&252645135,O^=N,D^=N<<4,N=(O>>>-16^D)&65535,D^=N,O^=N<<-16,N=(D>>>2^O)&858993459,O^=N,D^=N<<2,N=(O>>>-16^D)&65535,D^=N,O^=N<<-16,N=(D>>>1^O)&1431655765,O^=N,D^=N<<1,N=(O>>>8^D)&16711935,D^=N,O^=N<<8,N=(D>>>1^O)&1431655765,O^=N,D^=N<<1,N=D<<8|O>>>20&240,D=O<<24|O<<8&16711680|O>>>8&65280|O>>>24&240,O=N;for(var te=0;te<E.length;++te){E[te]?(D=D<<2|D>>>26,O=O<<2|O>>>26):(D=D<<1|D>>>27,O=O<<1|O>>>27),D&=-15,O&=-15;var V=t[D>>>28]|r[D>>>24&15]|n[D>>>20&15]|i[D>>>16&15]|a[D>>>12&15]|s[D>>>8&15]|l[D>>>4&15],M=c[O>>>28]|f[O>>>24&15]|d[O>>>20&15]|h[O>>>16&15]|g[O>>>12&15]|y[O>>>8&15]|m[O>>>4&15];N=(M>>>16^V)&65535,w[S++]=V^N,w[S++]=M^N<<16}}return w}function kE(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=t[0],c=t[1];s=(l>>>4^c)&252645135,c^=s,l^=s<<4,s=(l>>>16^c)&65535,c^=s,l^=s<<16,s=(c>>>2^l)&858993459,l^=s,c^=s<<2,s=(c>>>8^l)&16711935,l^=s,c^=s<<8,s=(l>>>1^c)&1431655765,c^=s,l^=s<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var y=c^e[g],m=(c>>>4|c<<28)^e[g+1];s=l,l=c,c=s^(WP[y>>>24&63]|QP[y>>>16&63]|JP[y>>>8&63]|$P[y&63]|YP[m>>>24&63]|zP[m>>>16&63]|XP[m>>>8&63]|ZP[m&63])}s=l,l=c,c=s}l=l>>>1|l<<31,c=c>>>1|c<<31,s=(l>>>1^c)&1431655765,c^=s,l^=s<<1,s=(c>>>8^l)&16711935,l^=s,c^=s<<8,s=(c>>>2^l)&858993459,l^=s,c^=s<<2,s=(l>>>16^c)&65535,c^=s,l^=s<<16,s=(l>>>4^c)&252645135,c^=s,l^=s<<4,r[0]=l,r[1]=c}function ud(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=or.cipher.createDecipher(r,e.key):n=or.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof or.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var cd=ce((GV,RE)=>{var fn=dt();Jo();Vi();Lt();var t6=fn.pkcs5=fn.pkcs5||{},ya;fn.util.isNodejs&&!fn.options.usePureJavaScript&&(ya=require("crypto"));RE.exports=fn.pbkdf2=t6.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),fn.util.isNodejs&&!fn.options.usePureJavaScript&&ya.pbkdf2&&(i===null||typeof i!="object")&&(ya.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?ya.pbkdf2Sync.length===4?ya.pbkdf2(e,t,r,n,function(N,R){if(N)return a(N);a(null,R.toString("binary"))}):ya.pbkdf2(e,t,r,n,i,function(N,R){if(N)return a(N);a(null,R.toString("binary"))}):ya.pbkdf2Sync.length===4?ya.pbkdf2Sync(e,t,r,n).toString("binary"):ya.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in fn.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=fn.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var c=Math.ceil(n/s),f=n-(c-1)*s,d=fn.hmac.create();d.start(i,e);var h="",g,y,m;if(!a){for(var _=1;_<=c;++_){d.start(null,null),d.update(t),d.update(fn.util.int32ToBytes(_)),g=m=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(m),y=d.digest().getBytes(),g=fn.util.xorBytes(g,y,s),m=y;h+=_<c?g:g.substr(0,f)}return h}var _=1,w;function E(){if(_>c)return a(null,h);d.start(null,null),d.update(t),d.update(fn.util.int32ToBytes(_)),g=m=d.digest().getBytes(),w=2,S()}function S(){if(w<=r)return d.start(null,null),d.update(m),y=d.digest().getBytes(),g=fn.util.xorBytes(g,y,s),m=y,++w,fn.util.setImmediate(S);h+=_<c?g:g.substr(0,f),++_,E()}E()}});var X0=ce((VV,PE)=>{var Hi=dt();Vi();Lt();var BE=PE.exports=Hi.sha256=Hi.sha256||{};Hi.md.sha256=Hi.md.algorithms.sha256=BE;BE.create=function(){DE||r6();var e=null,t=Hi.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Hi.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Hi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),LE(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Hi.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Q0.substr(0,n.blockLength-s));for(var l,c,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};LE(h,r,i);var g=Hi.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var Q0=null,DE=!1,OE=null;function r6(){Q0=String.fromCharCode(128),Q0+=Hi.util.fillString(String.fromCharCode(0),64),OE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],DE=!0}function LE(e,t,r){for(var n,i,a,s,l,c,f,d,h,g,y,m,_,w,E,S=r.length();S>=64;){for(f=0;f<16;++f)t[f]=r.getInt32();for(;f<64;++f)n=t[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[f]=n+t[f-7]+i+t[f-16]|0;for(d=e.h0,h=e.h1,g=e.h2,y=e.h3,m=e.h4,_=e.h5,w=e.h6,E=e.h7,f=0;f<64;++f)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),l=w^m&(_^w),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&h|g&(d^h),n=E+s+l+OE[f]+t[f],i=a+c,E=w,w=_,_=m,m=y+n>>>0,y=g,g=h,h=d,d=n+i>>>0;e.h0=e.h0+d|0,e.h1=e.h1+h|0,e.h2=e.h2+g|0,e.h3=e.h3+y|0,e.h4=e.h4+m|0,e.h5=e.h5+_|0,e.h6=e.h6+w|0,e.h7=e.h7+E|0,S-=64}}});var J0=ce((KV,ME)=>{var Yi=dt();Lt();var fd=null;Yi.util.isNodejs&&!Yi.options.usePureJavaScript&&!process.versions["node-webkit"]&&(fd=require("crypto"));var n6=ME.exports=Yi.prng=Yi.prng||{};n6.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(f,d){if(!d)return t.generateSync(f);var h=t.plugin.cipher,g=t.plugin.increment,y=t.plugin.formatKey,m=t.plugin.formatSeed,_=Yi.util.createBuffer();t.key=null,w();function w(E){if(E)return d(E);if(_.length()>=f)return d(null,_.getBytes(f));if(t.generated>1048575&&(t.key=null),t.key===null)return Yi.util.nextTick(function(){a(w)});var S=h(t.key,t.seed);t.generated+=S.length,_.putBytes(S),t.key=y(h(t.key,g(t.seed))),t.seed=m(h(t.key,t.seed)),Yi.util.setImmediate(w)}},t.generateSync=function(f){var d=t.plugin.cipher,h=t.plugin.increment,g=t.plugin.formatKey,y=t.plugin.formatSeed;t.key=null;for(var m=Yi.util.createBuffer();m.length()<f;){t.generated>1048575&&(t.key=null),t.key===null&&s();var _=d(t.key,t.seed);t.generated+=_.length,m.putBytes(_),t.key=g(d(t.key,h(t.seed))),t.seed=y(d(t.key,t.seed))}return m.getBytes(f)};function a(f){if(t.pools[0].messageLength>=32)return l(),f();var d=32-t.pools[0].messageLength<<5;t.seedFile(d,function(h,g){if(h)return f(h);t.collect(g),l(),f()})}function s(){if(t.pools[0].messageLength>=32)return l();var f=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(f)),l()}function l(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var f=t.plugin.md.create();f.update(t.keyBytes);for(var d=1,h=0;h<32;++h)t.reseeds%d==0&&(f.update(t.pools[h].digest().getBytes()),t.pools[h].start()),d=d<<1;t.keyBytes=f.digest().getBytes(),f.start(),f.update(t.keyBytes);var g=f.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(g),t.generated=0}function c(f){var d=null,h=Yi.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(D){return g.getRandomValues(D)});var y=Yi.util.createBuffer();if(d)for(;y.length()<f;){var m=Math.max(1,Math.min(f-y.length(),65536)/4),_=new Uint32Array(Math.floor(m));try{d(_);for(var w=0;w<_.length;++w)y.putInt32(_[w])}catch(D){if(!(typeof QuotaExceededError!="undefined"&&D instanceof QuotaExceededError))throw D}}if(y.length()<f)for(var E,S,N,R=Math.floor(Math.random()*65536);y.length()<f;){S=16807*(R&65535),E=16807*(R>>16),S+=(E&32767)<<16,S+=E>>15,S=(S&2147483647)+(S>>31),R=S&4294967295;for(var w=0;w<3;++w)N=R>>>(w<<3),N^=Math.floor(Math.random()*256),y.putByte(N&255)}return y.getBytes(f)}return fd?(t.seedFile=function(f,d){fd.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},t.seedFileSync=function(f){return fd.randomBytes(f).toString()}):(t.seedFile=function(f,d){try{d(null,c(f))}catch(h){d(h)}},t.seedFileSync=c),t.collect=function(f){for(var d=f.length,h=0;h<d;++h)t.pools[t.pool].update(f.substr(h,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);t.collect(h)},t.registerWorker=function(f){if(f===self)t.seedFile=function(h,g){function y(m){var _=m.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",y),g(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&t.seedFile(g.forge.prng.needed,function(y,m){f.postMessage({forge:{prng:{err:y,bytes:m}}})})};f.addEventListener("message",d)}},t}});var Zn=ce((jV,Z0)=>{var Mr=dt();Ja();X0();J0();Lt();(function(){if(Mr.random&&Mr.random.getBytes){Z0.exports=Mr.random;return}(function(e){var t={},r=new Array(4),n=Mr.util.createBuffer();t.formatKey=function(h){var g=Mr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),Mr.aes._expandKey(h,!1)},t.formatSeed=function(h){var g=Mr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},t.cipher=function(h,g){return Mr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(h){return++h[3],h},t.md=Mr.md.sha256;function i(){var h=Mr.prng.create(t);return h.getBytes=function(g,y){return h.generate(g,y)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=Mr.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(s=function(h){return c.getRandomValues(h)}),Mr.options.usePureJavaScript||!Mr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}e&&(e().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),e().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!Mr.random)Mr.random=a;else for(var d in a)Mr.random[d]=a[d];Mr.random.createInstance=i,Z0.exports=Mr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var eg=ce((HV,qE)=>{var xn=dt();Lt();var $0=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],UE=[1,2,3,5],i6=function(e,t){return e<<t&65535|(e&65535)>>16-t},a6=function(e,t){return(e&65535)>>t|e<<16-t&65535};qE.exports=xn.rc2=xn.rc2||{};xn.rc2.expandKey=function(e,t){typeof e=="string"&&(e=xn.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte($0[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,$0[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,$0[r.at(l+1)^r.at(l+a)]);return r};var FE=function(e,t,r){var n=!1,i=null,a=null,s=null,l,c,f,d,h=[];for(e=xn.rc2.expandKey(e,t),f=0;f<64;f++)h.push(e.getInt16Le());r?(l=function(m){for(f=0;f<4;f++)m[f]+=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),m[f]=i6(m[f],UE[f]),d++},c=function(m){for(f=0;f<4;f++)m[f]+=h[m[(f+3)%4]&63]}):(l=function(m){for(f=3;f>=0;f--)m[f]=a6(m[f],UE[f]),m[f]-=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),d--},c=function(m){for(f=3;f>=0;f--)m[f]-=h[m[(f+3)%4]&63]});var g=function(m){var _=[];for(f=0;f<4;f++){var w=i.getInt16Le();s!==null&&(r?w^=s.getInt16Le():s.putInt16Le(w)),_.push(w&65535)}d=r?0:63;for(var E=0;E<m.length;E++)for(var S=0;S<m[E][0];S++)m[E][1](_);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(_[f]):_[f]^=s.getInt16Le()),a.putInt16Le(_[f])},y=null;return y={start:function(m,_){m&&typeof m=="string"&&(m=xn.util.createBuffer(m)),n=!1,i=xn.util.createBuffer(),a=_||new xn.util.createBuffer,s=m,y.output=a},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)g([[5,l],[1,c],[6,l],[1,c],[5,l]])},finish:function(m){var _=!0;if(r)if(m)_=m(8,i,!r);else{var w=i.length()===8?8:8-i.length();i.fillWithByte(w,w)}if(_&&(n=!0,y.update()),!r&&(_=i.length()===0,_))if(m)_=m(8,a,!r);else{var E=a.length(),S=a.at(E-1);S>E?_=!1:a.truncate(S)}return _}},y};xn.rc2.startEncrypting=function(e,t,r){var n=xn.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};xn.rc2.createEncryptionCipher=function(e,t){return FE(e,t,!0)};xn.rc2.startDecrypting=function(e,t,r){var n=xn.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};xn.rc2.createDecryptionCipher=function(e,t){return FE(e,t,!1)}});var wu=ce((YV,zE)=>{var tg=dt();zE.exports=tg.jsbn=tg.jsbn||{};var va,s6=244837814094590,GE=(s6&16777215)==15715070;function ge(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}tg.jsbn.BigInteger=ge;function Pt(){return new ge(null)}function o6(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function l6(e,t,r,n,i,a){for(var s=t&32767,l=t>>15;--a>=0;){var c=this.data[e]&32767,f=this.data[e++]>>15,d=l*c+f*s;c=s*c+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=c&1073741823}return i}function VE(e,t,r,n,i,a){for(var s=t&16383,l=t>>14;--a>=0;){var c=this.data[e]&16383,f=this.data[e++]>>14,d=l*c+f*s;c=s*c+((d&16383)<<14)+r.data[n]+i,i=(c>>28)+(d>>14)+l*f,r.data[n++]=c&268435455}return i}typeof navigator=="undefined"?(ge.prototype.am=VE,va=28):GE&&navigator.appName=="Microsoft Internet Explorer"?(ge.prototype.am=l6,va=30):GE&&navigator.appName!="Netscape"?(ge.prototype.am=o6,va=26):(ge.prototype.am=VE,va=28);ge.prototype.DB=va;ge.prototype.DM=(1<<va)-1;ge.prototype.DV=1<<va;var rg=52;ge.prototype.FV=Math.pow(2,rg);ge.prototype.F1=rg-va;ge.prototype.F2=2*va-rg;var u6="0123456789abcdefghijklmnopqrstuvwxyz",dd=new Array,$o,$n;$o="0".charCodeAt(0);for($n=0;$n<=9;++$n)dd[$o++]=$n;$o="a".charCodeAt(0);for($n=10;$n<36;++$n)dd[$o++]=$n;$o="A".charCodeAt(0);for($n=10;$n<36;++$n)dd[$o++]=$n;function KE(e){return u6.charAt(e)}function jE(e,t){var r=dd[e.charCodeAt(t)];return r==null?-1:r}function c6(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function f6(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function $a(e){var t=Pt();return t.fromInt(e),t}function d6(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:jE(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ge.ZERO.subTo(this,this)}function h6(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function p6(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%t;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=KE(n));s>=0;)l<t?(n=(this.data[s]&(1<<l)-1)<<t-l,n|=this.data[--s]>>(l+=this.DB-t)):(n=this.data[s]>>(l-=t)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=KE(n));return i?a:"0"}function g6(){var e=Pt();return ge.ZERO.subTo(this,e),e}function m6(){return this.s<0?this.negate():this}function y6(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function hd(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function v6(){return this.t<=0?0:this.DB*(this.t-1)+hd(this.data[this.t-1]^this.s&this.DM)}function _6(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function w6(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function E6(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)t.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)t.data[l]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function C6(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function b6(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function x6(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&ge.ZERO.subTo(t,t)}function S6(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function T6(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Pt());var a=Pt(),s=this.s,l=e.s,c=this.DB-hd(n.data[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,y=(1<<this.F1)/h,m=1<<this.F2,_=r.t,w=_-f,E=t==null?Pt():t;for(a.dlShiftTo(w,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),ge.ONE.dlShiftTo(f,E),E.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--w>=0;){var S=r.data[--_]==d?this.DM:Math.floor(r.data[_]*g+(r.data[_-1]+m)*y);if((r.data[_]+=a.am(0,S,r,w,0,f))<S)for(a.dlShiftTo(w,E),r.subTo(E,r);r.data[_]<--S;)r.subTo(E,r)}t!=null&&(r.drShiftTo(f,t),s!=l&&ge.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&ge.ZERO.subTo(r,r)}}}function A6(e){var t=Pt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ge.ZERO)>0&&e.subTo(t,t),t}function Ls(e){this.m=e}function I6(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function k6(e){return e}function N6(e){e.divRemTo(this.m,null,e)}function R6(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function B6(e,t){e.squareTo(t),this.reduce(t)}Ls.prototype.convert=I6;Ls.prototype.revert=k6;Ls.prototype.reduce=N6;Ls.prototype.mulTo=R6;Ls.prototype.sqrTo=B6;function D6(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ps(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function O6(e){var t=Pt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ge.ZERO)>0&&this.m.subTo(t,t),t}function L6(e){var t=Pt();return e.copyTo(t),this.reduce(t),t}function P6(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function M6(e,t){e.squareTo(t),this.reduce(t)}function U6(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ps.prototype.convert=O6;Ps.prototype.revert=L6;Ps.prototype.reduce=P6;Ps.prototype.mulTo=U6;Ps.prototype.sqrTo=M6;function F6(){return(this.t>0?this.data[0]&1:this.s)==0}function q6(e,t){if(e>4294967295||e<1)return ge.ONE;var r=Pt(),n=Pt(),i=t.convert(this),a=hd(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function G6(e,t){var r;return e<256||t.isEven()?r=new Ls(t):r=new Ps(t),this.exp(e,r)}ge.prototype.copyTo=c6;ge.prototype.fromInt=f6;ge.prototype.fromString=d6;ge.prototype.clamp=h6;ge.prototype.dlShiftTo=_6;ge.prototype.drShiftTo=w6;ge.prototype.lShiftTo=E6;ge.prototype.rShiftTo=C6;ge.prototype.subTo=b6;ge.prototype.multiplyTo=x6;ge.prototype.squareTo=S6;ge.prototype.divRemTo=T6;ge.prototype.invDigit=D6;ge.prototype.isEven=F6;ge.prototype.exp=q6;ge.prototype.toString=p6;ge.prototype.negate=g6;ge.prototype.abs=m6;ge.prototype.compareTo=y6;ge.prototype.bitLength=v6;ge.prototype.mod=A6;ge.prototype.modPowInt=G6;ge.ZERO=$a(0);ge.ONE=$a(1);function V6(){var e=Pt();return this.copyTo(e),e}function K6(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function j6(){return this.t==0?this.s:this.data[0]<<24>>24}function H6(){return this.t==0?this.s:this.data[0]<<16>>16}function Y6(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function W6(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function z6(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=$a(r),i=Pt(),a=Pt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function Q6(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,l=0;l<e.length;++l){var c=jE(e,l);if(c<0){e.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+c,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&ge.ZERO.subTo(this,this)}function X6(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(ge.ONE.shiftLeft(e-1),ng,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ge.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function J6(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function Z6(e){return this.compareTo(e)==0}function $6(e){return this.compareTo(e)<0?this:e}function e5(e){return this.compareTo(e)>0?this:e}function t5(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function r5(e,t){return e&t}function n5(e){var t=Pt();return this.bitwiseTo(e,r5,t),t}function ng(e,t){return e|t}function i5(e){var t=Pt();return this.bitwiseTo(e,ng,t),t}function HE(e,t){return e^t}function a5(e){var t=Pt();return this.bitwiseTo(e,HE,t),t}function YE(e,t){return e&~t}function s5(e){var t=Pt();return this.bitwiseTo(e,YE,t),t}function o5(){for(var e=Pt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function l5(e){var t=Pt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function u5(e){var t=Pt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function c5(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function f5(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+c5(this.data[e]);return this.s<0?this.t*this.DB:-1}function d5(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function h5(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=d5(this.data[r]^t);return e}function p5(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function g5(e,t){var r=ge.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function m5(e){return this.changeBit(e,ng)}function y5(e){return this.changeBit(e,YE)}function v5(e){return this.changeBit(e,HE)}function _5(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function w5(e){var t=Pt();return this.addTo(e,t),t}function E5(e){var t=Pt();return this.subTo(e,t),t}function C5(e){var t=Pt();return this.multiplyTo(e,t),t}function b5(e){var t=Pt();return this.divRemTo(e,t,null),t}function x5(e){var t=Pt();return this.divRemTo(e,null,t),t}function S5(e){var t=Pt(),r=Pt();return this.divRemTo(e,t,r),new Array(t,r)}function T5(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function A5(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function _u(){}function WE(e){return e}function I5(e,t,r){e.multiplyTo(t,r)}function k5(e,t){e.squareTo(t)}_u.prototype.convert=WE;_u.prototype.revert=WE;_u.prototype.mulTo=I5;_u.prototype.sqrTo=k5;function N5(e){return this.exp(e,new _u)}function R5(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function B5(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function el(e){this.r2=Pt(),this.q3=Pt(),ge.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function D5(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Pt();return e.copyTo(t),this.reduce(t),t}function O5(e){return e}function L5(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function P5(e,t){e.squareTo(t),this.reduce(t)}function M5(e,t,r){e.multiplyTo(t,r),this.reduce(r)}el.prototype.convert=D5;el.prototype.revert=O5;el.prototype.reduce=L5;el.prototype.mulTo=M5;el.prototype.sqrTo=P5;function U5(e,t){var r=e.bitLength(),n,i=$a(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Ls(t):t.isEven()?a=new el(t):a=new Ps(t);var s=new Array,l=3,c=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=Pt();for(a.sqrTo(s[1],d);l<=f;)s[l]=Pt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=e.t-1,g,y=!0,m=Pt(),_;for(r=hd(e.data[h])-1;h>=0;){for(r>=c?g=e.data[h]>>r-c&f:(g=(e.data[h]&(1<<r+1)-1)<<c-r,h>0&&(g|=e.data[h-1]>>this.DB+r-c)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),y)s[g].copyTo(i),y=!1;else{for(;l>1;)a.sqrTo(i,m),a.sqrTo(m,i),l-=2;l>0?a.sqrTo(i,m):(_=i,i=m,m=_),a.mulTo(m,s[g],i)}for(;h>=0&&(e.data[h]&1<<r)==0;)a.sqrTo(i,m),_=i,i=m,m=_,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function F5(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function q5(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function G5(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ge.ZERO;for(var r=e.clone(),n=this.clone(),i=$a(1),a=$a(0),s=$a(0),l=$a(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(e,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),t&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ge.ONE)!=0)return ge.ZERO;if(l.compareTo(e)>=0)return l.subtract(e);if(l.signum()<0)l.addTo(e,l);else return l;return l.signum()<0?l.add(e):l}var Ci=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],V5=(1<<26)/Ci[Ci.length-1];function K5(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Ci[Ci.length-1]){for(t=0;t<Ci.length;++t)if(r.data[0]==Ci[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Ci.length;){for(var n=Ci[t],i=t+1;i<Ci.length&&n<V5;)n*=Ci[i++];for(n=r.modInt(n);t<i;)if(n%Ci[t++]==0)return!1}return r.millerRabin(e)}function j5(e){var t=this.subtract(ge.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=H5(),a,s=0;s<e;++s){do a=new ge(this.bitLength(),i);while(a.compareTo(ge.ONE)<=0||a.compareTo(t)>=0);var l=a.modPow(n,this);if(l.compareTo(ge.ONE)!=0&&l.compareTo(t)!=0){for(var c=1;c++<r&&l.compareTo(t)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ge.ONE)==0)return!1;if(l.compareTo(t)!=0)return!1}}return!0}function H5(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}ge.prototype.chunkSize=Y6;ge.prototype.toRadix=z6;ge.prototype.fromRadix=Q6;ge.prototype.fromNumber=X6;ge.prototype.bitwiseTo=t5;ge.prototype.changeBit=g5;ge.prototype.addTo=_5;ge.prototype.dMultiply=T5;ge.prototype.dAddOffset=A5;ge.prototype.multiplyLowerTo=R5;ge.prototype.multiplyUpperTo=B5;ge.prototype.modInt=q5;ge.prototype.millerRabin=j5;ge.prototype.clone=V6;ge.prototype.intValue=K6;ge.prototype.byteValue=j6;ge.prototype.shortValue=H6;ge.prototype.signum=W6;ge.prototype.toByteArray=J6;ge.prototype.equals=Z6;ge.prototype.min=$6;ge.prototype.max=e5;ge.prototype.and=n5;ge.prototype.or=i5;ge.prototype.xor=a5;ge.prototype.andNot=s5;ge.prototype.not=o5;ge.prototype.shiftLeft=l5;ge.prototype.shiftRight=u5;ge.prototype.getLowestSetBit=f5;ge.prototype.bitCount=h5;ge.prototype.testBit=p5;ge.prototype.setBit=m5;ge.prototype.clearBit=y5;ge.prototype.flipBit=v5;ge.prototype.add=w5;ge.prototype.subtract=E5;ge.prototype.multiply=C5;ge.prototype.divide=b5;ge.prototype.remainder=x5;ge.prototype.divideAndRemainder=S5;ge.prototype.modPow=U5;ge.prototype.modInverse=G5;ge.prototype.pow=N5;ge.prototype.gcd=F5;ge.prototype.isProbablePrime=K5});var tl=ce((WV,ZE)=>{var Wi=dt();Vi();Lt();var QE=ZE.exports=Wi.sha1=Wi.sha1||{};Wi.md.sha1=Wi.md.algorithms.sha1=QE;QE.create=function(){XE||Y5();var e=null,t=Wi.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Wi.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Wi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),JE(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Wi.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(ig.substr(0,n.blockLength-s));for(var l,c,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};JE(h,r,i);var g=Wi.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var ig=null,XE=!1;function Y5(){ig=String.fromCharCode(128),ig+=Wi.util.fillString(String.fromCharCode(0),64),XE=!0}function JE(e,t,r){for(var n,i,a,s,l,c,f,d,h=r.length();h>=64;){for(i=e.h0,a=e.h1,s=e.h2,l=e.h3,c=e.h4,d=0;d<16;++d)n=r.getInt32(),t[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+c+1518500249+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=t[d-3]^t[d-8]^t[d-14]^t[d-16],n=n<<1|n>>>31,t[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+c+1518500249+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=t[d-3]^t[d-8]^t[d-14]^t[d-16],n=n<<1|n>>>31,t[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+c+1859775393+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+c+1859775393+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+c+2400959708+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=t[d-6]^t[d-16]^t[d-28]^t[d-32],n=n<<2|n>>>30,t[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+c+3395469782+n,c=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+l|0,e.h4=e.h4+c|0,h-=64}}});var ag=ce((zV,eC)=>{var zi=dt();Lt();Zn();tl();var $E=eC.exports=zi.pkcs1=zi.pkcs1||{};$E.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=zi.md.sha1.create(),s||(s=a);var l=Math.ceil(e.n.bitLength()/8),c=l-2*a.digestLength-2;if(t.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=t.length,f.maxLength=c,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=c-t.length,y=0;y<g;y++)h+="\0";var m=d.getBytes()+h+""+t;if(!i)i=zi.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var _=pd(i,l-a.digestLength-1,s),w=zi.util.xorBytes(m,_,m.length),E=pd(w,a.digestLength,s),S=zi.util.xorBytes(i,E,i.length);return"\0"+S+w};$E.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var w=new Error("RSAES-OAEP encoded message length is invalid.");throw w.length=t.length,w.expectedLength=s,w}if(i===void 0?i=zi.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),c=t.charAt(0),f=t.substring(1,i.digestLength+1),d=t.substring(1+i.digestLength),h=pd(d,i.digestLength,a),g=zi.util.xorBytes(f,h,f.length),y=pd(g,s-i.digestLength-1,a),m=zi.util.xorBytes(d,y,d.length),_=m.substring(0,i.digestLength),w=c!=="\0",E=0;E<i.digestLength;++E)w|=l.charAt(E)!==_.charAt(E);for(var S=1,N=i.digestLength,R=i.digestLength;R<m.length;R++){var D=m.charCodeAt(R),O=D&1^1,te=S?65534:0;w|=D&te,S=S&O,N+=S}if(w||m.charCodeAt(N)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(N+1)};function pd(e,t,r){r||(r=zi.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var og=ce((QV,sg)=>{var es=dt();Lt();wu();Zn();(function(){if(es.prime){sg.exports=es.prime;return}var e=sg.exports=es.prime=es.prime||{},t=es.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(h,g){return h|g};e.generateProbablePrime=function(h,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};var m=g.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var _=g.prng||es.random,w={nextBytes:function(E){for(var S=_.getBytesSync(E.length),N=0;N<E.length;++N)E[N]=S.charCodeAt(N)}};if(m.name==="PRIMEINC")return a(h,w,m.options,y);throw new Error("Invalid prime generation algorithm: "+m.name)};function a(h,g,y,m){return"workers"in y?c(h,g,y,m):s(h,g,y,m)}function s(h,g,y,m){var _=f(h,g),w=0,E=d(_.bitLength());"millerRabinTests"in y&&(E=y.millerRabinTests);var S=10;"maxBlockTime"in y&&(S=y.maxBlockTime),l(_,h,g,w,E,S,m)}function l(h,g,y,m,_,w,E){var S=+new Date;do{if(h.bitLength()>g&&(h=f(g,y)),h.isProbablePrime(_))return E(null,h);h.dAddOffset(r[m++%8],0)}while(w<0||+new Date-S<w);es.util.setImmediate(function(){l(h,g,y,m,_,w,E)})}function c(h,g,y,m){if(typeof Worker=="undefined")return s(h,g,y,m);var _=f(h,g),w=y.workers,E=y.workLoad||100,S=E*30/8,N=y.workerScript||"forge/prime.worker.js";if(w===-1)return es.util.estimateCores(function(D,O){D&&(O=2),w=O-1,R()});R();function R(){w=Math.max(1,w);for(var D=[],O=0;O<w;++O)D[O]=new Worker(N);for(var te=w,O=0;O<w;++O)D[O].addEventListener("message",M);var V=!1;function M(le){if(!V){--te;var se=le.data;if(se.found){for(var _e=0;_e<D.length;++_e)D[_e].terminate();return V=!0,m(null,new t(se.prime,16))}_.bitLength()>h&&(_=f(h,g));var Oe=_.toString(16);le.target.postMessage({hex:Oe,workLoad:E}),_.dAddOffset(S,0)}}}}function f(h,g){var y=new t(h,g),m=h-1;return y.testBit(m)||y.bitwiseTo(t.ONE.shiftLeft(m),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Eu=ce((XV,oC)=>{var qe=dt();Ei();wu();Za();ag();og();Zn();Lt();typeof Bt=="undefined"&&(Bt=qe.jsbn.BigInteger);var Bt,lg=qe.util.isNodejs?require("crypto"):null,$=qe.asn1,ei=qe.util;qe.pki=qe.pki||{};oC.exports=qe.pki.rsa=qe.rsa=qe.rsa||{};var it=qe.pki,W5=[6,4,2,4,2,4,6,2],z5={name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Q5={name:"RSAPrivateKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},X5={name:"RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},J5=qe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Z5={name:"DigestInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,type:$.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},$5=function(e){var t;if(e.algorithm in it.oids)t=it.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=$.oidToDer(t).getBytes(),i=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]),a=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]);a.value.push($.create($.Class.UNIVERSAL,$.Type.OID,!1,n)),a.value.push($.create($.Class.UNIVERSAL,$.Type.NULL,!1,""));var s=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),$.toDer(i).getBytes()},tC=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Bt.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Bt.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Bt(qe.util.bytesToHex(qe.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Bt.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};it.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=rC(e,t,r)):(i=qe.util.createBuffer(),i.putBytes(e));for(var s=new Bt(i.toHex(),16),l=tC(s,t,n),c=l.toString(16),f=qe.util.createBuffer(),d=a-Math.ceil(c.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(c)),f.getBytes()};it.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new Bt(qe.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=tC(s,t,r),c=l.toString(16),f=qe.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(c)),n!==!1?gd(f.getBytes(),t,r):f.getBytes()};it.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||qe.random,i={nextBytes:function(l){for(var c=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=c.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new Bt(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};it.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Bt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;e.keys===null&&(t<=0||l<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,f=c-1;e.pqState===0?(e.num=new Bt(c,e.rng),e.num.testBit(f)||e.num.bitwiseTo(Bt.ONE.shiftLeft(f),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(tM(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(W5[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Bt.ONE).gcd(e.e).compareTo(Bt.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Bt.ONE),e.q1=e.q.subtract(Bt.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Bt.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var d=e.e.modInverse(e.phi);e.keys={privateKey:it.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:it.rsa.setPublicKey(e.n,e.e)}}s=+new Date,l+=s-a,a=s}return e.keys!==null};it.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!qe.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(nC("generateKeyPair"))return lg.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,f){if(l)return n(l);n(null,{privateKey:it.privateKeyFromPem(f),publicKey:it.publicKeyFromPem(c)})});if(iC("generateKey")&&iC("exportKey"))return ei.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:sC(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return ei.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var c=it.privateKeyFromAsn1($.fromDer(qe.util.createBuffer(l)));n(null,{privateKey:c,publicKey:it.setRsaPublicKey(c.n,c.e)})}});if(aC("generateKey")&&aC("exportKey")){var i=ei.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:sC(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,f=ei.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);f.oncomplete=function(d){var h=d.target.result,g=it.privateKeyFromAsn1($.fromDer(qe.util.createBuffer(h)));n(null,{privateKey:g,publicKey:it.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(nC("generateKeyPairSync")){var a=lg.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:it.privateKeyFromPem(a.privateKey),publicKey:it.publicKeyFromPem(a.publicKey)}}}var s=it.rsa.createKeyPairGenerationState(e,t,r);if(!n)return it.rsa.stepKeyPairGenerationState(s,0),s.keys;eM(s,r,n)};it.setRsaPublicKey=it.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,c,f){return rC(l,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,c){return qe.pkcs1.encode_rsa_oaep(c,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return it.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(c,f){f=gd(f,r,!0);var d=$.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!$.validate(d,Z5,h,g)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=g,y}var m=$.derToOid(h.algorithmIdentifier);if(!(m===qe.oids.md2||m===qe.oids.md5||m===qe.oids.sha1||m===qe.oids.sha224||m===qe.oids.sha256||m===qe.oids.sha384||m===qe.oids.sha512||m===qe.oids["sha512-224"]||m===qe.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=m,y}if((m===qe.oids.md2||m===qe.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(c,f){return f=gd(f,r,!0),c===f}});var l=it.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};it.setRsaPrivateKey=it.rsa.setPrivateKey=function(e,t,r,n,i,a,s,l){var c={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return c.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=it.rsa.decrypt(f,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:gd};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(y,m){return qe.pkcs1.decode_rsa_oaep(m,y,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,c,!1)},c.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:$5},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,c.n.bitLength());return it.rsa.encrypt(g,c,h)},c};it.wrapRsaPrivateKey=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(it.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(e).getBytes())])};it.privateKeyFromAsn1=function(e){var t={},r=[];if($.validate(e,z5,t,r)&&(e=$.fromDer(qe.util.createBuffer(t.privateKey))),t={},r=[],!$.validate(e,Q5,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,c,f,d,h;return i=qe.util.createBuffer(t.privateKeyModulus).toHex(),a=qe.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=qe.util.createBuffer(t.privateKeyPrivateExponent).toHex(),l=qe.util.createBuffer(t.privateKeyPrime1).toHex(),c=qe.util.createBuffer(t.privateKeyPrime2).toHex(),f=qe.util.createBuffer(t.privateKeyExponent1).toHex(),d=qe.util.createBuffer(t.privateKeyExponent2).toHex(),h=qe.util.createBuffer(t.privateKeyCoefficient).toHex(),it.setRsaPrivateKey(new Bt(i,16),new Bt(a,16),new Bt(s,16),new Bt(l,16),new Bt(c,16),new Bt(f,16),new Bt(d,16),new Bt(h,16))};it.privateKeyToAsn1=it.privateKeyToRSAPrivateKey=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.e)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.d)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.p)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.q)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.dP)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.dQ)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.qInv))])};it.publicKeyFromAsn1=function(e){var t={},r=[];if($.validate(e,J5,t,r)){var n=$.derToOid(t.publicKeyOid);if(n!==it.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!$.validate(e,X5,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=qe.util.createBuffer(t.publicKeyModulus).toHex(),s=qe.util.createBuffer(t.publicKeyExponent).toHex();return it.setRsaPublicKey(new Bt(a,16),new Bt(s,16))};it.publicKeyToAsn1=it.publicKeyToSubjectPublicKeyInfo=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(it.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.BITSTRING,!1,[it.publicKeyToRSAPublicKey(e)])])};it.publicKeyToRSAPublicKey=function(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Qi(e.e))])};function rC(e,t,r){var n=qe.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,l;if(r===0||r===1){l=r===0?0:255;for(var c=0;c<s;++c)n.putByte(l)}else for(;s>0;){for(var f=0,d=qe.random.getBytes(s),c=0;c<s;++c)l=d.charCodeAt(c),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(e),n}function gd(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=qe.util.createBuffer(e),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-n;for(var f=0;f<c;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++c}else if(l===2)for(c=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++c}var d=a.getByte();if(d!==0||c!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function eM(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(l,c){if(l)return r(l);if(e.p=c,e.q!==null)return s(l,e.q);a(e.qBits,s)})}function a(l,c){qe.prime.generateProbablePrime(l,n,c)}function s(l,c){if(l)return r(l);if(e.q=c,e.p.compareTo(e.q)<0){var f=e.p;e.p=e.q,e.q=f}if(e.p.subtract(Bt.ONE).gcd(e.e).compareTo(Bt.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Bt.ONE).gcd(e.e).compareTo(Bt.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(Bt.ONE),e.q1=e.q.subtract(Bt.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Bt.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var d=e.e.modInverse(e.phi);e.keys={privateKey:it.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:it.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Qi(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=qe.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function tM(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function nC(e){return qe.util.isNodejs&&typeof lg[e]=="function"}function iC(e){return typeof ei.globalScope!="undefined"&&typeof ei.globalScope.crypto=="object"&&typeof ei.globalScope.crypto.subtle=="object"&&typeof ei.globalScope.crypto.subtle[e]=="function"}function aC(e){return typeof ei.globalScope!="undefined"&&typeof ei.globalScope.msCrypto=="object"&&typeof ei.globalScope.msCrypto.subtle=="object"&&typeof ei.globalScope.msCrypto.subtle[e]=="function"}function sC(e){for(var t=qe.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var ug=ce((JV,dC)=>{var Be=dt();Ja();Ei();vu();Vi();Za();cd();Os();Zn();eg();Eu();Lt();typeof lC=="undefined"&&(lC=Be.jsbn.BigInteger);var lC,oe=Be.asn1,ct=Be.pki=Be.pki||{};dC.exports=ct.pbe=Be.pbe=Be.pbe||{};var Ms=ct.oids,rM={name:"EncryptedPrivateKeyInfo",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},nM={name:"PBES2Algorithms",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},iM={name:"pkcs-12PbeParams",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"iterations"}]};ct.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Be.random.getBytesSync(r.saltSize),i=r.count,a=oe.integerToDer(i),s,l,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=Ms["aes128-CBC"],h=Be.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=Ms["aes192-CBC"],h=Be.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=Ms["aes256-CBC"],h=Be.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=Ms.desCBC,h=Be.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),m=fC(y),_=Be.pkcs5.pbkdf2(t,n,i,s,m),w=Be.random.getBytesSync(f),E=h(_);E.start(w),E.update(oe.toDer(e)),E.finish(),c=E.output.getBytes();var S=aM(n,a,s,y);l=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Ms.pkcs5PBES2).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Ms.pkcs5PBKDF2).getBytes()),S]),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(d).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,w)])])])}else if(r.algorithm==="3des"){s=24;var N=new Be.util.ByteBuffer(n),_=ct.pbe.generatePkcs12Key(t,N,1,i,s),w=ct.pbe.generatePkcs12Key(t,N,2,i,s),E=Be.des.createEncryptionCipher(_);E.start(w),E.update(oe.toDer(e)),E.finish(),c=E.output.getBytes(),l=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(Ms["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,n),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var R=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[l,oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,c)]);return R};ct.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!oe.validate(e,rM,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=oe.derToOid(n.encryptionOid),l=ct.pbe.getCipher(s,n.encryptionParams,t),c=Be.util.createBuffer(n.encryptedData);return l.update(c),l.finish()&&(r=oe.fromDer(l.output)),r};ct.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:oe.toDer(e).getBytes()};return Be.pem.encode(r,{maxline:t})};ct.encryptedPrivateKeyFromPem=function(e){var t=Be.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return oe.fromDer(t.body)};ct.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=ct.wrapRsaPrivateKey(ct.privateKeyToAsn1(e));return n=ct.encryptPrivateKeyInfo(n,t,r),ct.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Be.random.getBytesSync(16),l=Be.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Be.random.getBytesSync(16),l=Be.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Be.random.getBytesSync(16),l=Be.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Be.random.getBytesSync(8),l=Be.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Be.random.getBytesSync(8),l=Be.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var f=Be.pbe.opensslDeriveBytes(t,a.substr(0,8),s),d=l(f);d.start(a),d.update(oe.toDer(ct.privateKeyToAsn1(e))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Be.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return Be.pem.encode(h)};ct.decryptRsaPrivateKey=function(e,t){var r=null,n=Be.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=Be.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Be.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Be.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Be.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Be.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return Be.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return Be.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return Be.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=Be.util.hexToBytes(n.dekInfo.parameters),c=Be.pbe.opensslDeriveBytes(t,l.substr(0,8),a),f=s(c);if(f.start(l),f.update(Be.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=ct.decryptPrivateKeyInfo(oe.fromDer(r),t):r=oe.fromDer(r),r!==null&&(r=ct.privateKeyFromAsn1(r)),r};ct.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in Be.md))throw new Error('"sha1" hash algorithm unavailable.');a=Be.md.sha1.create()}var c=a.digestLength,f=a.blockLength,d=new Be.util.ByteBuffer,h=new Be.util.ByteBuffer;if(e!=null){for(l=0;l<e.length;l++)h.putInt16(e.charCodeAt(l));h.putInt16(0)}var g=h.length(),y=t.length(),m=new Be.util.ByteBuffer;m.fillWithByte(r,f);var _=f*Math.ceil(y/f),w=new Be.util.ByteBuffer;for(l=0;l<_;l++)w.putByte(t.at(l%y));var E=f*Math.ceil(g/f),S=new Be.util.ByteBuffer;for(l=0;l<E;l++)S.putByte(h.at(l%g));var N=w;N.putBuffer(S);for(var R=Math.ceil(i/c),D=1;D<=R;D++){var O=new Be.util.ByteBuffer;O.putBytes(m.bytes()),O.putBytes(N.bytes());for(var te=0;te<n;te++)a.start(),a.update(O.getBytes()),O=a.digest();var V=new Be.util.ByteBuffer;for(l=0;l<f;l++)V.putByte(O.at(l%c));var M=Math.ceil(y/f)+Math.ceil(g/f),le=new Be.util.ByteBuffer;for(s=0;s<M;s++){var se=new Be.util.ByteBuffer(N.getBytes(f)),_e=511;for(l=V.length()-1;l>=0;l--)_e=_e>>8,_e+=V.at(l)+se.at(l),se.setAt(l,_e&255);le.putBuffer(se)}N=le,d.putBuffer(O)}return d.truncate(d.length()-i),d};ct.pbe.getCipher=function(e,t,r){switch(e){case ct.oids.pkcs5PBES2:return ct.pbe.getCipherForPBES2(e,t,r);case ct.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ct.oids["pbewithSHAAnd40BitRC2-CBC"]:return ct.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};ct.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!oe.validate(t,nM,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=oe.derToOid(n.kdfOid),e!==ct.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=oe.derToOid(n.encOid),e!==ct.oids["aes128-CBC"]&&e!==ct.oids["aes192-CBC"]&&e!==ct.oids["aes256-CBC"]&&e!==ct.oids["des-EDE3-CBC"]&&e!==ct.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=Be.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var c,f;switch(ct.oids[e]){case"aes128-CBC":c=16,f=Be.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=Be.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=Be.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=Be.des.createDecryptionCipher;break;case"desCBC":c=8,f=Be.des.createDecryptionCipher;break}var d=cC(n.prfOid),h=Be.pkcs5.pbkdf2(r,s,l,c,d),g=n.encIv,y=f(h);return y.start(g),y};ct.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!oe.validate(t,iM,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Be.util.createBuffer(n.salt),l=Be.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var c,f,d;switch(e){case ct.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,f=8,d=Be.des.startDecrypting;break;case ct.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,f=8,d=function(_,w){var E=Be.rc2.createDecryptionCipher(_,40);return E.start(w,null),E};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var h=cC(n.prfOid),g=ct.pbe.generatePkcs12Key(r,s,1,l,c,h);h.start();var y=ct.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,y)};ct.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Be.md))throw new Error('"md5" hash algorithm unavailable.');n=Be.md.md5.create()}t===null&&(t="");for(var i=[uC(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(uC(n,i[s-1]+e+t));return i.join("").substr(0,r)};function uC(e,t){return e.start().update(t).digest().getBytes()}function cC(e){var t;if(!e)t="hmacWithSHA1";else if(t=ct.oids[oe.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return fC(t)}function fC(e){var t=Be.md;switch(e){case"hmacWithSHA224":t=Be.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function aM(e,t,r,n){var i=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,e),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,Be.util.hexToBytes(r.toString(16))),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(ct.oids[n]).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])),i}});var cg=ce((ZV,gC)=>{var rl=dt();Ei();Lt();var Re=rl.asn1,nl=gC.exports=rl.pkcs7asn1=rl.pkcs7asn1||{};rl.pkcs7=rl.pkcs7||{};rl.pkcs7.asn1=nl;var hC={name:"ContentInfo",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};nl.contentInfoValidator=hC;var pC={name:"EncryptedContentInfo",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Re.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Re.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};nl.envelopedDataValidator={name:"EnvelopedData",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(pC)};nl.encryptedDataValidator={name:"EncryptedData",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1,capture:"version"}].concat(pC)};var sM={name:"SignerInfo",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Re.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};nl.signedDataValidator={name:"SignedData",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},hC,{name:"SignedData.Certificates",tagClass:Re.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Re.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SET,capture:"signerInfos",optional:!0,value:[sM]}]};nl.recipientInfoValidator={name:"RecipientInfo",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Re.Class.UNIVERSAL,type:Re.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Re.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Re.Class.UNIVERSAL,type:Re.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var fg=ce(($V,mC)=>{var Us=dt();Lt();Us.mgf=Us.mgf||{};var oM=mC.exports=Us.mgf.mgf1=Us.mgf1=Us.mgf1||{};oM.create=function(e){var t={generate:function(r,n){for(var i=new Us.util.ByteBuffer,a=Math.ceil(n/e.digestLength),s=0;s<a;s++){var l=new Us.util.ByteBuffer;l.putInt32(s),e.start(),e.update(r+l.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}});var vC=ce((e7,yC)=>{var md=dt();fg();yC.exports=md.mgf=md.mgf||{};md.mgf.mgf1=md.mgf1});var yd=ce((t7,_C)=>{var Fs=dt();Zn();Lt();var lM=_C.exports=Fs.pss=Fs.pss||{};lM.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=Fs.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||Fs.random,l={};return l.encode=function(c,f){var d,h=f-1,g=Math.ceil(h/8),y=c.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(a):m=i.bytes();var _=new Fs.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(y),_.putBytes(m),t.start(),t.update(_.getBytes());var w=t.digest().getBytes(),E=new Fs.util.ByteBuffer;E.fillWithByte(0,g-a-n-2),E.putByte(1),E.putBytes(m);var S=E.getBytes(),N=g-n-1,R=r.generate(w,N),D="";for(d=0;d<N;d++)D+=String.fromCharCode(S.charCodeAt(d)^R.charCodeAt(d));var O=65280>>8*g-h&255;return D=String.fromCharCode(D.charCodeAt(0)&~O)+D.substr(1),D+w+String.fromCharCode(188)},l.verify=function(c,f,d){var h,g=d-1,y=Math.ceil(g/8);if(f=f.substr(-y),y<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(y-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=y-n-1,_=f.substr(0,m),w=f.substr(m,n),E=65280>>8*y-g&255;if((_.charCodeAt(0)&E)!=0)throw new Error("Bits beyond keysize not zero as expected.");var S=r.generate(w,m),N="";for(h=0;h<m;h++)N+=String.fromCharCode(_.charCodeAt(h)^S.charCodeAt(h));N=String.fromCharCode(N.charCodeAt(0)&~E)+N.substr(1);var R=y-n-a-2;for(h=0;h<R;h++)if(N.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(N.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var D=N.substr(-a),O=new Fs.util.ByteBuffer;O.fillWithByte(0,8),O.putBytes(c),O.putBytes(D),t.start(),t.update(O.getBytes());var te=t.digest().getBytes();return w===te},l}});var wd=ce((r7,xC)=>{var Ge=dt();Ja();Ei();vu();Vi();vC();Za();Os();yd();Eu();Lt();var b=Ge.asn1,Te=xC.exports=Ge.pki=Ge.pki||{},Dt=Te.oids,mr={};mr.CN=Dt.commonName;mr.commonName="CN";mr.C=Dt.countryName;mr.countryName="C";mr.L=Dt.localityName;mr.localityName="L";mr.ST=Dt.stateOrProvinceName;mr.stateOrProvinceName="ST";mr.O=Dt.organizationName;mr.organizationName="O";mr.OU=Dt.organizationalUnitName;mr.organizationalUnitName="OU";mr.E=Dt.emailAddress;mr.emailAddress="E";var wC=Ge.pki.rsa.publicKeyValidator,uM={name:"Certificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},wC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},cM={name:"rsapss",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},fM={name:"CertificationRequestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},wC,{name:"CertificationRequestInfo.attributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0}]}]}]},dM={name:"CertificationRequest",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[fM,{name:"CertificationRequest.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Te.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,a,s=0;s<e.value.length;++s){n=e.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=b.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Dt&&(a.name=Dt[a.type],a.name in mr&&(a.shortName=mr[a.name])),t&&(t.update(a.type),t.update(a.value)),r.push(a)}return r};Te.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=b.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Dt&&(l.name=Dt[l.type],l.name in mr&&(l.shortName=mr[l.name])),l.type===Dt.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Te.certificateExtensionFromAsn1(l.value[c]))}t.push(l)}return t};function ts(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var vd=function(e,t,r){var n={};if(e!==Dt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Dt.sha1},mgf:{algorithmOid:Dt.mgf1,hash:{algorithmOid:Dt.sha1}},saltLength:20});var i={},a=[];if(!b.validate(t,cM,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=b.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=b.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=b.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},_d=function(e){switch(Dt[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ge.md.sha1.create();case"md5WithRSAEncryption":return Ge.md.md5.create();case"sha256WithRSAEncryption":return Ge.md.sha256.create();case"sha384WithRSAEncryption":return Ge.md.sha384.create();case"sha512WithRSAEncryption":return Ge.md.sha512.create();case"RSASSA-PSS":return Ge.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},EC=function(e){var t=e.certificate,r;switch(t.signatureOid){case Dt.sha1WithRSAEncryption:case Dt.sha1WithRSASignature:break;case Dt["RSASSA-PSS"]:var n,i;if(n=Dt[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Dt[t.signatureParameters.mgf.algorithmOid],i===void 0||Ge.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Ge.mgf[i].create(Ge.md[n].create()),n=Dt[t.signatureParameters.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=n,a}r=Ge.pss.create(Ge.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};Te.certificateFromPem=function(e,t,r){var n=Ge.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return Te.certificateFromAsn1(a,t)};Te.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:b.toDer(Te.certificateToAsn1(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};Te.publicKeyFromPem=function(e){var t=Ge.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=b.fromDer(t.body);return Te.publicKeyFromAsn1(n)};Te.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:b.toDer(Te.publicKeyToAsn1(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};Te.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:b.toDer(Te.publicKeyToRSAPublicKey(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};Te.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||Ge.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=b.toDer(Te.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=b.toDer(Te.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};Te.certificationRequestFromPem=function(e,t,r){var n=Ge.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return Te.certificationRequestFromAsn1(a,t)};Te.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:b.toDer(Te.certificationRequestToAsn1(e)).getBytes()};return Ge.pem.encode(r,{maxline:t})};Te.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return ts(e.issuer,t)},e.issuer.addField=function(t){ti([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return ts(e.subject,t)},e.subject.addField=function(t){ti([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){ti(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){ti(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)CC(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||Ge.md.sha1.create();var n=Dt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=Te.getTBSCertificate(e);var a=b.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=t.md;if(s===null){s=_d({signatureOid:t.signatureOid,type:"certificate"});var l=t.tbsCertificate||Te.getTBSCertificate(t),c=b.toDer(l);s.update(c.getBytes())}return s!==null&&(r=EC({certificate:e,md:s,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return Te.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Dt.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return Ge.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};Te.certificateFromAsn1=function(e,t){var r={},n=[];if(!b.validate(e,uM,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==Te.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Te.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Ge.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=Ge.asn1.derToOid(r.certSignatureOid),s.signatureParameters=vd(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=vd(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(b.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(b.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(b.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(b.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=r.tbsCertificate,t){s.md=_d({signatureOid:s.signatureOid,type:"certificate"});var f=b.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=Ge.md.sha1.create(),h=b.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(m){return ts(s.issuer,m)},s.issuer.addField=function(m){ti([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Te.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=Ge.md.sha1.create(),y=b.toDer(r.certSubject);return g.update(y.getBytes()),s.subject.getField=function(m){return ts(s.subject,m)},s.subject.addField=function(m){ti([m]),s.subject.attributes.push(m)},s.subject.attributes=Te.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=Te.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Te.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Te.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(Te.certificateExtensionFromAsn1(n.value[i]));return t};Te.certificateExtensionFromAsn1=function(e){var t={};if(t.id=b.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===b.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Dt){if(t.name=Dt[t.id],t.name==="keyUsage"){var r=b.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)==128,t.nonRepudiation=(n&64)==64,t.keyEncipherment=(n&32)==32,t.dataEncipherment=(n&16)==16,t.keyAgreement=(n&8)==8,t.keyCertSign=(n&4)==4,t.cRLSign=(n&2)==2,t.encipherOnly=(n&1)==1,t.decipherOnly=(i&128)==128}else if(t.name==="basicConstraints"){var r=b.fromDer(t.value);r.value.length>0&&r.value[0].type===b.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;r.value.length>0&&r.value[0].type===b.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(t.pathLenConstraint=b.derToInteger(a))}else if(t.name==="extKeyUsage")for(var r=b.fromDer(t.value),s=0;s<r.value.length;++s){var l=b.derToOid(r.value[s].value);l in Dt?t[Dt[l]]=!0:t[l]=!0}else if(t.name==="nsCertType"){var r=b.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)==128,t.server=(n&64)==64,t.email=(n&32)==32,t.objsign=(n&16)==16,t.reserved=(n&8)==8,t.sslCA=(n&4)==4,t.emailCA=(n&2)==2,t.objCA=(n&1)==1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,r=b.fromDer(t.value),f=0;f<r.value.length;++f){c=r.value[f];var d={type:c.type,value:c.value};switch(t.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=Ge.util.bytesToIP(c.value);break;case 8:d.oid=b.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=b.fromDer(t.value);t.subjectKeyIdentifier=Ge.util.bytesToHex(r.value)}}return t};Te.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!b.validate(e,dM,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==Te.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Te.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ge.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=vd(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=vd(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=_d({signatureOid:s.signatureOid,type:"certification request"});var l=b.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var c=Ge.md.sha1.create();return s.subject.getField=function(f){return ts(s.subject,f)},s.subject.addField=function(f){ti([f]),s.subject.attributes.push(f)},s.subject.attributes=Te.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=Te.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return ts(s,f)},s.addAttribute=function(f){ti([f]),s.attributes.push(f)},s.attributes=Te.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Te.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return ts(e.subject,t)},e.subject.addField=function(t){ti([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return ts(e,t)},e.addAttribute=function(t){ti([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){ti(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){ti(t),e.attributes=t},e.sign=function(t,r){e.md=r||Ge.md.sha1.create();var n=Dt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=Te.getCertificationRequestInfo(e);var a=b.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=_d({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||Te.getCertificationRequestInfo(e),i=b.toDer(n);r.update(i.getBytes())}return r!==null&&(t=EC({certificate:e,md:r,signature:e.signature})),t},e};function il(e){for(var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=b.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===b.Type.UTF8&&(s=Ge.util.encodeUtf8(s))),n=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(r.type).getBytes()),b.create(b.Class.UNIVERSAL,l,!1,s)])]),t.value.push(n)}return t}function ti(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name=="undefined"&&(t.type&&t.type in Te.oids?t.name=Te.oids[t.type]:t.shortName&&t.shortName in mr&&(t.name=Te.oids[mr[t.shortName]])),typeof t.type=="undefined")if(t.name&&t.name in Te.oids)t.type=Te.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName=="undefined"&&t.name&&t.name in mr&&(t.shortName=mr[t.name]),t.type===Dt.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=b.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(Te.certificateExtensionToAsn1(CC(t.extensions[i])))}if(typeof t.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function CC(e,t){if(t=t||{},typeof e.name=="undefined"&&e.id&&e.id in Te.oids&&(e.name=Te.oids[e.id]),typeof e.id=="undefined")if(e.name&&e.name in Te.oids)e.id=Te.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var n=0,i=0,a=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var c in e)e[c]===!0&&(c in Dt?l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Dt[c]).getBytes())):c.indexOf(".")!==-1&&l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),e.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var f,d=0;d<e.altNames.length;++d){f=e.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));e.value.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=b.create(b.Class.UNIVERSAL,b.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var h=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,h.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=e.value.value;if(e.keyIdentifier){var g=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var y=[b.create(b.Class.CONTEXT_SPECIFIC,4,!0,[il(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];l.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,y))}if(e.serialNumber){var m=Ge.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);l.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(e.name==="cRLDistributionPoints"){e.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var l=e.value.value,_=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),w=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<e.altNames.length;++d){f=e.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));w.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}_.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(_)}if(typeof e.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function dg(e,t){switch(e){case Dt["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.mgf.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.mgf.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.saltLength).getBytes())])),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,r);default:return b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")}}function hM(e){var t=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=b.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===b.Type.UTF8&&(a=Ge.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(i.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,s,l,a)])]);t.value.push(c)}return t}var pM=new Date("1950-01-01T00:00:00Z"),gM=new Date("2050-01-01T00:00:00Z");function bC(e){return e>=pM&&e<gM?b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(e)):b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(e))}Te.getTBSCertificate=function(e){var t=bC(e.validity.notBefore),r=bC(e.validity.notAfter),n=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,Ge.util.hexToBytes(e.serialNumber)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.siginfo.algorithmOid).getBytes()),dg(e.siginfo.algorithmOid,e.siginfo.parameters)]),il(e.issuer),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[t,r]),il(e.subject),Te.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(Te.certificateExtensionsToAsn1(e.extensions)),n};Te.getCertificationRequestInfo=function(e){var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),il(e.subject),Te.publicKeyToAsn1(e.publicKey),hM(e)]);return t};Te.distinguishedNameToAsn1=function(e){return il(e)};Te.certificateToAsn1=function(e){var t=e.tbsCertificate||Te.getTBSCertificate(e);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[t,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.signatureOid).getBytes()),dg(e.signatureOid,e.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};Te.certificateExtensionsToAsn1=function(e){var t=b.create(b.Class.CONTEXT_SPECIFIC,3,!0,[]),r=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(Te.certificateExtensionToAsn1(e[n]));return t};Te.certificateExtensionToAsn1=function(e){var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);t.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.id).getBytes())),e.critical&&t.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return typeof e.value!="string"&&(r=b.toDer(r).getBytes()),t.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,r)),t};Te.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||Te.getCertificationRequestInfo(e);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[t,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.signatureOid).getBytes()),dg(e.signatureOid,e.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};Te.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var l=r(s.issuer);return l},t.addCertificate=function(s){if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var l=t.certs[s.subject.hash];Ge.util.isArray(l)||(l=[l]),l.push(s),t.certs[s.subject.hash]=l}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=Ge.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;Ge.util.isArray(l)||(l=[l]);for(var c=b.toDer(Te.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=b.toDer(Te.certificateToAsn1(l[f])).getBytes();if(c===d)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var l in t.certs)if(t.certs.hasOwnProperty(l)){var c=t.certs[l];if(!Ge.util.isArray(c))s.push(c);else for(var f=0;f<c.length;++f)s.push(c[f])}return s},t.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))return null;var c=r(s.subject);if(!Ge.util.isArray(c))return l=t.certs[s.subject.hash],delete t.certs[s.subject.hash],l;for(var f=b.toDer(Te.certificateToAsn1(s)).getBytes(),d=0;d<c.length;++d){var h=b.toDer(Te.certificateToAsn1(c[d])).getBytes();f===h&&(l=c[d],c.splice(d,1))}return c.length===0&&delete t.certs[s.subject.hash],l};function r(s){return n(s),t.certs[s.hash]||null}function n(s){if(!s.hash){var l=Ge.md.sha1.create();s.attributes=Te.RDNAttributesAsArray(il(s),l),s.hash=l.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};Te.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Te.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var c=t.shift(),f=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Te.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(f=t[0]||e.getIssuer(c),f===null&&c.isIssuer(c)&&(d=!0,f=c),f){var h=f;Ge.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(c)}catch(D){}}g||(s={message:"Certificate signature is invalid.",error:Te.certificateError.bad_certificate})}s===null&&(!f||d)&&!e.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:Te.certificateError.unknown_ca})}if(s===null&&f&&!c.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:Te.certificateError.bad_certificate}),s===null)for(var y={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<c.extensions.length;++m){var _=c.extensions[m];_.critical&&!(_.name in y)&&(s={message:"Certificate has an unsupported critical extension.",error:Te.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!f||d))){var w=c.getExtension("basicConstraints"),E=c.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||w===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Te.certificateError.bad_certificate}),s===null&&w!==null&&!w.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Te.certificateError.bad_certificate}),s===null&&E!==null&&"pathLenConstraint"in w){var S=l-1;S>w.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Te.certificateError.bad_certificate})}}var N=s===null?!0:s.error,R=r.verify?r.verify(N,l,n):N;if(R===!0)s=null;else throw N===!0&&(s={message:"The application rejected the certificate.",error:Te.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!Ge.util.isArray(R)?(R.message&&(s.message=R.message),R.error&&(s.error=R.error)):typeof R=="string"&&(s.error=R)),s;a=!1,++l}while(t.length>0);return!0}});var pg=ce((n7,TC)=>{var $t=dt();Ei();Jo();Za();cg();ug();Zn();Eu();tl();Lt();wd();var F=$t.asn1,Ct=$t.pki,Cu=TC.exports=$t.pkcs12=$t.pkcs12||{},SC={name:"ContentInfo",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},mM={name:"PFX",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"version"},SC,{name:"PFX.macData",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:F.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},yM={name:"SafeBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},vM={name:"Attribute",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,capture:"values"}]},_M={name:"CertBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:F.Class.UNIVERSAL,type:F.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function bu(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var l=e[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(t===null){i.push(l);continue}l.attributes[t]!==void 0&&l.attributes[t].indexOf(r)>=0&&i.push(l)}}return i}Cu.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!F.validate(e,mM,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(w){var E={},S;return"localKeyId"in w?S=w.localKeyId:"localKeyIdHex"in w&&(S=$t.util.hexToBytes(w.localKeyIdHex)),S===void 0&&!("friendlyName"in w)&&"bagType"in w&&(E[w.bagType]=bu(s.safeContents,null,null,w.bagType)),S!==void 0&&(E.localKeyId=bu(s.safeContents,"localKeyId",S,w.bagType)),"friendlyName"in w&&(E.friendlyName=bu(s.safeContents,"friendlyName",w.friendlyName,w.bagType)),E},getBagsByFriendlyName:function(w,E){return bu(s.safeContents,"friendlyName",w,E)},getBagsByLocalKeyId:function(w,E){return bu(s.safeContents,"localKeyId",w,E)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(F.derToOid(n.contentType)!==Ct.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=F.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==F.Class.UNIVERSAL||l.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=hg(l),n.mac){var c=null,f=0,d=F.derToOid(n.macAlgorithm);switch(d){case Ct.oids.sha1:c=$t.md.sha1.create(),f=20;break;case Ct.oids.sha256:c=$t.md.sha256.create(),f=32;break;case Ct.oids.sha384:c=$t.md.sha384.create(),f=48;break;case Ct.oids.sha512:c=$t.md.sha512.create(),f=64;break;case Ct.oids.md5:c=$t.md.md5.create(),f=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new $t.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt($t.util.bytesToHex(n.macIterations),16):1,y=Cu.generateKey(r,h,3,g,f,c),m=$t.hmac.create();m.start(c,y),m.update(l.value);var _=m.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return wM(s,l.value,t,r),s};function hg(e){if(e.composed||e.constructed){for(var t=$t.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function wM(e,t,r,n){if(t=F.fromDer(t,r),t.tagClass!==F.Class.UNIVERSAL||t.type!==F.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!F.validate(a,SC,s,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var f={encrypted:!1},d=null,h=s.content.value[0];switch(F.derToOid(s.contentType)){case Ct.oids.data:if(h.tagClass!==F.Class.UNIVERSAL||h.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=hg(h).value;break;case Ct.oids.encryptedData:d=EM(h,n),f.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=F.derToOid(s.contentType),c}f.safeBags=CM(d,r,n),e.safeContents.push(f)}}function EM(e,t){var r={},n=[];if(!F.validate(e,$t.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=F.derToOid(r.contentType);if(a!==Ct.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=F.derToOid(r.encAlgorithm);var s=Ct.pbe.getCipher(a,r.encParameter,t),l=hg(r.encryptedContentAsn1),c=$t.util.createBuffer(l.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function CM(e,t,r){if(!t&&e.length===0)return[];if(e=F.fromDer(e,t),e.tagClass!==F.Class.UNIVERSAL||e.type!==F.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!F.validate(a,yM,s,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var f={type:F.derToOid(s.bagId),attributes:bM(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case Ct.oids.pkcs8ShroudedKeyBag:if(g=Ct.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ct.oids.keyBag:try{f.key=Ct.privateKeyFromAsn1(g)}catch(m){f.key=null,f.asn1=g}continue;case Ct.oids.certBag:d=_M,h=function(){if(F.derToOid(s.certId)!==Ct.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=F.derToOid(s.certId),m}var _=F.fromDer(s.cert,t);try{f.cert=Ct.certificateFromAsn1(_,!0)}catch(w){f.cert=null,f.asn1=_}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=f.type,c}if(d!==void 0&&!F.validate(g,d,s,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}h()}return n}function bM(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!F.validate(e[r],vM,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=F.derToOid(n.oid);if(Ct.oids[s]!==void 0){t[Ct.oids[s]]=[];for(var l=0;l<n.values.length;++l)t[Ct.oids[s]].push(n.values[l].value)}}return t}Cu.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=$t.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var s=$t.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=Ct.certificateFromPem(s));var l=$t.md.sha1.create();l.update(F.toDer(Ct.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=$t.random.getBytes(20);var c=[];i!==null&&c.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.localKeyId).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.friendlyName).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(a=F.create(F.Class.UNIVERSAL,F.Type.SET,!0,c));var f=[],d=[];t!==null&&($t.util.isArray(t)?d=t:d=[t]);for(var h=[],g=0;g<d.length;++g){t=d[g],typeof t=="string"&&(t=Ct.certificateFromPem(t));var y=g===0?a:void 0,m=Ct.certificateToAsn1(t),_=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.certBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.x509Certificate).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(m).getBytes())])])]),y]);h.push(_)}if(h.length>0){var w=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,h),E=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(w).getBytes())])]);f.push(E)}var S=null;if(e!==null){var N=Ct.wrapRsaPrivateKey(Ct.privateKeyToAsn1(e));r===null?S=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.keyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[N]),a]):S=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.pkcs8ShroudedKeyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[Ct.encryptPrivateKeyInfo(N,r,n)]),a]);var R=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[S]),D=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(R).getBytes())])]);f.push(D)}var O=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,f),te;if(n.useMac){var l=$t.md.sha1.create(),V=new $t.util.ByteBuffer($t.random.getBytes(n.saltSize)),M=n.count,e=Cu.generateKey(r,V,3,M,20),le=$t.hmac.create();le.start(l,e),le.update(F.toDer(O).getBytes());var se=le.getMac();te=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.sha1).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.NULL,!1,"")]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,se.getBytes())]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,V.getBytes()),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(M).getBytes())])}return F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(3).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Ct.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(O).getBytes())])]),te])};Cu.generateKey=$t.pbe.generatePkcs12Key});var mg=ce((i7,AC)=>{var rs=dt();Ei();Za();ug();Os();cd();pg();yd();Eu();Lt();wd();var gg=rs.asn1,al=AC.exports=rs.pki=rs.pki||{};al.pemToDer=function(e){var t=rs.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return rs.util.createBuffer(t.body)};al.privateKeyFromPem=function(e){var t=rs.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=gg.fromDer(t.body);return al.privateKeyFromAsn1(n)};al.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:gg.toDer(al.privateKeyToAsn1(e)).getBytes()};return rs.pem.encode(r,{maxline:t})};al.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:gg.toDer(e).getBytes()};return rs.pem.encode(r,{maxline:t})}});var Cg=ce((a7,LC)=>{var me=dt();Ei();Jo();sd();Os();mg();Zn();tl();Lt();var Ed=function(e,t,r,n){var i=me.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),l=e.substr(0,s),c=e.substr(a,s),f=me.util.createBuffer(),d=me.hmac.create();r=t+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var y=me.util.createBuffer();f.putBytes(r);for(var m=0;m<h;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),y.putBuffer(d.digest());d.start("SHA1",c);var _=me.util.createBuffer();f.clear(),f.putBytes(r);for(var m=0;m<g;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),_.putBuffer(d.digest());return i.putBytes(me.util.xorBytes(y.getBytes(),_.getBytes(),n)),i},xM=function(e,t,r){var n=me.hmac.create();n.start("SHA1",e);var i=me.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},SM=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=me.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},TM=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=me.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},Un=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return me.util.createBuffer(e.getBytes(r))},ri=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},T={};T.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};T.SupportedVersions=[T.Versions.TLS_1_1,T.Versions.TLS_1_0];T.Version=T.SupportedVersions[0];T.MaxFragment=16384-1024;T.ConnectionEnd={server:0,client:1};T.PRFAlgorithm={tls_prf_sha256:0};T.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};T.CipherType={stream:0,block:1,aead:2};T.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};T.CompressionMethod={none:0,deflate:1};T.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};T.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};T.Alert={};T.Alert.Level={warning:1,fatal:2};T.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};T.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};T.CipherSuites={};T.getCipherSuite=function(e){var t=null;for(var r in T.CipherSuites){var n=T.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};T.handleUnexpected=function(e,t){var r=!e.open&&e.entity===T.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})};T.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(T.queue(e,T.createAlert(e,{level:T.Alert.Level.warning,description:T.Alert.Description.no_renegotiation})),T.flush(e)),e.process()};T.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===T.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:me.util.createBuffer(a.getBytes(32)),session_id:Un(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=Un(a,2),n.compression_methods=Un(a,1)),s=r-(s-a.length()),s>0){for(var l=Un(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:Un(l,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var f=n.extensions[c];if(f.type[0]===0&&f.type[1]===0)for(var d=Un(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;e.session.extensions.server_name.serverNameList.push(Un(d,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=T.getCipherSuite(n.cipher_suite);else for(var g=me.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(e.session.cipherSuite=T.getCipherSuite(g.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure},cipherSuite:me.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=T.CompressionMethod.none}return n};T.createSecurityParameters=function(e,t){var r=e.entity===T.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,a=r?n:T.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:T.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};T.handleServerHello=function(e,t,r){var n=T.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=kC,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=IM,e.session.resuming=!1,T.createSecurityParameters(e,n)),e.session.id=i,e.process()}};T.handleClientHello=function(e,t,r){var n=T.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=me.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,l=1;l<T.SupportedVersions.length&&(s=T.SupportedVersions[l],!(s.minor<=n.version.minor));++l);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=vg,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?LM:yg,e.session.resuming=!1,T.createSecurityParameters(e,n)),e.open=!0,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerHello(e)})),e.session.resuming?(T.queue(e,T.createRecord(e,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),e.state.pending=T.createConnectionState(e),e.state.current.write=e.state.pending.write,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createFinished(e)}))):(T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificate(e)})),e.fail||(T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerKeyExchange(e)})),e.verifyClient!==!1&&T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificateRequest(e)})),T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerHelloDone(e)})))),T.flush(e),e.process()}};T.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:Un(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=Un(i.certificate_list,3),s=me.asn1.fromDer(a),a=me.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return e.error(e,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var c=e.entity===T.ConnectionEnd.client;(c||e.verifyClient===!0)&&l.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}}):l.length===0?e.expect=c?IC:yg:(c?e.session.serverCertificate=l[0]:e.session.clientCertificate=l[0],T.verifyCertificateChain(e,l)&&(e.expect=c?IC:yg)),e.process()};T.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});e.expect=kM,e.process()};T.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:Un(n,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=me.pki.privateKeyFromPem(a)}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=e.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(c){s.pre_master_secret=me.random.getBytes(48)}e.expect=vg,e.session.clientCertificate!==null&&(e.expect=PM),e.process()};T.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:Un(n,1),certificate_authorities:Un(n,2)};e.session.certificateRequest=i,e.expect=NM,e.process()};T.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:Un(n,2).getBytes()},s=me.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var l=e.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(c){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure}})}e.expect=vg,e.process()};T.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.insufficient_security}},i=0,a=e.verify(e,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!me.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),e.error(e,n)}e.session.certificateRequest!==null&&(t=T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificate(e)}),T.queue(e,t)),t=T.createRecord(e,{type:T.ContentType.handshake,data:T.createClientKeyExchange(e)}),T.queue(e,t),e.expect=DM;var s=function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createCertificateVerify(l,c)})),T.queue(l,T.createRecord(l,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),l.state.pending=T.createConnectionState(l),l.state.current.write=l.state.pending.write,T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createFinished(l)})),l.expect=kC,T.flush(l),l.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);T.getClientSignature(e,s)};T.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var r=e.entity===T.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=T.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?RM:MM,e.process()};T.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=t.fragment.getBytes();n=me.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var s=e.entity===T.ConnectionEnd.client,l=s?"server finished":"client finished",c=e.session.sp,f=12,d=Ed;if(n=d(c.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(T.queue(e,T.createRecord(e,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createFinished(e)}))),e.expect=s?BM:UM,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,T.flush(e),e.isConnected=!0,e.connected(e),e.process()};T.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case T.Alert.Description.close_notify:i="Connection closed.";break;case T.Alert.Description.unexpected_message:i="Unexpected message.";break;case T.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case T.Alert.Description.decryption_failed:i="Decryption failed.";break;case T.Alert.Description.record_overflow:i="Record overflow.";break;case T.Alert.Description.decompression_failure:i="Decompression failed.";break;case T.Alert.Description.handshake_failure:i="Handshake failure.";break;case T.Alert.Description.bad_certificate:i="Bad certificate.";break;case T.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case T.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case T.Alert.Description.certificate_expired:i="Certificate expired.";break;case T.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case T.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case T.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case T.Alert.Description.access_denied:i="Access denied.";break;case T.Alert.Description.decode_error:i="Decode error.";break;case T.Alert.Description.decrypt_error:i="Decrypt error.";break;case T.Alert.Description.export_restriction:i="Export restriction.";break;case T.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case T.Alert.Description.insufficient_security:i="Insufficient security.";break;case T.Alert.Description.internal_error:i="Internal error.";break;case T.Alert.Description.user_canceled:i="User canceled.";break;case T.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===T.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===T.ConnectionEnd.client?"server":"client",alert:n}),e.process()};T.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=me.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in bd[e.entity][e.expect]?(e.entity===T.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:me.md.md5.create(),sha1:me.md.sha1.create()}),n!==T.HandshakeType.hello_request&&n!==T.HandshakeType.certificate_verify&&n!==T.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),bd[e.entity][e.expect][n](e,t,i)):T.handleUnexpected(e,t)};T.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};T.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===T.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();T.queue(e,T.createRecord(e,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_response,a)})),T.flush(e)}else if(n===T.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,me.util.createBuffer(a))}e.process()};var AM=0,IM=1,IC=2,kM=3,NM=4,kC=5,RM=6,BM=7,DM=8,OM=0,LM=1,yg=2,PM=3,vg=4,MM=5,UM=6,x=T.handleUnexpected,NC=T.handleChangeCipherSpec,Hr=T.handleAlert,dn=T.handleHandshake,RC=T.handleApplicationData,Yr=T.handleHeartbeat,_g=[];_g[T.ConnectionEnd.client]=[[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[NC,Hr,x,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,RC,Yr],[x,Hr,dn,x,Yr]];_g[T.ConnectionEnd.server]=[[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,x,Yr],[NC,Hr,x,x,Yr],[x,Hr,dn,x,Yr],[x,Hr,dn,RC,Yr],[x,Hr,dn,x,Yr]];var ns=T.handleHelloRequest,FM=T.handleServerHello,BC=T.handleCertificate,DC=T.handleServerKeyExchange,wg=T.handleCertificateRequest,Cd=T.handleServerHelloDone,OC=T.handleFinished,bd=[];bd[T.ConnectionEnd.client]=[[x,x,FM,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,BC,DC,wg,Cd,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,x,DC,wg,Cd,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,x,x,wg,Cd,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,x,x,x,Cd,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,OC],[ns,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[ns,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];var qM=T.handleClientHello,GM=T.handleClientKeyExchange,VM=T.handleCertificateVerify;bd[T.ConnectionEnd.server]=[[x,qM,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,BC,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,GM,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,VM,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,OC],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];T.generateKeys=function(e,t){var r=Ed,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===T.Versions.TLS_1_0.major&&e.version.minor===T.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=r(t.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(t.fixed_iv_length),l.server_write_IV=s.getBytes(t.fixed_iv_length)),l};T.createConnectionState=function(e){var t=e.entity===T.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=T.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case T.CompressionMethod.none:break;case T.CompressionMethod.deflate:n.read.compressFunction=TM,n.write.compressFunction=SM;break;default:throw new Error("Unsupported compression algorithm.")}}return n};T.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=me.util.createBuffer();return r.putInt32(t),r.putBytes(me.random.getBytes(28)),r};T.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};T.createAlert=function(e,t){var r=me.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),T.createRecord(e,{type:T.ContentType.alert,data:r})};T.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=me.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),a=me.util.createBuffer();a.putByte(T.CompressionMethod.none);var s=a.length(),l=me.util.createBuffer();if(e.virtualHost){var c=me.util.createBuffer();c.putByte(0),c.putByte(0);var f=me.util.createBuffer();f.putByte(0),ri(f,2,me.util.createBuffer(e.virtualHost));var d=me.util.createBuffer();ri(d,2,f),ri(c,2,d),l.putBuffer(c)}var h=l.length();h>0&&(h+=2);var g=e.session.id,y=g.length+1+2+4+28+2+i+1+s+h,m=me.util.createBuffer();return m.putByte(T.HandshakeType.client_hello),m.putInt24(y),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),ri(m,1,me.util.createBuffer(g)),ri(m,2,t),ri(m,1,a),h>0&&ri(m,2,l),m};T.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=me.util.createBuffer();return n.putByte(T.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),ri(n,1,me.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};T.createCertificate=function(e){var t=e.entity===T.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=me.util.createBuffer();if(r!==null)try{me.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=me.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=me.util.createBuffer(l.body);a===null&&(a=me.asn1.fromDer(f.bytes(),!1));var d=me.util.createBuffer();ri(d,3,f),i.putBuffer(d)}r=me.pki.certificateFromAsn1(a),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(y){return e.error(e,{message:"Could not send certificate list.",cause:y,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var h=3+i.length(),g=me.util.createBuffer();return g.putByte(T.HandshakeType.certificate),g.putInt24(h),ri(g,3,i),g};T.createClientKeyExchange=function(e){var t=me.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(me.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,a=me.util.createBuffer();return a.putByte(T.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};T.createServerKeyExchange=function(e){var t=0,r=me.util.createBuffer();return t>0&&(r.putByte(T.HandshakeType.server_key_exchange),r.putInt24(t)),r};T.getClientSignature=function(e,t){var r=me.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=me.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},e.getSignature(e,r,t)};T.createCertificateVerify=function(e,t){var r=t.length+2,n=me.util.createBuffer();return n.putByte(T.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};T.createCertificateRequest=function(e){var t=me.util.createBuffer();t.putByte(1);var r=me.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],a=me.pki.distinguishedNameToAsn1(i.subject),s=me.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+t.length()+2+r.length(),c=me.util.createBuffer();return c.putByte(T.HandshakeType.certificate_request),c.putInt24(l),ri(c,1,t),ri(c,2,r),c};T.createServerHelloDone=function(e){var t=me.util.createBuffer();return t.putByte(T.HandshakeType.server_hello_done),t.putInt24(0),t};T.createChangeCipherSpec=function(){var e=me.util.createBuffer();return e.putByte(1),e};T.createFinished=function(e){var t=me.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===T.ConnectionEnd.client,n=e.session.sp,i=12,a=Ed,s=r?"client finished":"server finished";t=a(n.master_secret,s,t.getBytes(),i);var l=me.util.createBuffer();return l.putByte(T.HandshakeType.finished),l.putInt24(t.length()),l.putBuffer(t),l};T.createHeartbeat=function(e,t,r){typeof r=="undefined"&&(r=t.length);var n=me.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(me.random.getBytes(a)),n};T.queue=function(e,t){if(!!t&&!(t.fragment.length()===0&&(t.type===T.ContentType.handshake||t.type===T.ContentType.alert||t.type===T.ContentType.change_cipher_spec))){if(t.type===T.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=T.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>T.MaxFragment;)n.push(T.createRecord(e,{type:t.type,data:me.util.createBuffer(i.slice(0,T.MaxFragment))})),i=i.slice(T.MaxFragment);i.length>0&&n.push(T.createRecord(e,{type:t.type,data:me.util.createBuffer(i)}))}for(var a=0;a<n.length&&!e.fail;++a){var s=n[a],l=e.state.current.write;l.update(e,s)&&e.records.push(s)}}};T.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var Eg=function(e){switch(e){case!0:return!0;case me.pki.certificateError.bad_certificate:return T.Alert.Description.bad_certificate;case me.pki.certificateError.unsupported_certificate:return T.Alert.Description.unsupported_certificate;case me.pki.certificateError.certificate_revoked:return T.Alert.Description.certificate_revoked;case me.pki.certificateError.certificate_expired:return T.Alert.Description.certificate_expired;case me.pki.certificateError.certificate_unknown:return T.Alert.Description.certificate_unknown;case me.pki.certificateError.unknown_ca:return T.Alert.Description.unknown_ca;default:return T.Alert.Description.bad_certificate}},KM=function(e){switch(e){case!0:return!0;case T.Alert.Description.bad_certificate:return me.pki.certificateError.bad_certificate;case T.Alert.Description.unsupported_certificate:return me.pki.certificateError.unsupported_certificate;case T.Alert.Description.certificate_revoked:return me.pki.certificateError.certificate_revoked;case T.Alert.Description.certificate_expired:return me.pki.certificateError.certificate_expired;case T.Alert.Description.certificate_unknown:return me.pki.certificateError.certificate_unknown;case T.Alert.Description.unknown_ca:return me.pki.certificateError.unknown_ca;default:return me.pki.certificateError.bad_certificate}};T.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(a,s,l){var c=Eg(a),f=e.verify(e,a,s,l);if(f!==!0){if(typeof f=="object"&&!me.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=KM(f))}return f},me.pki.verifyCertificateChain(e.caStore,t,r)}catch(a){var i=a;(typeof i!="object"||me.util.isArray(i))&&(i={send:!0,alert:{level:T.Alert.Level.fatal,description:Eg(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:T.Alert.Level.fatal,description:Eg(i.error)}),e.error(e,i)}return!e.fail};T.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var a=null,s=null;if(i?s=me.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=me.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};T.createConnection=function(e){var t=null;e.caStore?me.util.isArray(e.caStore)?t=me.pki.createCaStore(e.caStore):t=e.caStore:t=me.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in T.CipherSuites)r.push(T.CipherSuites[n])}var i=e.server?T.ConnectionEnd.server:T.ConnectionEnd.client,a=e.sessionCache?T.createSessionCache(e.sessionCache):null,s={version:{major:T.Version.major,minor:T.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(d,h,g,y){return h},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:me.util.createBuffer(),tlsData:me.util.createBuffer(),data:me.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(d,h){h.origin=h.origin||(d.entity===T.ConnectionEnd.client?"client":"server"),h.send&&(T.queue(d,T.createAlert(d,h.alert)),T.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),e.error(d,h),g&&d.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(d){s.version={major:T.Version.major,minor:T.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===T.ConnectionEnd.client?AM:OM,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=T.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-T.ContentType.change_cipher_spec,y=_g[d.entity][d.expect];g in y?y[g](d,h):T.handleUnexpected(d,h)},c=function(d){var h=0,g=d.input,y=g.length();if(y<5)h=5-y;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:me.util.createBuffer(),ready:!1};var m=d.record.version.major===d.version.major;m&&d.session&&d.session.version&&(m=d.record.version.minor===d.version.minor),m||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,y=g.length();if(y<d.record.length)h=d.record.length-y;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var m=d.state.current.read;m.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==T.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:me.md.md5.create(),sha1:me.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=T.createRandom().getBytes(),s.open=!0,T.queue(s,T.createRecord(s,{type:T.ContentType.handshake,data:T.createClientHello(s)})),T.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return T.queue(s,T.createRecord(s,{type:T.ContentType.application_data,data:me.util.createBuffer(d)})),T.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof me.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,T.queue(s,T.createRecord(s,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_request,d,h)})),T.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,T.queue(s,T.createAlert(s,{level:T.Alert.Level.warning,description:T.Alert.Description.close_notify})),T.flush(s)),s.closed(s)),s.reset(d)},s};LC.exports=me.tls=me.tls||{};for(xd in T)typeof T[xd]!="function"&&(me.tls[xd]=T[xd]);var xd;me.tls.prf_tls1=Ed;me.tls.hmac_sha1=xM;me.tls.createSessionCache=T.createSessionCache;me.tls.createConnection=T.createConnection});var UC=ce((s7,MC)=>{var is=dt();Ja();Cg();var ni=MC.exports=is.tls;ni.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=ni.BulkCipherAlgorithm.aes,e.cipher_type=ni.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=ni.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:PC};ni.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=ni.BulkCipherAlgorithm.aes,e.cipher_type=ni.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=ni.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:PC};function PC(e,t,r){var n=t.entity===is.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:is.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:is.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=WM,e.write.cipherFunction=jM,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=ni.hmac_sha1}function jM(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===ni.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=is.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=ni.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(HM)&&(e.fragment=a.output,e.length=e.fragment.length(),r=!0),r}function HM(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function YM(e,t,r){var n=!0;if(r){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)n=n&&t.at(s)==a;n&&t.truncate(a+1)}return n}function WM(e,t){var r=!1,n;e.version.minor===ni.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(YM);var a=t.macLength,s=is.random.getBytesSync(a),l=i.output.length();l>=a?(e.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=is.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=zM(t.macKey,s,c)&&r,r}function zM(e,t,r){var n=is.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var Sg=ce((o7,VC)=>{var ir=dt();Vi();Lt();var xu=VC.exports=ir.sha512=ir.sha512||{};ir.md.sha512=ir.md.algorithms.sha512=xu;var FC=ir.sha384=ir.sha512.sha384=ir.sha512.sha384||{};FC.create=function(){return xu.create("SHA-384")};ir.md.sha384=ir.md.algorithms.sha384=FC;ir.sha512.sha256=ir.sha512.sha256||{create:function(){return xu.create("SHA-512/256")}};ir.md["sha512/256"]=ir.md.algorithms["sha512/256"]=ir.sha512.sha256;ir.sha512.sha224=ir.sha512.sha224||{create:function(){return xu.create("SHA-512/224")}};ir.md["sha512/224"]=ir.md.algorithms["sha512/224"]=ir.sha512.sha224;xu.create=function(e){if(qC||QM(),typeof e=="undefined"&&(e="SHA-512"),!(e in qs))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=qs[e],r=null,n=ir.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,f=0;f<c;++f)l.fullMessageLength.push(0);n=ir.util.createBuffer(),r=new Array(t.length);for(var f=0;f<t.length;++f)r[f]=t[f].slice(0);return l},l.start(),l.update=function(c,f){f==="utf8"&&(c=ir.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),GC(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var c=ir.util.createBuffer();c.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;c.putBytes(bg.substr(0,l.blockLength-d));for(var h,g,y=l.fullMessageLength[0]*8,m=0;m<l.fullMessageLength.length-1;++m)h=l.fullMessageLength[m+1]*8,g=h/4294967296>>>0,y+=g,c.putInt32(y>>>0),y=h>>>0;c.putInt32(y);for(var _=new Array(r.length),m=0;m<r.length;++m)_[m]=r[m].slice(0);GC(_,i,c);var w=ir.util.createBuffer(),E;e==="SHA-512"?E=_.length:e==="SHA-384"?E=_.length-2:E=_.length-4;for(var m=0;m<E;++m)w.putInt32(_[m][0]),(m!==E-1||e!=="SHA-512/224")&&w.putInt32(_[m][1]);return w},l};var bg=null,qC=!1,xg=null,qs=null;function QM(){bg=String.fromCharCode(128),bg+=ir.util.fillString(String.fromCharCode(0),128),xg=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],qs={},qs["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],qs["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],qs["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],qs["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],qC=!0}function GC(e,t,r){for(var n,i,a,s,l,c,f,d,h,g,y,m,_,w,E,S,N,R,D,O,te,V,M,le,se,_e,Oe,Ne,Se,Ee,ve,ze,Ve,vt,pt,Qe=r.length();Qe>=128;){for(Se=0;Se<16;++Se)t[Se][0]=r.getInt32()>>>0,t[Se][1]=r.getInt32()>>>0;for(;Se<80;++Se)ze=t[Se-2],Ee=ze[0],ve=ze[1],n=((Ee>>>19|ve<<13)^(ve>>>29|Ee<<3)^Ee>>>6)>>>0,i=((Ee<<13|ve>>>19)^(ve<<3|Ee>>>29)^(Ee<<26|ve>>>6))>>>0,vt=t[Se-15],Ee=vt[0],ve=vt[1],a=((Ee>>>1|ve<<31)^(Ee>>>8|ve<<24)^Ee>>>7)>>>0,s=((Ee<<31|ve>>>1)^(Ee<<24|ve>>>8)^(Ee<<25|ve>>>7))>>>0,Ve=t[Se-7],pt=t[Se-16],ve=i+Ve[1]+s+pt[1],t[Se][0]=n+Ve[0]+a+pt[0]+(ve/4294967296>>>0)>>>0,t[Se][1]=ve>>>0;for(_=e[0][0],w=e[0][1],E=e[1][0],S=e[1][1],N=e[2][0],R=e[2][1],D=e[3][0],O=e[3][1],te=e[4][0],V=e[4][1],M=e[5][0],le=e[5][1],se=e[6][0],_e=e[6][1],Oe=e[7][0],Ne=e[7][1],Se=0;Se<80;++Se)f=((te>>>14|V<<18)^(te>>>18|V<<14)^(V>>>9|te<<23))>>>0,d=((te<<18|V>>>14)^(te<<14|V>>>18)^(V<<23|te>>>9))>>>0,h=(se^te&(M^se))>>>0,g=(_e^V&(le^_e))>>>0,l=((_>>>28|w<<4)^(w>>>2|_<<30)^(w>>>7|_<<25))>>>0,c=((_<<4|w>>>28)^(w<<30|_>>>2)^(w<<25|_>>>7))>>>0,y=(_&E|N&(_^E))>>>0,m=(w&S|R&(w^S))>>>0,ve=Ne+d+g+xg[Se][1]+t[Se][1],n=Oe+f+h+xg[Se][0]+t[Se][0]+(ve/4294967296>>>0)>>>0,i=ve>>>0,ve=c+m,a=l+y+(ve/4294967296>>>0)>>>0,s=ve>>>0,Oe=se,Ne=_e,se=M,_e=le,M=te,le=V,ve=O+i,te=D+n+(ve/4294967296>>>0)>>>0,V=ve>>>0,D=N,O=R,N=E,R=S,E=_,S=w,ve=i+s,_=n+a+(ve/4294967296>>>0)>>>0,w=ve>>>0;ve=e[0][1]+w,e[0][0]=e[0][0]+_+(ve/4294967296>>>0)>>>0,e[0][1]=ve>>>0,ve=e[1][1]+S,e[1][0]=e[1][0]+E+(ve/4294967296>>>0)>>>0,e[1][1]=ve>>>0,ve=e[2][1]+R,e[2][0]=e[2][0]+N+(ve/4294967296>>>0)>>>0,e[2][1]=ve>>>0,ve=e[3][1]+O,e[3][0]=e[3][0]+D+(ve/4294967296>>>0)>>>0,e[3][1]=ve>>>0,ve=e[4][1]+V,e[4][0]=e[4][0]+te+(ve/4294967296>>>0)>>>0,e[4][1]=ve>>>0,ve=e[5][1]+le,e[5][0]=e[5][0]+M+(ve/4294967296>>>0)>>>0,e[5][1]=ve>>>0,ve=e[6][1]+_e,e[6][0]=e[6][0]+se+(ve/4294967296>>>0)>>>0,e[6][1]=ve>>>0,ve=e[7][1]+Ne,e[7][0]=e[7][0]+Oe+(ve/4294967296>>>0)>>>0,e[7][1]=ve>>>0,Qe-=128}}});var KC=ce(Tg=>{var XM=dt();Ei();var Ur=XM.asn1;Tg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Tg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Ur.Class.UNIVERSAL,type:Ur.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var rb=ce((u7,tb)=>{var Wr=dt();wu();Zn();Sg();Lt();var jC=KC(),JM=jC.publicKeyValidator,ZM=jC.privateKeyValidator;typeof HC=="undefined"&&(HC=Wr.jsbn.BigInteger);var HC,Ag=Wr.util.ByteBuffer,Sn=typeof Buffer=="undefined"?Uint8Array:Buffer;Wr.pki=Wr.pki||{};tb.exports=Wr.pki.ed25519=Wr.ed25519=Wr.ed25519||{};var bt=Wr.ed25519;bt.constants={};bt.constants.PUBLIC_KEY_BYTE_LENGTH=32;bt.constants.PRIVATE_KEY_BYTE_LENGTH=64;bt.constants.SEED_BYTE_LENGTH=32;bt.constants.SIGN_BYTE_LENGTH=64;bt.constants.HASH_BYTE_LENGTH=64;bt.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Wr.random.getBytesSync(bt.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==bt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+bt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=_a({message:t,encoding:"binary"});for(var r=new Sn(bt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Sn(bt.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return rU(r,n),{publicKey:r,privateKey:n}};bt.privateKeyFromAsn1=function(e){var t={},r=[],n=Wr.asn1.validate(e,ZM,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=Wr.asn1.derToOid(t.privateKeyOid),s=Wr.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=t.privateKey,c=_a({message:Wr.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};bt.publicKeyFromAsn1=function(e){var t={},r=[],n=Wr.asn1.validate(e,JM,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=Wr.asn1.derToOid(t.publicKeyOid),s=Wr.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=t.ed25519PublicKey;if(l.length!==bt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return _a({message:l,encoding:"binary"})};bt.publicKeyFromPrivateKey=function(e){e=e||{};var t=_a({message:e.privateKey,encoding:"binary"});if(t.length!==bt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+bt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Sn(bt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};bt.sign=function(e){e=e||{};var t=_a(e),r=_a({message:e.privateKey,encoding:"binary"});if(r.length===bt.constants.SEED_BYTE_LENGTH){var n=bt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==bt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+bt.constants.SEED_BYTE_LENGTH+" or "+bt.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Sn(bt.constants.SIGN_BYTE_LENGTH+t.length);nU(i,t,t.length,r);for(var a=new Sn(bt.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};bt.verify=function(e){e=e||{};var t=_a(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=_a({message:e.signature,encoding:"binary"});if(r.length!==bt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+bt.constants.SIGN_BYTE_LENGTH);var n=_a({message:e.publicKey,encoding:"binary"});if(n.length!==bt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+bt.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Sn(bt.constants.SIGN_BYTE_LENGTH+t.length),a=new Sn(bt.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<bt.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<t.length;++s)i[s+bt.constants.SIGN_BYTE_LENGTH]=t[s];return iU(a,i,i.length,n)>=0};function _a(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Sn)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer!="undefined")return Buffer.from(t,r);t=new Ag(t,r)}else if(!(t instanceof Ag))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Sn(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var Ig=Ye(),Sd=Ye([1]),$M=Ye([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),eU=Ye([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),YC=Ye([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),WC=Ye([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),kg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),tU=Ye([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Su(e,t){var r=Wr.md.sha512.create(),n=new Ag(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new Sn(bt.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function rU(e,t){var r=[Ye(),Ye(),Ye(),Ye()],n,i=Su(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Dg(r,i),Bg(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function nU(e,t,r,n){var i,a,s=new Float64Array(64),l=[Ye(),Ye(),Ye(),Ye()],c=Su(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var f=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var d=Su(e.subarray(32),r+32);for(Ng(d),Dg(l,d),Bg(e,l),i=32;i<64;++i)e[i]=n[i];var h=Su(e,r+64);for(Ng(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*c[a];return zC(e.subarray(32),s),f}function iU(e,t,r,n){var i,a,s=new Sn(32),l=[Ye(),Ye(),Ye(),Ye()],c=[Ye(),Ye(),Ye(),Ye()];if(a=-1,r<64||aU(c,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var f=Su(e,r);if(Ng(f),$C(l,c,f),Dg(c,t.subarray(32)),Rg(l,c),Bg(s,l),r-=64,JC(t,0,s,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return a=r,a}function zC(e,t){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)t[i]+=r-16*t[n]*kg[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*kg[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*kg[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function Ng(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;zC(e,t)}function Rg(e,t){var r=Ye(),n=Ye(),i=Ye(),a=Ye(),s=Ye(),l=Ye(),c=Ye(),f=Ye(),d=Ye();ol(r,e[1],e[0]),ol(d,t[1],t[0]),Qt(r,r,d),sl(n,e[0],e[1]),sl(d,t[0],t[1]),Qt(n,n,d),Qt(i,e[3],t[3]),Qt(i,i,eU),Qt(a,e[2],t[2]),sl(a,a,a),ol(s,n,r),ol(l,a,i),sl(c,a,i),sl(f,n,r),Qt(e[0],s,l),Qt(e[1],f,c),Qt(e[2],c,l),Qt(e[3],s,f)}function QC(e,t,r){for(var n=0;n<4;++n)eb(e[n],t[n],r)}function Bg(e,t){var r=Ye(),n=Ye(),i=Ye();uU(i,t[2]),Qt(r,t[0],i),Qt(n,t[1],i),Td(e,n),e[31]^=ZC(r)<<7}function Td(e,t){var r,n,i,a=Ye(),s=Ye();for(r=0;r<16;++r)s[r]=t[r];for(Og(s),Og(s),Og(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,eb(s,a,1-i)}for(r=0;r<16;r++)e[2*r]=s[r]&255,e[2*r+1]=s[r]>>8}function aU(e,t){var r=Ye(),n=Ye(),i=Ye(),a=Ye(),s=Ye(),l=Ye(),c=Ye();return as(e[2],Sd),sU(e[1],t),Gs(i,e[1]),Qt(a,i,$M),ol(i,i,e[2]),sl(a,e[2],a),Gs(s,a),Gs(l,s),Qt(c,l,s),Qt(r,c,i),Qt(r,r,a),oU(r,r),Qt(r,r,i),Qt(r,r,a),Qt(r,r,a),Qt(e[0],r,a),Gs(n,e[0]),Qt(n,n,a),XC(n,i)&&Qt(e[0],e[0],tU),Gs(n,e[0]),Qt(n,n,a),XC(n,i)?-1:(ZC(e[0])===t[31]>>7&&ol(e[0],Ig,e[0]),Qt(e[3],e[0],e[1]),0)}function sU(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function oU(e,t){var r=Ye(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)Gs(r,r),n!==1&&Qt(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function XC(e,t){var r=new Sn(32),n=new Sn(32);return Td(r,e),Td(n,t),JC(r,0,n,0)}function JC(e,t,r,n){return lU(e,t,r,n,32)}function lU(e,t,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^r[n+a];return(1&s-1>>>8)-1}function ZC(e){var t=new Sn(32);return Td(t,e),t[0]&1}function $C(e,t,r){var n,i;for(as(e[0],Ig),as(e[1],Sd),as(e[2],Sd),as(e[3],Ig),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,QC(e,t,n),Rg(t,e),Rg(e,e),QC(e,t,n)}function Dg(e,t){var r=[Ye(),Ye(),Ye(),Ye()];as(r[0],YC),as(r[1],WC),as(r[2],Sd),Qt(r[3],YC,WC),$C(e,r,t)}function as(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function uU(e,t){var r=Ye(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)Gs(r,r),n!==2&&n!==4&&Qt(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function Og(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function eb(e,t,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(e[a]^t[a]),e[a]^=n,t[a]^=n}function Ye(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function sl(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function ol(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Gs(e,t){Qt(e,t,t)}function Qt(e,t,r){var n,i,a=0,s=0,l=0,c=0,f=0,d=0,h=0,g=0,y=0,m=0,_=0,w=0,E=0,S=0,N=0,R=0,D=0,O=0,te=0,V=0,M=0,le=0,se=0,_e=0,Oe=0,Ne=0,Se=0,Ee=0,ve=0,ze=0,Ve=0,vt=r[0],pt=r[1],Qe=r[2],fe=r[3],gt=r[4],tt=r[5],_t=r[6],Ze=r[7],Ce=r[8],A=r[9],B=r[10],L=r[11],Y=r[12],G=r[13],Q=r[14],J=r[15];n=t[0],a+=n*vt,s+=n*pt,l+=n*Qe,c+=n*fe,f+=n*gt,d+=n*tt,h+=n*_t,g+=n*Ze,y+=n*Ce,m+=n*A,_+=n*B,w+=n*L,E+=n*Y,S+=n*G,N+=n*Q,R+=n*J,n=t[1],s+=n*vt,l+=n*pt,c+=n*Qe,f+=n*fe,d+=n*gt,h+=n*tt,g+=n*_t,y+=n*Ze,m+=n*Ce,_+=n*A,w+=n*B,E+=n*L,S+=n*Y,N+=n*G,R+=n*Q,D+=n*J,n=t[2],l+=n*vt,c+=n*pt,f+=n*Qe,d+=n*fe,h+=n*gt,g+=n*tt,y+=n*_t,m+=n*Ze,_+=n*Ce,w+=n*A,E+=n*B,S+=n*L,N+=n*Y,R+=n*G,D+=n*Q,O+=n*J,n=t[3],c+=n*vt,f+=n*pt,d+=n*Qe,h+=n*fe,g+=n*gt,y+=n*tt,m+=n*_t,_+=n*Ze,w+=n*Ce,E+=n*A,S+=n*B,N+=n*L,R+=n*Y,D+=n*G,O+=n*Q,te+=n*J,n=t[4],f+=n*vt,d+=n*pt,h+=n*Qe,g+=n*fe,y+=n*gt,m+=n*tt,_+=n*_t,w+=n*Ze,E+=n*Ce,S+=n*A,N+=n*B,R+=n*L,D+=n*Y,O+=n*G,te+=n*Q,V+=n*J,n=t[5],d+=n*vt,h+=n*pt,g+=n*Qe,y+=n*fe,m+=n*gt,_+=n*tt,w+=n*_t,E+=n*Ze,S+=n*Ce,N+=n*A,R+=n*B,D+=n*L,O+=n*Y,te+=n*G,V+=n*Q,M+=n*J,n=t[6],h+=n*vt,g+=n*pt,y+=n*Qe,m+=n*fe,_+=n*gt,w+=n*tt,E+=n*_t,S+=n*Ze,N+=n*Ce,R+=n*A,D+=n*B,O+=n*L,te+=n*Y,V+=n*G,M+=n*Q,le+=n*J,n=t[7],g+=n*vt,y+=n*pt,m+=n*Qe,_+=n*fe,w+=n*gt,E+=n*tt,S+=n*_t,N+=n*Ze,R+=n*Ce,D+=n*A,O+=n*B,te+=n*L,V+=n*Y,M+=n*G,le+=n*Q,se+=n*J,n=t[8],y+=n*vt,m+=n*pt,_+=n*Qe,w+=n*fe,E+=n*gt,S+=n*tt,N+=n*_t,R+=n*Ze,D+=n*Ce,O+=n*A,te+=n*B,V+=n*L,M+=n*Y,le+=n*G,se+=n*Q,_e+=n*J,n=t[9],m+=n*vt,_+=n*pt,w+=n*Qe,E+=n*fe,S+=n*gt,N+=n*tt,R+=n*_t,D+=n*Ze,O+=n*Ce,te+=n*A,V+=n*B,M+=n*L,le+=n*Y,se+=n*G,_e+=n*Q,Oe+=n*J,n=t[10],_+=n*vt,w+=n*pt,E+=n*Qe,S+=n*fe,N+=n*gt,R+=n*tt,D+=n*_t,O+=n*Ze,te+=n*Ce,V+=n*A,M+=n*B,le+=n*L,se+=n*Y,_e+=n*G,Oe+=n*Q,Ne+=n*J,n=t[11],w+=n*vt,E+=n*pt,S+=n*Qe,N+=n*fe,R+=n*gt,D+=n*tt,O+=n*_t,te+=n*Ze,V+=n*Ce,M+=n*A,le+=n*B,se+=n*L,_e+=n*Y,Oe+=n*G,Ne+=n*Q,Se+=n*J,n=t[12],E+=n*vt,S+=n*pt,N+=n*Qe,R+=n*fe,D+=n*gt,O+=n*tt,te+=n*_t,V+=n*Ze,M+=n*Ce,le+=n*A,se+=n*B,_e+=n*L,Oe+=n*Y,Ne+=n*G,Se+=n*Q,Ee+=n*J,n=t[13],S+=n*vt,N+=n*pt,R+=n*Qe,D+=n*fe,O+=n*gt,te+=n*tt,V+=n*_t,M+=n*Ze,le+=n*Ce,se+=n*A,_e+=n*B,Oe+=n*L,Ne+=n*Y,Se+=n*G,Ee+=n*Q,ve+=n*J,n=t[14],N+=n*vt,R+=n*pt,D+=n*Qe,O+=n*fe,te+=n*gt,V+=n*tt,M+=n*_t,le+=n*Ze,se+=n*Ce,_e+=n*A,Oe+=n*B,Ne+=n*L,Se+=n*Y,Ee+=n*G,ve+=n*Q,ze+=n*J,n=t[15],R+=n*vt,D+=n*pt,O+=n*Qe,te+=n*fe,V+=n*gt,M+=n*tt,le+=n*_t,se+=n*Ze,_e+=n*Ce,Oe+=n*A,Ne+=n*B,Se+=n*L,Ee+=n*Y,ve+=n*G,ze+=n*Q,Ve+=n*J,a+=38*D,s+=38*O,l+=38*te,c+=38*V,f+=38*M,d+=38*le,h+=38*se,g+=38*_e,y+=38*Oe,m+=38*Ne,_+=38*Se,w+=38*Ee,E+=38*ve,S+=38*ze,N+=38*Ve,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=l,e[3]=c,e[4]=f,e[5]=d,e[6]=h,e[7]=g,e[8]=y,e[9]=m,e[10]=_,e[11]=w,e[12]=E,e[13]=S,e[14]=N,e[15]=R}});var sb=ce((c7,ab)=>{var Fn=dt();Lt();Zn();wu();ab.exports=Fn.kem=Fn.kem||{};var nb=Fn.jsbn.BigInteger;Fn.kem.rsa={};Fn.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Fn.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new nb(Fn.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(nb.ONE)<=0);l=Fn.util.hexToBytes(l.toString(16));var c=s-l.length;c>0&&(l=Fn.util.fillString(String.fromCharCode(0),c)+l);var f=i.encrypt(l,"NONE"),d=e.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return e.generate(l,s)},n};Fn.kem.kdf1=function(e,t){ib(this,e,0,t||e.digestLength)};Fn.kem.kdf2=function(e,t){ib(this,e,1,t||e.digestLength)};function ib(e,t,r,n){e.generate=function(i,a){for(var s=new Fn.util.ByteBuffer,l=Math.ceil(a/n)+r,c=new Fn.util.ByteBuffer,f=r;f<l;++f){c.putInt32(f),t.start(),t.update(i+c.getBytes());var d=t.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var cb=ce((f7,ub)=>{var At=dt();Lt();ub.exports=At.log=At.log||{};At.log.levels=["none","error","warning","info","debug","verbose","max"];var Ad={},Lg=[],Tu=null;At.log.LEVEL_LOCKED=1<<1;At.log.NO_LEVEL_CHECK=1<<2;At.log.INTERPOLATE=1<<3;for(Xi=0;Xi<At.log.levels.length;++Xi)Pg=At.log.levels[Xi],Ad[Pg]={index:Xi,name:Pg.toUpperCase()};var Pg,Xi;At.log.logMessage=function(e){for(var t=Ad[e.level].index,r=0;r<Lg.length;++r){var n=Lg[r];if(n.flags&At.log.NO_LEVEL_CHECK)n.f(e);else{var i=Ad[n.level].index;t<=i&&n.f(n,e)}}};At.log.prepareStandard=function(e){"standard"in e||(e.standard=Ad[e.level].name+" ["+e.category+"] "+e.message)};At.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=At.util.format.apply(this,t)}};At.log.prepareStandardFull=function(e){"standardFull"in e||(At.log.prepareStandard(e),e.standardFull=e.standard)};for(Mg=["error","warning","info","debug","verbose"],Xi=0;Xi<Mg.length;++Xi)(function(t){At.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:r,message:n,arguments:i};At.log.logMessage(a)}})(Mg[Xi]);var Mg,Xi;At.log.makeLogger=function(e){var t={flags:0,f:e};return At.log.setLevel(t,"none"),t};At.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&At.log.LEVEL_LOCKED))for(var n=0;n<At.log.levels.length;++n){var i=At.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};At.log.lock=function(e,t){typeof t=="undefined"||t?e.flags|=At.log.LEVEL_LOCKED:e.flags&=~At.log.LEVEL_LOCKED};At.log.addLogger=function(e){Lg.push(e)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(ob={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Au=function(e,t){At.log.prepareStandard(t);var r=ob[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},ll=At.log.makeLogger(Au)):(Au=function(t,r){At.log.prepareStandardFull(r),console.log(r.standardFull)},ll=At.log.makeLogger(Au)),At.log.setLevel(ll,"debug"),At.log.addLogger(ll),Tu=ll):console={log:function(){}};var ll,ob,Au;Tu!==null&&typeof window!="undefined"&&window.location&&(Iu=new URL(window.location.href).searchParams,Iu.has("console.level")&&At.log.setLevel(Tu,Iu.get("console.level").slice(-1)[0]),Iu.has("console.lock")&&(lb=Iu.get("console.lock").slice(-1)[0],lb=="true"&&At.log.lock(Tu)));var Iu,lb;At.log.consoleLogger=Tu});var db=ce((d7,fb)=>{fb.exports=Vi();sd();tl();X0();Sg()});var gb=ce((h7,pb)=>{var Ae=dt();Ja();Ei();vu();Za();Os();cg();Zn();Lt();wd();var K=Ae.asn1,hn=pb.exports=Ae.pkcs7=Ae.pkcs7||{};hn.messageFromPem=function(e){var t=Ae.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=K.fromDer(t.body);return hn.messageFromAsn1(n)};hn.messageToPem=function(e,t){var r={type:"PKCS7",body:K.toDer(e.toAsn1()).getBytes()};return Ae.pem.encode(r,{maxline:t})};hn.messageFromAsn1=function(e){var t={},r=[];if(!K.validate(e,hn.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=K.derToOid(t.contentType),a;switch(i){case Ae.pki.oids.envelopedData:a=hn.createEnvelopedData();break;case Ae.pki.oids.encryptedData:a=hn.createEncryptedData();break;case Ae.pki.oids.signedData:a=hn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};hn.createSignedData=function(){var e=null;return e={type:Ae.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Fg(e,n,hn.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(Ae.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Ae.pki.certificateToAsn1(e.certificates[i]));var a=[],s=K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&s.value[0].value.push(K.create(K.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(K.create(K.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(K.create(K.Class.UNIVERSAL,K.Type.SET,!0,e.signerInfos)),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Ae.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Ae.pki.privateKeyFromPem(l));var c=n.digestAlgorithm||Ae.pki.oids.sha1;switch(c){case Ae.pki.oids.sha1:case Ae.pki.oids.sha256:case Ae.pki.oids.sha384:case Ae.pki.oids.sha512:case Ae.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var y=f[g];if(!d&&y.type===Ae.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&y.type===Ae.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:c,signatureAlgorithm:Ae.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Ae.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Ae.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Ae.util.encodeUtf8(e.content)),n.detached?e.detachedContent=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ae.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in n||(n[s]=Ae.md[Ae.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=Ae.md[Ae.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in n)e.digestAlgorithmIdentifiers.push(K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(s).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=K.derToOid(e.contentInfo.value[0].value),s=K.toDer(i);s.getByte(),K.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var c=new Date,f=0;f<e.signers.length;++f){var d=e.signers[f];if(d.authenticatedAttributes.length===0){if(a!==Ae.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=K.create(K.Class.UNIVERSAL,K.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var y=d.authenticatedAttributes[g];y.type===Ae.pki.oids.messageDigest?y.value=n[d.digestAlgorithm].digest():y.type===Ae.pki.oids.signingTime&&(y.value||(y.value=c)),h.value.push(Ug(y)),d.authenticatedAttributesAsn1.value.push(Ug(y))}s=K.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=gU(e.signers)}};hn.createEncryptedData=function(){var e=null;return e={type:Ae.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ae.pki.oids["aes256-CBC"]},fromAsn1:function(t){Fg(e,t,hn.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),hb(e)}},e};hn.createEnvelopedData=function(){var e=null;return e={type:Ae.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ae.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Fg(e,t,hn.asn1.envelopedDataValidator);e.recipients=dU(r.recipientInfos.value)},toAsn1:function(){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.type).getBytes()),K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,hU(e.recipients)),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,mU(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Ae.pki.oids.rsaEncryption:case Ae.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Ae.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}hb(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Ae.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,a;switch(r){case Ae.pki.oids["aes128-CBC"]:n=16,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["aes192-CBC"]:n=24,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["aes256-CBC"]:n=32,i=16,a=Ae.aes.createEncryptionCipher;break;case Ae.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=Ae.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Ae.util.createBuffer(Ae.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Ae.util.createBuffer(Ae.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var l=0;l<e.recipients.length;++l){var c=e.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ae.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function cU(e){var t={},r=[];if(!K.validate(e,hn.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:Ae.pki.RDNAttributesAsArray(t.issuer),serialNumber:Ae.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:K.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function fU(e){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[Ae.pki.distinguishedNameToAsn1({attributes:e.issuer}),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Ae.util.hexToBytes(e.serialNumber))]),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.encryptedContent.algorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]),K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function dU(e){for(var t=[],r=0;r<e.length;++r)t.push(cU(e[r]));return t}function hU(e){for(var t=[],r=0;r<e.length;++r)t.push(fU(e[r]));return t}function pU(e){var t=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(e.version).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[Ae.pki.distinguishedNameToAsn1({attributes:e.issuer}),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Ae.util.hexToBytes(e.serialNumber))]),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.digestAlgorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.signatureAlgorithm).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")])),t.value.push(K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=K.create(K.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Ug(i))}t.value.push(r)}return t}function gU(e){for(var t=[],r=0;r<e.length;++r)t.push(pU(e[r]));return t}function Ug(e){var t;if(e.type===Ae.pki.oids.contentType)t=K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.value).getBytes());else if(e.type===Ae.pki.oids.messageDigest)t=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Ae.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=K.utcTimeToDate(i):i=K.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?t=K.create(K.Class.UNIVERSAL,K.Type.UTCTIME,!1,K.dateToUtcTime(i)):t=K.create(K.Class.UNIVERSAL,K.Type.GENERALIZEDTIME,!1,K.dateToGeneralizedTime(i))}return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.type).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SET,!0,[t])])}function mU(e){return[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Ae.pki.oids.data).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(e.algorithm).getBytes()),e.parameter?K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),K.create(K.Class.CONTEXT_SPECIFIC,0,!0,[K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Fg(e,t,r){var n={},i=[];if(!K.validate(t,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=K.derToOid(n.contentType);if(s!==Ae.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Ae.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==K.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[c].value}else l=n.encryptedContent;e.encryptedContent={algorithm:K.derToOid(n.encAlgorithm),parameter:Ae.util.createBuffer(n.encParameter.value),content:Ae.util.createBuffer(l)}}if(n.content){var l="";if(Ae.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==K.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[c].value}else l=n.content;e.content=Ae.util.createBuffer(l)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function hb(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Ae.pki.oids["aes128-CBC"]:case Ae.pki.oids["aes192-CBC"]:case Ae.pki.oids["aes256-CBC"]:t=Ae.aes.createDecryptionCipher(e.encryptedContent.key);break;case Ae.pki.oids.desCBC:case Ae.pki.oids["des-EDE3-CBC"]:t=Ae.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var yb=ce((p7,mb)=>{var xr=dt();Ja();Jo();sd();tl();Lt();var Id=mb.exports=xr.ssh=xr.ssh||{};Id.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=xr.util.createBuffer();ul(s,n),Ji(s,e.e),Ji(s,e.n);var l=xr.util.encode64(s.bytes(),64),c=Math.floor(l.length/66)+1;a+="Public-Lines: "+c+`\r
`,a+=l;var f=xr.util.createBuffer();Ji(f,e.d),Ji(f,e.p),Ji(f,e.q),Ji(f,e.qInv);var d;if(!t)d=xr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=kd(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var y=xr.util.createBuffer();y.putBuffer(kd("\0\0\0\0",t)),y.putBuffer(kd("\0\0\0",t));var m=xr.aes.createEncryptionCipher(y.truncate(8),"CBC");m.start(xr.util.createBuffer().fillWithByte(0,16)),m.update(f.copy()),m.finish();var _=m.output;_.truncate(16),d=xr.util.encode64(_.bytes(),64)}c=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+c+`\r
`,a+=d;var w=kd("putty-private-key-file-mac-key",t),E=xr.util.createBuffer();ul(E,n),ul(E,i),ul(E,r),E.putInt32(s.length()),E.putBuffer(s),E.putInt32(f.length()),E.putBuffer(f);var S=xr.hmac.create();return S.start("sha1",w),S.update(E.bytes()),a+=`\r
Private-MAC: `+S.digest().toHex()+`\r
`,a};Id.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=xr.util.createBuffer();return ul(n,r),Ji(n,e.e),Ji(n,e.n),r+" "+xr.util.encode64(n.bytes())+" "+t};Id.privateKeyToOpenSSH=function(e,t){return t?xr.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):xr.pki.privateKeyToPem(e)};Id.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||xr.md.md5.create(),n="ssh-rsa",i=xr.util.createBuffer();ul(i,n),Ji(i,e.e),Ji(i,e.n),r.start(),r.update(i.getBytes());var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function Ji(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=xr.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function ul(e,t){e.putInt32(t.length),e.putString(t)}function kd(){for(var e=xr.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var _b=ce((g7,vb)=>{vb.exports=dt();Ja();UC();Ei();$f();vu();rb();Jo();sb();cb();db();fg();cd();Os();ag();pg();gb();mg();og();J0();yd();Zn();eg();yb();Cg();Lt()});var Eb=ce(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.getPem=void 0;var yU=require("fs"),Nd=_b(),vU=require("util"),_U=vU.promisify(yU.readFile);function wU(e,t){if(t)wb(e).then(r=>t(null,r)).catch(r=>t(r,null));else return wb(e)}Rd.getPem=wU;function wb(e){return _U(e,{encoding:"base64"}).then(t=>EU(t))}function EU(e){let t=Nd.util.decode64(e),r=Nd.asn1.fromDer(t),i=Nd.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return Nd.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var Ab=ce(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.GoogleToken=void 0;var Cb=require("fs"),bb=Aw(),CU=P0(),bU=require("path"),xU=require("util"),xb=Cb.readFile?xU.promisify(Cb.readFile):()=>U(Nu,null,function*(){throw new ku("use key rather than keyFile.","MISSING_CREDENTIALS")}),Sb="https://www.googleapis.com/oauth2/v4/token",SU="https://accounts.google.com/o/oauth2/revoke?token=",ku=class extends Error{constructor(t,r){super(t);this.code=r}},qg,Tb=class{constructor(t){this.configure(t)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let t=new Date().getTime();return this.rawToken&&this.expiresAt?t>=this.expiresAt:!0}isTokenExpiring(){var t;let r=new Date().getTime(),n=(t=this.eagerRefreshThresholdMillis)!==null&&t!==void 0?t:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(t,r={}){if(typeof t=="object"&&(r=t,t=void 0),r=Object.assign({forceRefresh:!1},r),t){let n=t;this.getTokenAsync(r).then(i=>n(null,i),t);return}return this.getTokenAsync(r)}getCredentials(t){return U(this,null,function*(){switch(bU.extname(t)){case".json":{let n=yield xb(t,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new ku("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield xb(t,"utf8")};case".p12":case".pfx":return qg||(qg=(yield Promise.resolve().then(()=>Eb())).getPem),{privateKey:yield qg(t)};default:throw new ku("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(t){return U(this,null,function*(){if(this.inFlightRequest&&!t.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(t)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(t){return U(this,null,function*(){if(this.isTokenExpiring()===!1&&t.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new ku("email is required.","MISSING_CREDENTIALS")}revokeToken(t){if(t){this.revokeTokenAsync().then(()=>t(),t);return}return this.revokeTokenAsync()}revokeTokenAsync(){return U(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let t=SU+this.accessToken;yield bb.request({url:t}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(t={}){this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,typeof t.scope=="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis}requestToken(){return U(this,null,function*(){let t=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Sb,exp:t+3600,iat:t,sub:this.sub},r),i=CU.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield bb.request({method:"POST",url:Sb,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(t+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};Nu.GoogleToken=Tb});var kb=ce((v7,Ib)=>{"use strict";Ib.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Rb=ce((_7,Nb)=>{"use strict";Nb.exports=Mt;Mt.Node=Vs;Mt.create=Mt;function Mt(e){var t=this;if(t instanceof Mt||(t=new Mt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Mt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Mt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Mt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Mt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)AU(this,arguments[e]);return this.length};Mt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)IU(this,arguments[e]);return this.length};Mt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Mt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Mt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Mt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Mt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Mt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Mt.prototype.map=function(e,t){t=t||this;for(var r=new Mt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Mt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Mt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Mt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};Mt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};Mt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Mt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Mt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Mt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};Mt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Mt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};Mt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var a=[],n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=TU(this,i,r[n]);return a};Mt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function TU(e,t,r){var n=t===e.head?new Vs(r,null,t,e):new Vs(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function AU(e,t){e.tail=new Vs(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function IU(e,t){e.head=new Vs(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Vs(e,t,r,n){if(!(this instanceof Vs))return new Vs(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{kb()(Mt)}catch(e){}});var Ub=ce((w7,Mb)=>{"use strict";var kU=Rb(),Ks=Symbol("max"),wa=Symbol("length"),cl=Symbol("lengthCalculator"),Ru=Symbol("allowStale"),js=Symbol("maxAge"),Ea=Symbol("dispose"),Bb=Symbol("noDisposeOnSet"),Fr=Symbol("lruList"),bi=Symbol("cache"),Db=Symbol("updateAgeOnGet"),Gg=()=>1,Ob=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[Ks]=t.max||1/0,n=t.length||Gg;if(this[cl]=typeof n!="function"?Gg:n,this[Ru]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[js]=t.maxAge||0,this[Ea]=t.dispose,this[Bb]=t.noDisposeOnSet||!1,this[Db]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Ks]=t||1/0,Bu(this)}get max(){return this[Ks]}set allowStale(t){this[Ru]=!!t}get allowStale(){return this[Ru]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[js]=t,Bu(this)}get maxAge(){return this[js]}set lengthCalculator(t){typeof t!="function"&&(t=Gg),t!==this[cl]&&(this[cl]=t,this[wa]=0,this[Fr].forEach(r=>{r.length=this[cl](r.value,r.key),this[wa]+=r.length})),Bu(this)}get lengthCalculator(){return this[cl]}get length(){return this[wa]}get itemCount(){return this[Fr].length}rforEach(t,r){r=r||this;for(let n=this[Fr].tail;n!==null;){let i=n.prev;Pb(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Fr].head;n!==null;){let i=n.next;Pb(this,t,n,r),n=i}}keys(){return this[Fr].toArray().map(t=>t.key)}values(){return this[Fr].toArray().map(t=>t.value)}reset(){this[Ea]&&this[Fr]&&this[Fr].length&&this[Fr].forEach(t=>this[Ea](t.key,t.value)),this[bi]=new Map,this[Fr]=new kU,this[wa]=0}dump(){return this[Fr].map(t=>Bd(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Fr]}set(t,r,n){if(n=n||this[js],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[cl](r,t);if(this[bi].has(t)){if(a>this[Ks])return fl(this,this[bi].get(t)),!1;let c=this[bi].get(t).value;return this[Ea]&&(this[Bb]||this[Ea](t,c.value)),c.now=i,c.maxAge=n,c.value=r,this[wa]+=a-c.length,c.length=a,this.get(t),Bu(this),!0}let s=new Lb(t,r,a,i,n);return s.length>this[Ks]?(this[Ea]&&this[Ea](t,r),!1):(this[wa]+=s.length,this[Fr].unshift(s),this[bi].set(t,this[Fr].head),Bu(this),!0)}has(t){if(!this[bi].has(t))return!1;let r=this[bi].get(t).value;return!Bd(this,r)}get(t){return Vg(this,t,!0)}peek(t){return Vg(this,t,!1)}pop(){let t=this[Fr].tail;return t?(fl(this,t),t.value):null}del(t){fl(this,this[bi].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let i=t[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[bi].forEach((t,r)=>Vg(this,r,!1))}},Vg=(e,t,r)=>{let n=e[bi].get(t);if(n){let i=n.value;if(Bd(e,i)){if(fl(e,n),!e[Ru])return}else r&&(e[Db]&&(n.value.now=Date.now()),e[Fr].unshiftNode(n));return i.value}},Bd=(e,t)=>{if(!t||!t.maxAge&&!e[js])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[js]&&r>e[js]},Bu=e=>{if(e[wa]>e[Ks])for(let t=e[Fr].tail;e[wa]>e[Ks]&&t!==null;){let r=t.prev;fl(e,t),t=r}},fl=(e,t)=>{if(t){let r=t.value;e[Ea]&&e[Ea](r.key,r.value),e[wa]-=r.length,e[bi].delete(r.key),e[Fr].removeNode(t)}},Lb=class{constructor(t,r,n,i,a){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},Pb=(e,t,r,n)=>{let i=r.value;Bd(e,i)&&(fl(e,r),e[Ru]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};Mb.exports=Ob});var Kg=ce(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.JWTAccess=void 0;var NU=P0(),RU=Ub(),Fb={alg:"RS256",typ:"JWT"},Dd=class{constructor(t,r,n,i){this.cache=new RU({max:500,maxAge:60*60*1e3}),this.email=t,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(t,r){let n=t;if(r&&Array.isArray(r)&&r.length?n=t?`${t}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=t?`${t}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(t,r,n){let i=this.getCachedKey(t,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),c=Dd.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:c,iat:l}:f={iss:this.email,sub:this.email,aud:t,exp:c,iat:l},r){for(let m in f)if(r[m])throw new Error(`The '${m}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?un(en({},Fb),{kid:this.keyId}):Fb,h=Object.assign(f,r),y={Authorization:`Bearer ${NU.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:c*1e3,headers:y}),y}static getExpirationTime(t){return t+3600}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id}fromStream(t,r){if(r)this.fromStreamAsync(t).then(()=>r(),r);else return this.fromStreamAsync(t)}fromStreamAsync(t){return new Promise((r,n)=>{t||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";t.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};Od.JWTAccess=Dd});var jg=ce(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.JWT=void 0;var qb=Ab(),BU=Kg(),DU=Bs(),Ld=class extends DU.OAuth2Client{constructor(t,r,n,i,a,s){let l=t&&typeof t=="object"?t:{email:t,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(t){return new Ld({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:t,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(t){var r=n=>super[n];return U(this,null,function*(){t=this.defaultServicePath?`https://${this.defaultServicePath}/`:t;let i=!this.hasUserScopes()&&t||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new BU.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:t||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(t!=null?t:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,t):{headers:{}}})}fetchIdToken(t){return U(this,null,function*(){let r=new qb.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:t}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(t){if(t)this.authorizeAsync().then(r=>t(null,r),t);else return this.authorizeAsync()}authorizeAsync(){return U(this,null,function*(){let t=yield this.refreshToken();if(!t)throw new Error("No result returned");return this.credentials=t.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,t.tokens})}refreshTokenNoCache(t){return U(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new qb.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id,this.quotaProjectId=t.quota_project_id}fromStream(t,r){if(r)this.fromStreamAsync(t).then(()=>r(),r);else return this.fromStreamAsync(t)}fromStreamAsync(t){return new Promise((r,n)=>{if(!t)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";t.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(t){if(typeof t!="string")throw new Error("Must provide an API Key string.");this.apiKey=t}getCredentials(){return U(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Pd.JWT=Ld});var Hg=ce(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.UserRefreshClient=void 0;var OU=Bs(),Gb=class extends OU.OAuth2Client{constructor(t,r,n,i,a){let s=t&&typeof t=="object"?t:{clientId:t,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(t){var r=n=>super[n];return U(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the user refresh token");if(t.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!t.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!t.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!t.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=t.client_id,this._clientSecret=t.client_secret,this._refreshToken=t.refresh_token,this.credentials.refresh_token=t.refresh_token,this.quotaProjectId=t.quota_project_id}fromStream(t,r){if(r)this.fromStreamAsync(t).then(()=>r(),r);else return this.fromStreamAsync(t)}fromStreamAsync(t){return U(this,null,function*(){return new Promise((r,n)=>{if(!t)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";t.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};Md.UserRefreshClient=Gb});var jb=ce(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.getErrorFromOAuthErrorResponse=dl.OAuthClientAuthHandler=void 0;var Vb=require("querystring"),LU=Go(),PU=["PUT","POST","PATCH"],Kb=class{constructor(t){this.clientAuthentication=t,this.crypto=(0,LU.createCrypto)()}applyClientAuthenticationOptions(t,r){this.injectAuthenticatedHeaders(t,r),r||this.injectAuthenticatedRequestBody(t)}injectAuthenticatedHeaders(t,r){var n;if(r)t.headers=t.headers||{},Object.assign(t.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){t.headers=t.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(t.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(t){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(t.method||"GET").toUpperCase();if(PU.indexOf(n)!==-1){let i,a=t.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){t.data=t.data||"";let s=Vb.parse(t.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),t.data=Vb.stringify(s)}else if(i==="application/json")t.data=t.data||{},Object.assign(t.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};dl.OAuthClientAuthHandler=Kb;function MU(e,t){let r=e.error,n=e.error_description,i=e.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(t){let l=Object.keys(t);t.stack&&l.push("stack"),l.forEach(c=>{c!=="message"&&Object.defineProperty(s,c,{value:t[c],writable:!1,enumerable:!0})})}return s}dl.getErrorFromOAuthErrorResponse=MU});var Yg=ce(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.StsCredentials=void 0;var UU=Fo(),FU=require("querystring"),qU=lu(),Hb=jb(),Yb=class extends Hb.OAuthClientAuthHandler{constructor(t,r){super(r);this.tokenExchangeEndpoint=t,this.transporter=new qU.DefaultTransporter}exchangeToken(t,r,n){return U(this,null,function*(){var i,a,s;let l={grant_type:t.grantType,resource:t.resource,audience:t.audience,scope:(i=t.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:t.requestedTokenType,subject_token:t.subjectToken,subject_token_type:t.subjectTokenType,actor_token:(a=t.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=t.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let c={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(c,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:c,data:FU.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof UU.GaxiosError&&d.response?(0,Hb.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};Ud.StsCredentials=Yb});var hl=ce(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.BaseExternalAccountClient=Tn.CLOUD_RESOURCE_MANAGER=Tn.EXTERNAL_ACCOUNT_TYPE=Tn.EXPIRATION_TIME_OFFSET=void 0;var GU=require("stream"),VU=uu(),KU=Yg(),jU="urn:ietf:params:oauth:grant-type:token-exchange",HU="urn:ietf:params:oauth:token-type:access_token",Wg="https://www.googleapis.com/auth/cloud-platform",Fd="\\.googleapis\\.com$",zg="[^\\.\\s\\/\\\\]+";Tn.EXPIRATION_TIME_OFFSET=5*60*1e3;Tn.EXTERNAL_ACCOUNT_TYPE="external_account";Tn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var YU="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",Wb=class extends VU.AuthClient{constructor(t,r){super();if(t.type!==Tn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Tn.EXTERNAL_ACCOUNT_TYPE}" type but received "${t.type}"`);if(this.clientAuth=t.client_id?{confidentialClientType:"basic",clientId:t.client_id,clientSecret:t.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",t.token_url))throw new Error(`"${t.token_url}" is not a valid token url.`);this.stsCredential=new KU.StsCredentials(t.token_url,this.clientAuth),this.scopes=[Wg],this.cachedAccessToken=null,this.audience=t.audience,this.subjectTokenType=t.subject_token_type,this.quotaProjectId=t.quota_project_id,this.workforcePoolUserProject=t.workforce_pool_user_project;let n=new RegExp(YU);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof t.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",t.service_account_impersonation_url))throw new Error(`"${t.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=t.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Tn.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var t;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.email)||null}return null}setCredentials(t){super.setCredentials(t),this.cachedAccessToken=t}getAccessToken(){return U(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return U(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(t,r){if(r)this.requestAsync(t).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(t)}getProjectId(){return U(this,null,function*(){let t=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(t){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${Tn.CLOUD_RESOURCE_MANAGER}${t}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(t,r=!1){return U(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();t.headers=t.headers||{},i&&i["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(t.headers.Authorization=i.Authorization),n=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof GU.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(t,!0)}throw i}return n})}refreshAccessTokenAsync(){return U(this,null,function*(){let t=yield this.retrieveSubjectToken(),r={grantType:jU,audience:this.audience,requestedTokenType:HU,subjectToken:t,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[Wg]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(t){let r=t.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(t){return U(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(t){let r=new Date().getTime();return t.expiry_date?r>=t.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[Wg]:this.scopes}validateGoogleAPIsUrl(t,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+zg+"\\."+t+Fd),new RegExp("^"+t+Fd),new RegExp("^"+t+"\\."+zg+Fd),new RegExp("^"+zg+"\\-"+t+Fd)];for(let s of a)if(i.match(s))return!0;return!1}};Tn.BaseExternalAccountClient=Wb});var em=ce(qd=>{"use strict";var Qg,Xg,Jg;Object.defineProperty(qd,"__esModule",{value:!0});qd.IdentityPoolClient=void 0;var Zg=require("fs"),$g=require("util"),WU=hl(),zU=(0,$g.promisify)((Qg=Zg.readFile)!==null&&Qg!==void 0?Qg:()=>{}),QU=(0,$g.promisify)((Xg=Zg.realpath)!==null&&Xg!==void 0?Xg:()=>{}),XU=(0,$g.promisify)((Jg=Zg.lstat)!==null&&Jg!==void 0?Jg:()=>{}),zb=class extends WU.BaseExternalAccountClient{constructor(t,r){var n,i;super(t,r);if(this.file=t.credential_source.file,this.url=t.credential_source.url,this.headers=t.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=t.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=t.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return U(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(t,r,n){return U(this,null,function*(){try{if(t=yield QU(t),!(yield XU(t)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${t} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield zU(t,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(t,r,n,i){return U(this,null,function*(){let a={url:t,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};qd.IdentityPoolClient=zb});var Zb=ce(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.AwsRequestSigner=void 0;var Qb=Go(),Xb="AWS4-HMAC-SHA256",JU="aws4_request",Jb=class{constructor(t,r){this.getCredentials=t,this.region=r,this.crypto=(0,Qb.createCrypto)()}getRequestOptions(t){return U(this,null,function*(){if(!t.url)throw new Error('"url" is required in "amzOptions"');let r=typeof t.data=="object"?JSON.stringify(t.data):t.data,n=t.url,i=t.method||"GET",a=t.body||r,s=t.headers,l=yield this.getCredentials(),c=new URL(n),f=yield $U({crypto:this.crypto,host:c.host,canonicalUri:c.pathname,canonicalQuerystring:c.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:c.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};Gd.AwsRequestSigner=Jb;function Du(e,t,r){return U(this,null,function*(){return yield e.signWithHmacSha256(t,r)})}function ZU(e,t,r,n,i){return U(this,null,function*(){let a=yield Du(e,`AWS4${t}`,r),s=yield Du(e,a,n),l=yield Du(e,s,i);return yield Du(e,l,"aws4_request")})}function $U(e){return U(this,null,function*(){let t=e.additionalAmzHeaders||{},r=e.requestPayload||"",n=e.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(t).forEach(N=>{l[N.toLowerCase()]=t[N]}),e.securityCredentials.token&&(l["x-amz-security-token"]=e.securityCredentials.token);let c=Object.assign({host:e.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(c).sort();d.forEach(N=>{f+=`${N}:${c[N]}
`});let h=d.join(";"),g=yield e.crypto.sha256DigestHex(r),y=`${e.method}
${e.canonicalUri}
${e.canonicalQuerystring}
${f}
${h}
${g}`,m=`${s}/${e.region}/${n}/${JU}`,_=`${Xb}
${a}
${m}
`+(yield e.crypto.sha256DigestHex(y)),w=yield ZU(e.crypto,e.securityCredentials.secretAccessKey,s,e.region,n),E=yield Du(e.crypto,w,_),S=`${Xb} Credential=${e.securityCredentials.accessKeyId}/${m}, SignedHeaders=${h}, Signature=${(0,Qb.fromArrayBufferToHex)(E)}`;return{amzDate:l.date?void 0:a,authorizationHeader:S,canonicalQuerystring:e.canonicalQuerystring}})}});var tm=ce(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});Vd.AwsClient=void 0;var e8=Zb(),t8=hl(),$b=class extends t8.BaseExternalAccountClient{constructor(t,r){var n;super(t,r);this.environmentId=t.credential_source.environment_id,this.regionUrl=t.credential_source.region_url,this.securityCredentialsUrl=t.credential_source.url,this.regionalCredVerificationUrl=t.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=t.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return U(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new e8.AwsRequestSigner(()=>U(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let t=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},t.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:t.url,method:t.method,headers:r}))})}getImdsV2SessionToken(){return U(this,null,function*(){let t={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(t)).data})}getAwsRegion(t){return U(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:t},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(t){return U(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:t};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(t,r){return U(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${t}`,responseType:"json",headers:r})).data})}};Vd.AwsClient=$b});var rm=ce(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.ExternalAccountClient=void 0;var r8=hl(),n8=em(),i8=tm(),ex=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(t,r){var n;return t&&t.type===r8.EXTERNAL_ACCOUNT_TYPE?((n=t.credential_source)===null||n===void 0?void 0:n.environment_id)?new i8.AwsClient(t,r):new n8.IdentityPoolClient(t,r):null}};Kd.ExternalAccountClient=ex});var nx=ce(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.GoogleAuth=gl.CLOUD_SDK_CLIENT_ID=void 0;var a8=require("child_process"),Ou=require("fs"),nm=kf(),s8=require("os"),im=require("path"),o8=Go(),l8=lu(),u8=x0(),c8=S0(),f8=T0(),Hs=jg(),tx=Hg(),rx=rm(),pl=hl();gl.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var am=class{constructor(t){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,t=t||{},this._cachedProjectId=t.projectId||null,this.cachedCredential=t.authClient||null,this.keyFilename=t.keyFilename||t.keyFile,this.scopes=t.scopes,this.jsonContent=t.credentials||null,this.clientOptions=t.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(t){t.defaultServicePath=this.defaultServicePath,t.useJWTAccessWithScope=this.useJWTAccessWithScope,t.defaultScopes=this.defaultScopes}getProjectId(t){if(t)this.getProjectIdAsync().then(r=>t(null,r),t);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((t,r)=>U(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);t(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(t={},r){let n;if(typeof t=="function"?r=t:n=t,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return U(this,arguments,function*(t={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(t),r)return r instanceof Hs.JWT?r.scopes=this.scopes:r instanceof pl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(t),r)return r instanceof Hs.JWT?r.scopes=this.scopes:r instanceof pl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return t.scopes=this.getAnyScopes(),this.cachedCredential=new u8.Compute(t),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return U(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield nm.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(t){return U(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,t)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(t){return U(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=im.join(i,".config"))}return r&&(r=im.join(r,"gcloud","application_default_credentials.json"),Ou.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,t):null})}_getApplicationCredentialsFromFilePath(n){return U(this,arguments,function*(t,r={}){if(!t||t.length===0)throw new Error("The file path is invalid.");try{if(t=Ou.realpathSync(t),!Ou.lstatSync(t).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${t} does not exist, or it is not a file. ${a.message}`),a}let i=Ou.createReadStream(t);return this.fromStream(i,r)})}fromJSON(t,r){let n;if(!t)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},t.type==="authorized_user"?(n=new tx.UserRefreshClient(r),n.fromJSON(t)):t.type===pl.EXTERNAL_ACCOUNT_TYPE?(n=rx.ExternalAccountClient.fromJSON(t,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new Hs.JWT(r),this.setGapicJWTValues(n),n.fromJSON(t)),n}_cacheClientFromJSON(t,r){let n;return r=r||{},t.type==="authorized_user"?(n=new tx.UserRefreshClient(r),n.fromJSON(t)):t.type===pl.EXTERNAL_ACCOUNT_TYPE?(n=rx.ExternalAccountClient.fromJSON(t,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new Hs.JWT(r),this.setGapicJWTValues(n),n.fromJSON(t)),this.jsonContent=t,this.cachedCredential=n,n}fromStream(t,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(t,i).then(a=>n(null,a),n);else return this.fromStreamAsync(t,i)}fromStreamAsync(t,r){return new Promise((n,i)=>{if(!t)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";t.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new Hs.JWT(un(en({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(t,r){r=r||{};let n=new Hs.JWT(r);return n.fromAPIKey(t),n}_isWindows(){let t=s8.platform();return!!(t&&t.length>=3&&t.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return U(this,null,function*(){return new Promise(t=>{(0,a8.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;t(i);return}catch(i){}t(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return U(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let t=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return t?t.projectId:null})}getExternalAccountClientProjectId(){return U(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==pl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return U(this,null,function*(){try{return yield nm.project("project-id")}catch(t){return null}})}getCredentials(t){if(t)this.getCredentialsAsync().then(r=>t(null,r),t);else return this.getCredentialsAsync()}getCredentialsAsync(){return U(this,null,function*(){let t=yield this.getClient();if(t instanceof pl.BaseExternalAccountClient){let i=t.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield nm.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return U(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let t=im.resolve(this.keyFilename),r=Ou.createReadStream(t);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(t){return U(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new c8.IdTokenClient({targetAudience:t,idTokenProvider:r})})}getAccessToken(){return U(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(t){return U(this,null,function*(){return(yield this.getClient()).getRequestHeaders(t)})}authorizeRequest(t){return U(this,null,function*(){t=t||{};let r=t.url||t.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return t.headers=Object.assign(t.headers||{},i),t})}request(t){return U(this,null,function*(){return(yield this.getClient()).request(t)})}getEnv(){return(0,f8.getEnv)()}sign(t){return U(this,null,function*(){let r=yield this.getClient(),n=(0,o8.createCrypto)();if(r instanceof Hs.JWT&&r.key)return yield n.sign(r.key,t);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,t)})}signBlob(t,r,n){return U(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:t.encodeBase64StringUtf8(n)}})).data.signedBlob})}};gl.GoogleAuth=am;am.DefaultTransporter=l8.DefaultTransporter});var ax=ce(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.IAMAuth=void 0;var ix=class{constructor(t,r){this.selector=t,this.token=r,this.selector=t,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};jd.IAMAuth=ix});var lx=ce(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.Impersonated=void 0;var sx=Bs(),d8=Fo(),ox=class extends sx.OAuth2Client{constructor(t={}){var r,n,i,a,s,l;super(t);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=t.sourceClient)!==null&&r!==void 0?r:new sx.OAuth2Client,this.targetPrincipal=(n=t.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=t.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=t.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=t.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=t.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(t){return U(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let c="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${c}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(c){if(!(c instanceof Error))throw c;let f=0,d="";throw c instanceof d8.GaxiosError&&(f=(i=(n=(r=c==null?void 0:c.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=c==null?void 0:c.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(c.message=`${f}: unable to impersonate: ${d}`,c):(c.message=`unable to impersonate: ${c}`,c)}})}};Hd.Impersonated=ox});var cx=ce(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.DownscopedClient=xi.EXPIRATION_TIME_OFFSET=xi.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var h8=require("stream"),p8=uu(),g8=Yg(),m8="urn:ietf:params:oauth:grant-type:token-exchange",y8="urn:ietf:params:oauth:token-type:access_token",v8="urn:ietf:params:oauth:token-type:access_token",_8="https://sts.googleapis.com/v1/token";xi.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;xi.EXPIRATION_TIME_OFFSET=5*60*1e3;var ux=class extends p8.AuthClient{constructor(t,r,n,i){super();if(this.authClient=t,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>xi.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${xi.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new g8.StsCredentials(_8),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=xi.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(t){if(!t.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(t),this.cachedDownscopedAccessToken=t}getAccessToken(){return U(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return U(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(t,r){if(r)this.requestAsync(t).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(t)}requestAsync(t,r=!1){return U(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();t.headers=t.headers||{},i&&i["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(t.headers.Authorization=i.Authorization),n=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof h8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(t,!0)}throw i}return n})}refreshAccessTokenAsync(){return U(this,null,function*(){var t;let r=(yield this.authClient.getAccessToken()).token,n={grantType:m8,requestedTokenType:y8,subjectToken:r,subjectTokenType:v8},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((t=this.authClient.credentials)===null||t===void 0?void 0:t.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(t){let r=new Date().getTime();return t.expiry_date?r>=t.expiry_date-this.eagerRefreshThresholdMillis:!1}};xi.DownscopedClient=ux});var hx=ce(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.GoogleAuth=at.auth=at.DefaultTransporter=at.DownscopedClient=at.BaseExternalAccountClient=at.ExternalAccountClient=at.IdentityPoolClient=at.AwsClient=at.UserRefreshClient=at.LoginTicket=at.OAuth2Client=at.CodeChallengeMethod=at.Impersonated=at.JWT=at.JWTAccess=at.IdTokenClient=at.IAMAuth=at.GCPEnv=at.Compute=at.AuthClient=void 0;var fx=nx();Object.defineProperty(at,"GoogleAuth",{enumerable:!0,get:function(){return fx.GoogleAuth}});var w8=uu();Object.defineProperty(at,"AuthClient",{enumerable:!0,get:function(){return w8.AuthClient}});var E8=x0();Object.defineProperty(at,"Compute",{enumerable:!0,get:function(){return E8.Compute}});var C8=T0();Object.defineProperty(at,"GCPEnv",{enumerable:!0,get:function(){return C8.GCPEnv}});var b8=ax();Object.defineProperty(at,"IAMAuth",{enumerable:!0,get:function(){return b8.IAMAuth}});var x8=S0();Object.defineProperty(at,"IdTokenClient",{enumerable:!0,get:function(){return x8.IdTokenClient}});var S8=Kg();Object.defineProperty(at,"JWTAccess",{enumerable:!0,get:function(){return S8.JWTAccess}});var T8=jg();Object.defineProperty(at,"JWT",{enumerable:!0,get:function(){return T8.JWT}});var A8=lx();Object.defineProperty(at,"Impersonated",{enumerable:!0,get:function(){return A8.Impersonated}});var dx=Bs();Object.defineProperty(at,"CodeChallengeMethod",{enumerable:!0,get:function(){return dx.CodeChallengeMethod}});Object.defineProperty(at,"OAuth2Client",{enumerable:!0,get:function(){return dx.OAuth2Client}});var I8=C0();Object.defineProperty(at,"LoginTicket",{enumerable:!0,get:function(){return I8.LoginTicket}});var k8=Hg();Object.defineProperty(at,"UserRefreshClient",{enumerable:!0,get:function(){return k8.UserRefreshClient}});var N8=tm();Object.defineProperty(at,"AwsClient",{enumerable:!0,get:function(){return N8.AwsClient}});var R8=em();Object.defineProperty(at,"IdentityPoolClient",{enumerable:!0,get:function(){return R8.IdentityPoolClient}});var B8=rm();Object.defineProperty(at,"ExternalAccountClient",{enumerable:!0,get:function(){return B8.ExternalAccountClient}});var D8=hl();Object.defineProperty(at,"BaseExternalAccountClient",{enumerable:!0,get:function(){return D8.BaseExternalAccountClient}});var O8=cx();Object.defineProperty(at,"DownscopedClient",{enumerable:!0,get:function(){return O8.DownscopedClient}});var L8=lu();Object.defineProperty(at,"DefaultTransporter",{enumerable:!0,get:function(){return L8.DefaultTransporter}});var P8=new fx.GoogleAuth;at.auth=P8});var om=ce((P7,gx)=>{"use strict";var px=require("fs"),sm;function M8(){try{return px.statSync("/.dockerenv"),!0}catch(e){return!1}}function U8(){try{return px.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}gx.exports=()=>(sm===void 0&&(sm=M8()||U8()),sm)});var vx=ce((M7,lm)=>{"use strict";var F8=require("os"),q8=require("fs"),mx=om(),yx=()=>{if(process.platform!=="linux")return!1;if(F8.release().toLowerCase().includes("microsoft"))return!mx();try{return q8.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!mx():!1}catch(e){return!1}};process.env.__IS_WSL_TEST__?lm.exports=yx:lm.exports=yx()});var wx=ce((U7,_x)=>{"use strict";_x.exports=(e,t,r)=>{let n=i=>Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),e}});var Ax=ce((hm,Tx)=>{var G8=require("path"),V8=require("child_process"),{promises:um,constants:Ex}=require("fs"),Yd=vx(),K8=om(),cm=wx(),Cx=G8.join(__dirname,"xdg-open"),{platform:ml,arch:bx}=process,j8=(()=>{let e="/mnt/",t;return function(){return U(this,null,function*(){if(t)return t;let r="/etc/wsl.conf",n=!1;try{yield um.access(r,Ex.F_OK),n=!0}catch(s){}if(!n)return e;let i=yield um.readFile(r,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?(t=a.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e})}})(),xx=(e,t)=>U(hm,null,function*(){let r;for(let n of e)try{return yield t(n)}catch(i){r=i}throw r}),Wd=e=>U(hm,null,function*(){if(e=en({wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1},e),Array.isArray(e.app))return xx(e.app,l=>Wd(un(en({},e),{app:l})));let{name:t,arguments:r=[]}=e.app||{};if(r=[...r],Array.isArray(t))return xx(t,l=>Wd(un(en({},e),{app:{name:l,arguments:r}})));let n,i=[],a={};if(ml==="darwin")n="open",e.wait&&i.push("--wait-apps"),e.background&&i.push("--background"),e.newInstance&&i.push("--new"),t&&i.push("-a",t);else if(ml==="win32"||Yd&&!K8()){let l=yield j8();n=Yd?`${l}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),Yd||(a.windowsVerbatimArguments=!0);let c=["Start"];e.wait&&c.push("-Wait"),t?(c.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&r.unshift(e.target)):e.target&&c.push(`"${e.target}"`),r.length>0&&(r=r.map(f=>`"\`"${f}\`""`),c.push(r.join(","))),e.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(t)n=t;else{let l=!__dirname||__dirname==="/",c=!1;try{yield um.access(Cx,Ex.X_OK),c=!0}catch(d){}n=process.versions.electron||ml==="android"||l||!c?"xdg-open":Cx}r.length>0&&i.push(...r),e.wait||(a.stdio="ignore",a.detached=!0)}e.target&&i.push(e.target),ml==="darwin"&&r.length>0&&i.push("--args",...r);let s=V8.spawn(n,i,a);return e.wait?new Promise((l,c)=>{s.once("error",c),s.once("close",f=>{if(e.allowNonzeroExitCode&&f>0){c(new Error(`Exited with code ${f}`));return}l(s)})}):(s.unref(),s)}),fm=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return Wd(un(en({},t),{target:e}))},H8=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=t||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return Wd(un(en({},t),{app:{name:e,arguments:r}}))};function Sx(e){if(typeof e=="string"||Array.isArray(e))return e;let{[bx]:t}=e;if(!t)throw new Error(`${bx} is not supported`);return t}function dm({[ml]:e},{wsl:t}){if(t&&Yd)return Sx(t);if(!e)throw new Error(`${ml} is not supported`);return Sx(e)}var zd={};cm(zd,"chrome",()=>dm({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));cm(zd,"firefox",()=>dm({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));cm(zd,"edge",()=>dm({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));fm.apps=zd;fm.openApp=H8;Tx.exports=fm});var kx=ce((F7,Ix)=>{Ix.exports=Y8;function Y8(e){var t={};e.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;t[n]=r,r.on("close",function(){delete t[n]})}),e.destroy=function(r){e.close(r);for(var n in t)t[n].destroy()}}});var to=ce((Cl,Hu)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,g=1,y=2,m=1,_=2,w=4,E=8,S=16,N=32,R=64,D=128,O=256,te=512,V=30,M="...",le=800,se=16,_e=1,Oe=2,Ne=3,Se=1/0,Ee=9007199254740991,ve=17976931348623157e292,ze=0/0,Ve=4294967295,vt=Ve-1,pt=Ve>>>1,Qe=[["ary",D],["bind",m],["bindKey",_],["curry",E],["curryRight",S],["flip",te],["partial",N],["partialRight",R],["rearg",O]],fe="[object Arguments]",gt="[object Array]",tt="[object AsyncFunction]",_t="[object Boolean]",Ze="[object Date]",Ce="[object DOMException]",A="[object Error]",B="[object Function]",L="[object GeneratorFunction]",Y="[object Map]",G="[object Number]",Q="[object Null]",J="[object Object]",H="[object Promise]",X="[object Proxy]",ne="[object RegExp]",Z="[object Set]",de="[object String]",Me="[object Symbol]",Fe="[object Undefined]",ot="[object WeakMap]",jt="[object WeakSet]",Ht="[object ArrayBuffer]",rt="[object DataView]",kt="[object Float32Array]",cr="[object Float64Array]",Ba="[object Int8Array]",ms="[object Int16Array]",ys="[object Int32Array]",_n="[object Uint8Array]",na="[object Uint8ClampedArray]",Jr="[object Uint16Array]",Ar="[object Uint32Array]",ar=/\b__p \+= '';/g,iI=/\b(__p \+=) '' \+/g,aI=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gy=/&(?:amp|lt|gt|quot|#39);/g,my=/[&<>"']/g,sI=RegExp(gy.source),oI=RegExp(my.source),lI=/<%-([\s\S]+?)%>/g,uI=/<%([\s\S]+?)%>/g,yy=/<%=([\s\S]+?)%>/g,cI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fI=/^\w*$/,dI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kh=/[\\^$.*+?()[\]{}|]/g,hI=RegExp(Kh.source),jh=/^\s+/,pI=/\s/,gI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mI=/\{\n\/\* \[wrapped with (.+)\] \*/,yI=/,? & /,vI=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_I=/[()=,{}\[\]\/\s]/,wI=/\\(\\)?/g,EI=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vy=/\w*$/,CI=/^[-+]0x[0-9a-f]+$/i,bI=/^0b[01]+$/i,xI=/^\[object .+?Constructor\]$/,SI=/^0o[0-7]+$/i,TI=/^(?:0|[1-9]\d*)$/,AI=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xc=/($^)/,II=/['\n\r\u2028\u2029\\]/g,Sc="\\ud800-\\udfff",kI="\\u0300-\\u036f",NI="\\ufe20-\\ufe2f",RI="\\u20d0-\\u20ff",_y=kI+NI+RI,wy="\\u2700-\\u27bf",Ey="a-z\\xdf-\\xf6\\xf8-\\xff",BI="\\xac\\xb1\\xd7\\xf7",DI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",OI="\\u2000-\\u206f",LI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cy="A-Z\\xc0-\\xd6\\xd8-\\xde",by="\\ufe0e\\ufe0f",xy=BI+DI+OI+LI,Hh="['\u2019]",PI="["+Sc+"]",Sy="["+xy+"]",Tc="["+_y+"]",Ty="\\d+",MI="["+wy+"]",Ay="["+Ey+"]",Iy="[^"+Sc+xy+Ty+wy+Ey+Cy+"]",Yh="\\ud83c[\\udffb-\\udfff]",UI="(?:"+Tc+"|"+Yh+")",ky="[^"+Sc+"]",Wh="(?:\\ud83c[\\udde6-\\uddff]){2}",zh="[\\ud800-\\udbff][\\udc00-\\udfff]",wo="["+Cy+"]",Ny="\\u200d",Ry="(?:"+Ay+"|"+Iy+")",FI="(?:"+wo+"|"+Iy+")",By="(?:"+Hh+"(?:d|ll|m|re|s|t|ve))?",Dy="(?:"+Hh+"(?:D|LL|M|RE|S|T|VE))?",Oy=UI+"?",Ly="["+by+"]?",qI="(?:"+Ny+"(?:"+[ky,Wh,zh].join("|")+")"+Ly+Oy+")*",GI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",VI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Py=Ly+Oy+qI,KI="(?:"+[MI,Wh,zh].join("|")+")"+Py,jI="(?:"+[ky+Tc+"?",Tc,Wh,zh,PI].join("|")+")",HI=RegExp(Hh,"g"),YI=RegExp(Tc,"g"),Qh=RegExp(Yh+"(?="+Yh+")|"+jI+Py,"g"),WI=RegExp([wo+"?"+Ay+"+"+By+"(?="+[Sy,wo,"$"].join("|")+")",FI+"+"+Dy+"(?="+[Sy,wo+Ry,"$"].join("|")+")",wo+"?"+Ry+"+"+By,wo+"+"+Dy,VI,GI,Ty,KI].join("|"),"g"),zI=RegExp("["+Ny+Sc+_y+by+"]"),QI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,XI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],JI=-1,rr={};rr[kt]=rr[cr]=rr[Ba]=rr[ms]=rr[ys]=rr[_n]=rr[na]=rr[Jr]=rr[Ar]=!0,rr[fe]=rr[gt]=rr[Ht]=rr[_t]=rr[rt]=rr[Ze]=rr[A]=rr[B]=rr[Y]=rr[G]=rr[J]=rr[ne]=rr[Z]=rr[de]=rr[ot]=!1;var Xt={};Xt[fe]=Xt[gt]=Xt[Ht]=Xt[rt]=Xt[_t]=Xt[Ze]=Xt[kt]=Xt[cr]=Xt[Ba]=Xt[ms]=Xt[ys]=Xt[Y]=Xt[G]=Xt[J]=Xt[ne]=Xt[Z]=Xt[de]=Xt[Me]=Xt[_n]=Xt[na]=Xt[Jr]=Xt[Ar]=!0,Xt[A]=Xt[B]=Xt[ot]=!1;var ZI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ek={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tk={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rk=parseFloat,nk=parseInt,My=typeof global=="object"&&global&&global.Object===Object&&global,ik=typeof self=="object"&&self&&self.Object===Object&&self,Dr=My||ik||Function("return this")(),Xh=typeof Cl=="object"&&Cl&&!Cl.nodeType&&Cl,vs=Xh&&typeof Hu=="object"&&Hu&&!Hu.nodeType&&Hu,Uy=vs&&vs.exports===Xh,Jh=Uy&&My.process,Kn=function(){try{var W=vs&&vs.require&&vs.require("util").types;return W||Jh&&Jh.binding&&Jh.binding("util")}catch(ue){}}(),Fy=Kn&&Kn.isArrayBuffer,qy=Kn&&Kn.isDate,Gy=Kn&&Kn.isMap,Vy=Kn&&Kn.isRegExp,Ky=Kn&&Kn.isSet,jy=Kn&&Kn.isTypedArray;function Rn(W,ue,ie){switch(ie.length){case 0:return W.call(ue);case 1:return W.call(ue,ie[0]);case 2:return W.call(ue,ie[0],ie[1]);case 3:return W.call(ue,ie[0],ie[1],ie[2])}return W.apply(ue,ie)}function ak(W,ue,ie,Le){for(var et=-1,Ut=W==null?0:W.length;++et<Ut;){var Ir=W[et];ue(Le,Ir,ie(Ir),W)}return Le}function jn(W,ue){for(var ie=-1,Le=W==null?0:W.length;++ie<Le&&ue(W[ie],ie,W)!==!1;);return W}function sk(W,ue){for(var ie=W==null?0:W.length;ie--&&ue(W[ie],ie,W)!==!1;);return W}function Hy(W,ue){for(var ie=-1,Le=W==null?0:W.length;++ie<Le;)if(!ue(W[ie],ie,W))return!1;return!0}function Da(W,ue){for(var ie=-1,Le=W==null?0:W.length,et=0,Ut=[];++ie<Le;){var Ir=W[ie];ue(Ir,ie,W)&&(Ut[et++]=Ir)}return Ut}function Ac(W,ue){var ie=W==null?0:W.length;return!!ie&&Eo(W,ue,0)>-1}function Zh(W,ue,ie){for(var Le=-1,et=W==null?0:W.length;++Le<et;)if(ie(ue,W[Le]))return!0;return!1}function sr(W,ue){for(var ie=-1,Le=W==null?0:W.length,et=Array(Le);++ie<Le;)et[ie]=ue(W[ie],ie,W);return et}function Oa(W,ue){for(var ie=-1,Le=ue.length,et=W.length;++ie<Le;)W[et+ie]=ue[ie];return W}function $h(W,ue,ie,Le){var et=-1,Ut=W==null?0:W.length;for(Le&&Ut&&(ie=W[++et]);++et<Ut;)ie=ue(ie,W[et],et,W);return ie}function ok(W,ue,ie,Le){var et=W==null?0:W.length;for(Le&&et&&(ie=W[--et]);et--;)ie=ue(ie,W[et],et,W);return ie}function ep(W,ue){for(var ie=-1,Le=W==null?0:W.length;++ie<Le;)if(ue(W[ie],ie,W))return!0;return!1}var lk=tp("length");function uk(W){return W.split("")}function ck(W){return W.match(vI)||[]}function Yy(W,ue,ie){var Le;return ie(W,function(et,Ut,Ir){if(ue(et,Ut,Ir))return Le=Ut,!1}),Le}function Ic(W,ue,ie,Le){for(var et=W.length,Ut=ie+(Le?1:-1);Le?Ut--:++Ut<et;)if(ue(W[Ut],Ut,W))return Ut;return-1}function Eo(W,ue,ie){return ue===ue?Ck(W,ue,ie):Ic(W,Wy,ie)}function fk(W,ue,ie,Le){for(var et=ie-1,Ut=W.length;++et<Ut;)if(Le(W[et],ue))return et;return-1}function Wy(W){return W!==W}function zy(W,ue){var ie=W==null?0:W.length;return ie?np(W,ue)/ie:ze}function tp(W){return function(ue){return ue==null?e:ue[W]}}function rp(W){return function(ue){return W==null?e:W[ue]}}function Qy(W,ue,ie,Le,et){return et(W,function(Ut,Ir,zt){ie=Le?(Le=!1,Ut):ue(ie,Ut,Ir,zt)}),ie}function dk(W,ue){var ie=W.length;for(W.sort(ue);ie--;)W[ie]=W[ie].value;return W}function np(W,ue){for(var ie,Le=-1,et=W.length;++Le<et;){var Ut=ue(W[Le]);Ut!==e&&(ie=ie===e?Ut:ie+Ut)}return ie}function ip(W,ue){for(var ie=-1,Le=Array(W);++ie<W;)Le[ie]=ue(ie);return Le}function hk(W,ue){return sr(ue,function(ie){return[ie,W[ie]]})}function Xy(W){return W&&W.slice(0,ev(W)+1).replace(jh,"")}function Bn(W){return function(ue){return W(ue)}}function ap(W,ue){return sr(ue,function(ie){return W[ie]})}function ql(W,ue){return W.has(ue)}function Jy(W,ue){for(var ie=-1,Le=W.length;++ie<Le&&Eo(ue,W[ie],0)>-1;);return ie}function Zy(W,ue){for(var ie=W.length;ie--&&Eo(ue,W[ie],0)>-1;);return ie}function pk(W,ue){for(var ie=W.length,Le=0;ie--;)W[ie]===ue&&++Le;return Le}var gk=rp(ZI),mk=rp($I);function yk(W){return"\\"+tk[W]}function vk(W,ue){return W==null?e:W[ue]}function Co(W){return zI.test(W)}function _k(W){return QI.test(W)}function wk(W){for(var ue,ie=[];!(ue=W.next()).done;)ie.push(ue.value);return ie}function sp(W){var ue=-1,ie=Array(W.size);return W.forEach(function(Le,et){ie[++ue]=[et,Le]}),ie}function $y(W,ue){return function(ie){return W(ue(ie))}}function La(W,ue){for(var ie=-1,Le=W.length,et=0,Ut=[];++ie<Le;){var Ir=W[ie];(Ir===ue||Ir===c)&&(W[ie]=c,Ut[et++]=ie)}return Ut}function kc(W){var ue=-1,ie=Array(W.size);return W.forEach(function(Le){ie[++ue]=Le}),ie}function Ek(W){var ue=-1,ie=Array(W.size);return W.forEach(function(Le){ie[++ue]=[Le,Le]}),ie}function Ck(W,ue,ie){for(var Le=ie-1,et=W.length;++Le<et;)if(W[Le]===ue)return Le;return-1}function bk(W,ue,ie){for(var Le=ie+1;Le--;)if(W[Le]===ue)return Le;return Le}function bo(W){return Co(W)?Sk(W):lk(W)}function pi(W){return Co(W)?Tk(W):uk(W)}function ev(W){for(var ue=W.length;ue--&&pI.test(W.charAt(ue)););return ue}var xk=rp(ek);function Sk(W){for(var ue=Qh.lastIndex=0;Qh.test(W);)++ue;return ue}function Tk(W){return W.match(Qh)||[]}function Ak(W){return W.match(WI)||[]}var Ik=function W(ue){ue=ue==null?Dr:Pa.defaults(Dr.Object(),ue,Pa.pick(Dr,XI));var ie=ue.Array,Le=ue.Date,et=ue.Error,Ut=ue.Function,Ir=ue.Math,zt=ue.Object,op=ue.RegExp,kk=ue.String,Hn=ue.TypeError,Nc=ie.prototype,Nk=Ut.prototype,xo=zt.prototype,Rc=ue["__core-js_shared__"],Bc=Nk.toString,Vt=xo.hasOwnProperty,Rk=0,tv=function(){var o=/[^.]+$/.exec(Rc&&Rc.keys&&Rc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Dc=xo.toString,Bk=Bc.call(zt),Dk=Dr._,Ok=op("^"+Bc.call(Vt).replace(Kh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oc=Uy?ue.Buffer:e,Ma=ue.Symbol,Lc=ue.Uint8Array,rv=Oc?Oc.allocUnsafe:e,Pc=$y(zt.getPrototypeOf,zt),nv=zt.create,iv=xo.propertyIsEnumerable,Mc=Nc.splice,av=Ma?Ma.isConcatSpreadable:e,Gl=Ma?Ma.iterator:e,_s=Ma?Ma.toStringTag:e,Uc=function(){try{var o=xs(zt,"defineProperty");return o({},"",{}),o}catch(u){}}(),Lk=ue.clearTimeout!==Dr.clearTimeout&&ue.clearTimeout,Pk=Le&&Le.now!==Dr.Date.now&&Le.now,Mk=ue.setTimeout!==Dr.setTimeout&&ue.setTimeout,Fc=Ir.ceil,qc=Ir.floor,lp=zt.getOwnPropertySymbols,Uk=Oc?Oc.isBuffer:e,sv=ue.isFinite,Fk=Nc.join,qk=$y(zt.keys,zt),kr=Ir.max,Zr=Ir.min,Gk=Le.now,Vk=ue.parseInt,ov=Ir.random,Kk=Nc.reverse,up=xs(ue,"DataView"),Vl=xs(ue,"Map"),cp=xs(ue,"Promise"),So=xs(ue,"Set"),Kl=xs(ue,"WeakMap"),jl=xs(zt,"create"),Gc=Kl&&new Kl,To={},jk=Ss(up),Hk=Ss(Vl),Yk=Ss(cp),Wk=Ss(So),zk=Ss(Kl),Vc=Ma?Ma.prototype:e,Hl=Vc?Vc.valueOf:e,lv=Vc?Vc.toString:e;function I(o){if(gr(o)&&!nt(o)&&!(o instanceof Tt)){if(o instanceof Yn)return o;if(Vt.call(o,"__wrapped__"))return u1(o)}return new Yn(o)}var Ao=function(){function o(){}return function(u){if(!fr(u))return{};if(nv)return nv(u);o.prototype=u;var p=new o;return o.prototype=e,p}}();function Kc(){}function Yn(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=e}I.templateSettings={escape:lI,evaluate:uI,interpolate:yy,variable:"",imports:{_:I}},I.prototype=Kc.prototype,I.prototype.constructor=I,Yn.prototype=Ao(Kc.prototype),Yn.prototype.constructor=Yn;function Tt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function Qk(){var o=new Tt(this.__wrapped__);return o.__actions__=wn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=wn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=wn(this.__views__),o}function Xk(){if(this.__filtered__){var o=new Tt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function Jk(){var o=this.__wrapped__.value(),u=this.__dir__,p=nt(o),v=u<0,C=p?o.length:0,k=uR(0,C,this.__views__),P=k.start,q=k.end,z=q-P,he=v?q:P-1,pe=this.__iteratees__,ye=pe.length,Ie=0,Ue=Zr(z,this.__takeCount__);if(!p||!v&&C==z&&Ue==z)return Bv(o,this.__actions__);var je=[];e:for(;z--&&Ie<Ue;){he+=u;for(var ft=-1,He=o[he];++ft<ye;){var wt=pe[ft],Nt=wt.iteratee,Ln=wt.type,ln=Nt(He);if(Ln==Oe)He=ln;else if(!ln){if(Ln==_e)continue e;break e}}je[Ie++]=He}return je}Tt.prototype=Ao(Kc.prototype),Tt.prototype.constructor=Tt;function ws(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var v=o[u];this.set(v[0],v[1])}}function Zk(){this.__data__=jl?jl(null):{},this.size=0}function $k(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function eN(o){var u=this.__data__;if(jl){var p=u[o];return p===s?e:p}return Vt.call(u,o)?u[o]:e}function tN(o){var u=this.__data__;return jl?u[o]!==e:Vt.call(u,o)}function rN(o,u){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=jl&&u===e?s:u,this}ws.prototype.clear=Zk,ws.prototype.delete=$k,ws.prototype.get=eN,ws.prototype.has=tN,ws.prototype.set=rN;function ia(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var v=o[u];this.set(v[0],v[1])}}function nN(){this.__data__=[],this.size=0}function iN(o){var u=this.__data__,p=jc(u,o);if(p<0)return!1;var v=u.length-1;return p==v?u.pop():Mc.call(u,p,1),--this.size,!0}function aN(o){var u=this.__data__,p=jc(u,o);return p<0?e:u[p][1]}function sN(o){return jc(this.__data__,o)>-1}function oN(o,u){var p=this.__data__,v=jc(p,o);return v<0?(++this.size,p.push([o,u])):p[v][1]=u,this}ia.prototype.clear=nN,ia.prototype.delete=iN,ia.prototype.get=aN,ia.prototype.has=sN,ia.prototype.set=oN;function aa(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var v=o[u];this.set(v[0],v[1])}}function lN(){this.size=0,this.__data__={hash:new ws,map:new(Vl||ia),string:new ws}}function uN(o){var u=rf(this,o).delete(o);return this.size-=u?1:0,u}function cN(o){return rf(this,o).get(o)}function fN(o){return rf(this,o).has(o)}function dN(o,u){var p=rf(this,o),v=p.size;return p.set(o,u),this.size+=p.size==v?0:1,this}aa.prototype.clear=lN,aa.prototype.delete=uN,aa.prototype.get=cN,aa.prototype.has=fN,aa.prototype.set=dN;function Es(o){var u=-1,p=o==null?0:o.length;for(this.__data__=new aa;++u<p;)this.add(o[u])}function hN(o){return this.__data__.set(o,s),this}function pN(o){return this.__data__.has(o)}Es.prototype.add=Es.prototype.push=hN,Es.prototype.has=pN;function gi(o){var u=this.__data__=new ia(o);this.size=u.size}function gN(){this.__data__=new ia,this.size=0}function mN(o){var u=this.__data__,p=u.delete(o);return this.size=u.size,p}function yN(o){return this.__data__.get(o)}function vN(o){return this.__data__.has(o)}function _N(o,u){var p=this.__data__;if(p instanceof ia){var v=p.__data__;if(!Vl||v.length<r-1)return v.push([o,u]),this.size=++p.size,this;p=this.__data__=new aa(v)}return p.set(o,u),this.size=p.size,this}gi.prototype.clear=gN,gi.prototype.delete=mN,gi.prototype.get=yN,gi.prototype.has=vN,gi.prototype.set=_N;function uv(o,u){var p=nt(o),v=!p&&Ts(o),C=!p&&!v&&Va(o),k=!p&&!v&&!C&&Ro(o),P=p||v||C||k,q=P?ip(o.length,kk):[],z=q.length;for(var he in o)(u||Vt.call(o,he))&&!(P&&(he=="length"||C&&(he=="offset"||he=="parent")||k&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||ua(he,z)))&&q.push(he);return q}function cv(o){var u=o.length;return u?o[Ep(0,u-1)]:e}function wN(o,u){return nf(wn(o),Cs(u,0,o.length))}function EN(o){return nf(wn(o))}function fp(o,u,p){(p!==e&&!mi(o[u],p)||p===e&&!(u in o))&&sa(o,u,p)}function Yl(o,u,p){var v=o[u];(!(Vt.call(o,u)&&mi(v,p))||p===e&&!(u in o))&&sa(o,u,p)}function jc(o,u){for(var p=o.length;p--;)if(mi(o[p][0],u))return p;return-1}function CN(o,u,p,v){return Ua(o,function(C,k,P){u(v,C,p(C),P)}),v}function fv(o,u){return o&&Oi(u,Or(u),o)}function bN(o,u){return o&&Oi(u,Cn(u),o)}function sa(o,u,p){u=="__proto__"&&Uc?Uc(o,u,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[u]=p}function dp(o,u){for(var p=-1,v=u.length,C=ie(v),k=o==null;++p<v;)C[p]=k?e:Yp(o,u[p]);return C}function Cs(o,u,p){return o===o&&(p!==e&&(o=o<=p?o:p),u!==e&&(o=o>=u?o:u)),o}function Wn(o,u,p,v,C,k){var P,q=u&f,z=u&d,he=u&h;if(p&&(P=C?p(o,v,C,k):p(o)),P!==e)return P;if(!fr(o))return o;var pe=nt(o);if(pe){if(P=fR(o),!q)return wn(o,P)}else{var ye=$r(o),Ie=ye==B||ye==L;if(Va(o))return Lv(o,q);if(ye==J||ye==fe||Ie&&!C){if(P=z||Ie?{}:e1(o),!q)return z?eR(o,bN(P,o)):$N(o,fv(P,o))}else{if(!Xt[ye])return C?o:{};P=dR(o,ye,q)}}k||(k=new gi);var Ue=k.get(o);if(Ue)return Ue;k.set(o,P),k1(o)?o.forEach(function(He){P.add(Wn(He,u,p,He,o,k))}):A1(o)&&o.forEach(function(He,wt){P.set(wt,Wn(He,u,p,wt,o,k))});var je=he?z?Bp:Rp:z?Cn:Or,ft=pe?e:je(o);return jn(ft||o,function(He,wt){ft&&(wt=He,He=o[wt]),Yl(P,wt,Wn(He,u,p,wt,o,k))}),P}function xN(o){var u=Or(o);return function(p){return dv(p,o,u)}}function dv(o,u,p){var v=p.length;if(o==null)return!v;for(o=zt(o);v--;){var C=p[v],k=u[C],P=o[C];if(P===e&&!(C in o)||!k(P))return!1}return!0}function hv(o,u,p){if(typeof o!="function")throw new Hn(i);return $l(function(){o.apply(e,p)},u)}function Wl(o,u,p,v){var C=-1,k=Ac,P=!0,q=o.length,z=[],he=u.length;if(!q)return z;p&&(u=sr(u,Bn(p))),v?(k=Zh,P=!1):u.length>=r&&(k=ql,P=!1,u=new Es(u));e:for(;++C<q;){var pe=o[C],ye=p==null?pe:p(pe);if(pe=v||pe!==0?pe:0,P&&ye===ye){for(var Ie=he;Ie--;)if(u[Ie]===ye)continue e;z.push(pe)}else k(u,ye,v)||z.push(pe)}return z}var Ua=qv(Di),pv=qv(pp,!0);function SN(o,u){var p=!0;return Ua(o,function(v,C,k){return p=!!u(v,C,k),p}),p}function Hc(o,u,p){for(var v=-1,C=o.length;++v<C;){var k=o[v],P=u(k);if(P!=null&&(q===e?P===P&&!On(P):p(P,q)))var q=P,z=k}return z}function TN(o,u,p,v){var C=o.length;for(p=lt(p),p<0&&(p=-p>C?0:C+p),v=v===e||v>C?C:lt(v),v<0&&(v+=C),v=p>v?0:R1(v);p<v;)o[p++]=u;return o}function gv(o,u){var p=[];return Ua(o,function(v,C,k){u(v,C,k)&&p.push(v)}),p}function jr(o,u,p,v,C){var k=-1,P=o.length;for(p||(p=pR),C||(C=[]);++k<P;){var q=o[k];u>0&&p(q)?u>1?jr(q,u-1,p,v,C):Oa(C,q):v||(C[C.length]=q)}return C}var hp=Gv(),mv=Gv(!0);function Di(o,u){return o&&hp(o,u,Or)}function pp(o,u){return o&&mv(o,u,Or)}function Yc(o,u){return Da(u,function(p){return ca(o[p])})}function bs(o,u){u=qa(u,o);for(var p=0,v=u.length;o!=null&&p<v;)o=o[Li(u[p++])];return p&&p==v?o:e}function yv(o,u,p){var v=u(o);return nt(o)?v:Oa(v,p(o))}function sn(o){return o==null?o===e?Fe:Q:_s&&_s in zt(o)?lR(o):ER(o)}function gp(o,u){return o>u}function AN(o,u){return o!=null&&Vt.call(o,u)}function IN(o,u){return o!=null&&u in zt(o)}function kN(o,u,p){return o>=Zr(u,p)&&o<kr(u,p)}function mp(o,u,p){for(var v=p?Zh:Ac,C=o[0].length,k=o.length,P=k,q=ie(k),z=1/0,he=[];P--;){var pe=o[P];P&&u&&(pe=sr(pe,Bn(u))),z=Zr(pe.length,z),q[P]=!p&&(u||C>=120&&pe.length>=120)?new Es(P&&pe):e}pe=o[0];var ye=-1,Ie=q[0];e:for(;++ye<C&&he.length<z;){var Ue=pe[ye],je=u?u(Ue):Ue;if(Ue=p||Ue!==0?Ue:0,!(Ie?ql(Ie,je):v(he,je,p))){for(P=k;--P;){var ft=q[P];if(!(ft?ql(ft,je):v(o[P],je,p)))continue e}Ie&&Ie.push(je),he.push(Ue)}}return he}function NN(o,u,p,v){return Di(o,function(C,k,P){u(v,p(C),k,P)}),v}function zl(o,u,p){u=qa(u,o),o=i1(o,u);var v=o==null?o:o[Li(Qn(u))];return v==null?e:Rn(v,o,p)}function vv(o){return gr(o)&&sn(o)==fe}function RN(o){return gr(o)&&sn(o)==Ht}function BN(o){return gr(o)&&sn(o)==Ze}function Ql(o,u,p,v,C){return o===u?!0:o==null||u==null||!gr(o)&&!gr(u)?o!==o&&u!==u:DN(o,u,p,v,Ql,C)}function DN(o,u,p,v,C,k){var P=nt(o),q=nt(u),z=P?gt:$r(o),he=q?gt:$r(u);z=z==fe?J:z,he=he==fe?J:he;var pe=z==J,ye=he==J,Ie=z==he;if(Ie&&Va(o)){if(!Va(u))return!1;P=!0,pe=!1}if(Ie&&!pe)return k||(k=new gi),P||Ro(o)?Jv(o,u,p,v,C,k):sR(o,u,z,p,v,C,k);if(!(p&g)){var Ue=pe&&Vt.call(o,"__wrapped__"),je=ye&&Vt.call(u,"__wrapped__");if(Ue||je){var ft=Ue?o.value():o,He=je?u.value():u;return k||(k=new gi),C(ft,He,p,v,k)}}return Ie?(k||(k=new gi),oR(o,u,p,v,C,k)):!1}function ON(o){return gr(o)&&$r(o)==Y}function yp(o,u,p,v){var C=p.length,k=C,P=!v;if(o==null)return!k;for(o=zt(o);C--;){var q=p[C];if(P&&q[2]?q[1]!==o[q[0]]:!(q[0]in o))return!1}for(;++C<k;){q=p[C];var z=q[0],he=o[z],pe=q[1];if(P&&q[2]){if(he===e&&!(z in o))return!1}else{var ye=new gi;if(v)var Ie=v(he,pe,z,o,u,ye);if(!(Ie===e?Ql(pe,he,g|y,v,ye):Ie))return!1}}return!0}function _v(o){if(!fr(o)||mR(o))return!1;var u=ca(o)?Ok:xI;return u.test(Ss(o))}function LN(o){return gr(o)&&sn(o)==ne}function PN(o){return gr(o)&&$r(o)==Z}function MN(o){return gr(o)&&cf(o.length)&&!!rr[sn(o)]}function wv(o){return typeof o=="function"?o:o==null?bn:typeof o=="object"?nt(o)?bv(o[0],o[1]):Cv(o):V1(o)}function vp(o){if(!Zl(o))return qk(o);var u=[];for(var p in zt(o))Vt.call(o,p)&&p!="constructor"&&u.push(p);return u}function UN(o){if(!fr(o))return wR(o);var u=Zl(o),p=[];for(var v in o)v=="constructor"&&(u||!Vt.call(o,v))||p.push(v);return p}function _p(o,u){return o<u}function Ev(o,u){var p=-1,v=En(o)?ie(o.length):[];return Ua(o,function(C,k,P){v[++p]=u(C,k,P)}),v}function Cv(o){var u=Op(o);return u.length==1&&u[0][2]?r1(u[0][0],u[0][1]):function(p){return p===o||yp(p,o,u)}}function bv(o,u){return Pp(o)&&t1(u)?r1(Li(o),u):function(p){var v=Yp(p,o);return v===e&&v===u?Wp(p,o):Ql(u,v,g|y)}}function Wc(o,u,p,v,C){o!==u&&hp(u,function(k,P){if(C||(C=new gi),fr(k))FN(o,u,P,p,Wc,v,C);else{var q=v?v(Up(o,P),k,P+"",o,u,C):e;q===e&&(q=k),fp(o,P,q)}},Cn)}function FN(o,u,p,v,C,k,P){var q=Up(o,p),z=Up(u,p),he=P.get(z);if(he){fp(o,p,he);return}var pe=k?k(q,z,p+"",o,u,P):e,ye=pe===e;if(ye){var Ie=nt(z),Ue=!Ie&&Va(z),je=!Ie&&!Ue&&Ro(z);pe=z,Ie||Ue||je?nt(q)?pe=q:vr(q)?pe=wn(q):Ue?(ye=!1,pe=Lv(z,!0)):je?(ye=!1,pe=Pv(z,!0)):pe=[]:eu(z)||Ts(z)?(pe=q,Ts(q)?pe=B1(q):(!fr(q)||ca(q))&&(pe=e1(z))):ye=!1}ye&&(P.set(z,pe),C(pe,z,v,k,P),P.delete(z)),fp(o,p,pe)}function xv(o,u){var p=o.length;if(!!p)return u+=u<0?p:0,ua(u,p)?o[u]:e}function Sv(o,u,p){u.length?u=sr(u,function(k){return nt(k)?function(P){return bs(P,k.length===1?k[0]:k)}:k}):u=[bn];var v=-1;u=sr(u,Bn(Ke()));var C=Ev(o,function(k,P,q){var z=sr(u,function(he){return he(k)});return{criteria:z,index:++v,value:k}});return dk(C,function(k,P){return ZN(k,P,p)})}function qN(o,u){return Tv(o,u,function(p,v){return Wp(o,v)})}function Tv(o,u,p){for(var v=-1,C=u.length,k={};++v<C;){var P=u[v],q=bs(o,P);p(q,P)&&Xl(k,qa(P,o),q)}return k}function GN(o){return function(u){return bs(u,o)}}function wp(o,u,p,v){var C=v?fk:Eo,k=-1,P=u.length,q=o;for(o===u&&(u=wn(u)),p&&(q=sr(o,Bn(p)));++k<P;)for(var z=0,he=u[k],pe=p?p(he):he;(z=C(q,pe,z,v))>-1;)q!==o&&Mc.call(q,z,1),Mc.call(o,z,1);return o}function Av(o,u){for(var p=o?u.length:0,v=p-1;p--;){var C=u[p];if(p==v||C!==k){var k=C;ua(C)?Mc.call(o,C,1):xp(o,C)}}return o}function Ep(o,u){return o+qc(ov()*(u-o+1))}function VN(o,u,p,v){for(var C=-1,k=kr(Fc((u-o)/(p||1)),0),P=ie(k);k--;)P[v?k:++C]=o,o+=p;return P}function Cp(o,u){var p="";if(!o||u<1||u>Ee)return p;do u%2&&(p+=o),u=qc(u/2),u&&(o+=o);while(u);return p}function mt(o,u){return Fp(n1(o,u,bn),o+"")}function KN(o){return cv(Bo(o))}function jN(o,u){var p=Bo(o);return nf(p,Cs(u,0,p.length))}function Xl(o,u,p,v){if(!fr(o))return o;u=qa(u,o);for(var C=-1,k=u.length,P=k-1,q=o;q!=null&&++C<k;){var z=Li(u[C]),he=p;if(z==="__proto__"||z==="constructor"||z==="prototype")return o;if(C!=P){var pe=q[z];he=v?v(pe,z,q):e,he===e&&(he=fr(pe)?pe:ua(u[C+1])?[]:{})}Yl(q,z,he),q=q[z]}return o}var Iv=Gc?function(o,u){return Gc.set(o,u),o}:bn,HN=Uc?function(o,u){return Uc(o,"toString",{configurable:!0,enumerable:!1,value:Qp(u),writable:!0})}:bn;function YN(o){return nf(Bo(o))}function zn(o,u,p){var v=-1,C=o.length;u<0&&(u=-u>C?0:C+u),p=p>C?C:p,p<0&&(p+=C),C=u>p?0:p-u>>>0,u>>>=0;for(var k=ie(C);++v<C;)k[v]=o[v+u];return k}function WN(o,u){var p;return Ua(o,function(v,C,k){return p=u(v,C,k),!p}),!!p}function zc(o,u,p){var v=0,C=o==null?v:o.length;if(typeof u=="number"&&u===u&&C<=pt){for(;v<C;){var k=v+C>>>1,P=o[k];P!==null&&!On(P)&&(p?P<=u:P<u)?v=k+1:C=k}return C}return bp(o,u,bn,p)}function bp(o,u,p,v){var C=0,k=o==null?0:o.length;if(k===0)return 0;u=p(u);for(var P=u!==u,q=u===null,z=On(u),he=u===e;C<k;){var pe=qc((C+k)/2),ye=p(o[pe]),Ie=ye!==e,Ue=ye===null,je=ye===ye,ft=On(ye);if(P)var He=v||je;else he?He=je&&(v||Ie):q?He=je&&Ie&&(v||!Ue):z?He=je&&Ie&&!Ue&&(v||!ft):Ue||ft?He=!1:He=v?ye<=u:ye<u;He?C=pe+1:k=pe}return Zr(k,vt)}function kv(o,u){for(var p=-1,v=o.length,C=0,k=[];++p<v;){var P=o[p],q=u?u(P):P;if(!p||!mi(q,z)){var z=q;k[C++]=P===0?0:P}}return k}function Nv(o){return typeof o=="number"?o:On(o)?ze:+o}function Dn(o){if(typeof o=="string")return o;if(nt(o))return sr(o,Dn)+"";if(On(o))return lv?lv.call(o):"";var u=o+"";return u=="0"&&1/o==-Se?"-0":u}function Fa(o,u,p){var v=-1,C=Ac,k=o.length,P=!0,q=[],z=q;if(p)P=!1,C=Zh;else if(k>=r){var he=u?null:iR(o);if(he)return kc(he);P=!1,C=ql,z=new Es}else z=u?[]:q;e:for(;++v<k;){var pe=o[v],ye=u?u(pe):pe;if(pe=p||pe!==0?pe:0,P&&ye===ye){for(var Ie=z.length;Ie--;)if(z[Ie]===ye)continue e;u&&z.push(ye),q.push(pe)}else C(z,ye,p)||(z!==q&&z.push(ye),q.push(pe))}return q}function xp(o,u){return u=qa(u,o),o=i1(o,u),o==null||delete o[Li(Qn(u))]}function Rv(o,u,p,v){return Xl(o,u,p(bs(o,u)),v)}function Qc(o,u,p,v){for(var C=o.length,k=v?C:-1;(v?k--:++k<C)&&u(o[k],k,o););return p?zn(o,v?0:k,v?k+1:C):zn(o,v?k+1:0,v?C:k)}function Bv(o,u){var p=o;return p instanceof Tt&&(p=p.value()),$h(u,function(v,C){return C.func.apply(C.thisArg,Oa([v],C.args))},p)}function Sp(o,u,p){var v=o.length;if(v<2)return v?Fa(o[0]):[];for(var C=-1,k=ie(v);++C<v;)for(var P=o[C],q=-1;++q<v;)q!=C&&(k[C]=Wl(k[C]||P,o[q],u,p));return Fa(jr(k,1),u,p)}function Dv(o,u,p){for(var v=-1,C=o.length,k=u.length,P={};++v<C;){var q=v<k?u[v]:e;p(P,o[v],q)}return P}function Tp(o){return vr(o)?o:[]}function Ap(o){return typeof o=="function"?o:bn}function qa(o,u){return nt(o)?o:Pp(o,u)?[o]:l1(Ft(o))}var zN=mt;function Ga(o,u,p){var v=o.length;return p=p===e?v:p,!u&&p>=v?o:zn(o,u,p)}var Ov=Lk||function(o){return Dr.clearTimeout(o)};function Lv(o,u){if(u)return o.slice();var p=o.length,v=rv?rv(p):new o.constructor(p);return o.copy(v),v}function Ip(o){var u=new o.constructor(o.byteLength);return new Lc(u).set(new Lc(o)),u}function QN(o,u){var p=u?Ip(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function XN(o){var u=new o.constructor(o.source,vy.exec(o));return u.lastIndex=o.lastIndex,u}function JN(o){return Hl?zt(Hl.call(o)):{}}function Pv(o,u){var p=u?Ip(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function Mv(o,u){if(o!==u){var p=o!==e,v=o===null,C=o===o,k=On(o),P=u!==e,q=u===null,z=u===u,he=On(u);if(!q&&!he&&!k&&o>u||k&&P&&z&&!q&&!he||v&&P&&z||!p&&z||!C)return 1;if(!v&&!k&&!he&&o<u||he&&p&&C&&!v&&!k||q&&p&&C||!P&&C||!z)return-1}return 0}function ZN(o,u,p){for(var v=-1,C=o.criteria,k=u.criteria,P=C.length,q=p.length;++v<P;){var z=Mv(C[v],k[v]);if(z){if(v>=q)return z;var he=p[v];return z*(he=="desc"?-1:1)}}return o.index-u.index}function Uv(o,u,p,v){for(var C=-1,k=o.length,P=p.length,q=-1,z=u.length,he=kr(k-P,0),pe=ie(z+he),ye=!v;++q<z;)pe[q]=u[q];for(;++C<P;)(ye||C<k)&&(pe[p[C]]=o[C]);for(;he--;)pe[q++]=o[C++];return pe}function Fv(o,u,p,v){for(var C=-1,k=o.length,P=-1,q=p.length,z=-1,he=u.length,pe=kr(k-q,0),ye=ie(pe+he),Ie=!v;++C<pe;)ye[C]=o[C];for(var Ue=C;++z<he;)ye[Ue+z]=u[z];for(;++P<q;)(Ie||C<k)&&(ye[Ue+p[P]]=o[C++]);return ye}function wn(o,u){var p=-1,v=o.length;for(u||(u=ie(v));++p<v;)u[p]=o[p];return u}function Oi(o,u,p,v){var C=!p;p||(p={});for(var k=-1,P=u.length;++k<P;){var q=u[k],z=v?v(p[q],o[q],q,p,o):e;z===e&&(z=o[q]),C?sa(p,q,z):Yl(p,q,z)}return p}function $N(o,u){return Oi(o,Lp(o),u)}function eR(o,u){return Oi(o,Zv(o),u)}function Xc(o,u){return function(p,v){var C=nt(p)?ak:CN,k=u?u():{};return C(p,o,Ke(v,2),k)}}function Io(o){return mt(function(u,p){var v=-1,C=p.length,k=C>1?p[C-1]:e,P=C>2?p[2]:e;for(k=o.length>3&&typeof k=="function"?(C--,k):e,P&&on(p[0],p[1],P)&&(k=C<3?e:k,C=1),u=zt(u);++v<C;){var q=p[v];q&&o(u,q,v,k)}return u})}function qv(o,u){return function(p,v){if(p==null)return p;if(!En(p))return o(p,v);for(var C=p.length,k=u?C:-1,P=zt(p);(u?k--:++k<C)&&v(P[k],k,P)!==!1;);return p}}function Gv(o){return function(u,p,v){for(var C=-1,k=zt(u),P=v(u),q=P.length;q--;){var z=P[o?q:++C];if(p(k[z],z,k)===!1)break}return u}}function tR(o,u,p){var v=u&m,C=Jl(o);function k(){var P=this&&this!==Dr&&this instanceof k?C:o;return P.apply(v?p:this,arguments)}return k}function Vv(o){return function(u){u=Ft(u);var p=Co(u)?pi(u):e,v=p?p[0]:u.charAt(0),C=p?Ga(p,1).join(""):u.slice(1);return v[o]()+C}}function ko(o){return function(u){return $h(q1(F1(u).replace(HI,"")),o,"")}}function Jl(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var p=Ao(o.prototype),v=o.apply(p,u);return fr(v)?v:p}}function rR(o,u,p){var v=Jl(o);function C(){for(var k=arguments.length,P=ie(k),q=k,z=No(C);q--;)P[q]=arguments[q];var he=k<3&&P[0]!==z&&P[k-1]!==z?[]:La(P,z);if(k-=he.length,k<p)return Wv(o,u,Jc,C.placeholder,e,P,he,e,e,p-k);var pe=this&&this!==Dr&&this instanceof C?v:o;return Rn(pe,this,P)}return C}function Kv(o){return function(u,p,v){var C=zt(u);if(!En(u)){var k=Ke(p,3);u=Or(u),p=function(q){return k(C[q],q,C)}}var P=o(u,p,v);return P>-1?C[k?u[P]:P]:e}}function jv(o){return la(function(u){var p=u.length,v=p,C=Yn.prototype.thru;for(o&&u.reverse();v--;){var k=u[v];if(typeof k!="function")throw new Hn(i);if(C&&!P&&tf(k)=="wrapper")var P=new Yn([],!0)}for(v=P?v:p;++v<p;){k=u[v];var q=tf(k),z=q=="wrapper"?Dp(k):e;z&&Mp(z[0])&&z[1]==(D|E|N|O)&&!z[4].length&&z[9]==1?P=P[tf(z[0])].apply(P,z[3]):P=k.length==1&&Mp(k)?P[q]():P.thru(k)}return function(){var he=arguments,pe=he[0];if(P&&he.length==1&&nt(pe))return P.plant(pe).value();for(var ye=0,Ie=p?u[ye].apply(this,he):pe;++ye<p;)Ie=u[ye].call(this,Ie);return Ie}})}function Jc(o,u,p,v,C,k,P,q,z,he){var pe=u&D,ye=u&m,Ie=u&_,Ue=u&(E|S),je=u&te,ft=Ie?e:Jl(o);function He(){for(var wt=arguments.length,Nt=ie(wt),Ln=wt;Ln--;)Nt[Ln]=arguments[Ln];if(Ue)var ln=No(He),Pn=pk(Nt,ln);if(v&&(Nt=Uv(Nt,v,C,Ue)),k&&(Nt=Fv(Nt,k,P,Ue)),wt-=Pn,Ue&&wt<he){var _r=La(Nt,ln);return Wv(o,u,Jc,He.placeholder,p,Nt,_r,q,z,he-wt)}var yi=ye?p:this,da=Ie?yi[o]:o;return wt=Nt.length,q?Nt=CR(Nt,q):je&&wt>1&&Nt.reverse(),pe&&z<wt&&(Nt.length=z),this&&this!==Dr&&this instanceof He&&(da=ft||Jl(da)),da.apply(yi,Nt)}return He}function Hv(o,u){return function(p,v){return NN(p,o,u(v),{})}}function Zc(o,u){return function(p,v){var C;if(p===e&&v===e)return u;if(p!==e&&(C=p),v!==e){if(C===e)return v;typeof p=="string"||typeof v=="string"?(p=Dn(p),v=Dn(v)):(p=Nv(p),v=Nv(v)),C=o(p,v)}return C}}function kp(o){return la(function(u){return u=sr(u,Bn(Ke())),mt(function(p){var v=this;return o(u,function(C){return Rn(C,v,p)})})})}function $c(o,u){u=u===e?" ":Dn(u);var p=u.length;if(p<2)return p?Cp(u,o):u;var v=Cp(u,Fc(o/bo(u)));return Co(u)?Ga(pi(v),0,o).join(""):v.slice(0,o)}function nR(o,u,p,v){var C=u&m,k=Jl(o);function P(){for(var q=-1,z=arguments.length,he=-1,pe=v.length,ye=ie(pe+z),Ie=this&&this!==Dr&&this instanceof P?k:o;++he<pe;)ye[he]=v[he];for(;z--;)ye[he++]=arguments[++q];return Rn(Ie,C?p:this,ye)}return P}function Yv(o){return function(u,p,v){return v&&typeof v!="number"&&on(u,p,v)&&(p=v=e),u=fa(u),p===e?(p=u,u=0):p=fa(p),v=v===e?u<p?1:-1:fa(v),VN(u,p,v,o)}}function ef(o){return function(u,p){return typeof u=="string"&&typeof p=="string"||(u=Xn(u),p=Xn(p)),o(u,p)}}function Wv(o,u,p,v,C,k,P,q,z,he){var pe=u&E,ye=pe?P:e,Ie=pe?e:P,Ue=pe?k:e,je=pe?e:k;u|=pe?N:R,u&=~(pe?R:N),u&w||(u&=~(m|_));var ft=[o,u,C,Ue,ye,je,Ie,q,z,he],He=p.apply(e,ft);return Mp(o)&&a1(He,ft),He.placeholder=v,s1(He,o,u)}function Np(o){var u=Ir[o];return function(p,v){if(p=Xn(p),v=v==null?0:Zr(lt(v),292),v&&sv(p)){var C=(Ft(p)+"e").split("e"),k=u(C[0]+"e"+(+C[1]+v));return C=(Ft(k)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return u(p)}}var iR=So&&1/kc(new So([,-0]))[1]==Se?function(o){return new So(o)}:Zp;function zv(o){return function(u){var p=$r(u);return p==Y?sp(u):p==Z?Ek(u):hk(u,o(u))}}function oa(o,u,p,v,C,k,P,q){var z=u&_;if(!z&&typeof o!="function")throw new Hn(i);var he=v?v.length:0;if(he||(u&=~(N|R),v=C=e),P=P===e?P:kr(lt(P),0),q=q===e?q:lt(q),he-=C?C.length:0,u&R){var pe=v,ye=C;v=C=e}var Ie=z?e:Dp(o),Ue=[o,u,p,v,C,pe,ye,k,P,q];if(Ie&&_R(Ue,Ie),o=Ue[0],u=Ue[1],p=Ue[2],v=Ue[3],C=Ue[4],q=Ue[9]=Ue[9]===e?z?0:o.length:kr(Ue[9]-he,0),!q&&u&(E|S)&&(u&=~(E|S)),!u||u==m)var je=tR(o,u,p);else u==E||u==S?je=rR(o,u,q):(u==N||u==(m|N))&&!C.length?je=nR(o,u,p,v):je=Jc.apply(e,Ue);var ft=Ie?Iv:a1;return s1(ft(je,Ue),o,u)}function Qv(o,u,p,v){return o===e||mi(o,xo[p])&&!Vt.call(v,p)?u:o}function Xv(o,u,p,v,C,k){return fr(o)&&fr(u)&&(k.set(u,o),Wc(o,u,e,Xv,k),k.delete(u)),o}function aR(o){return eu(o)?e:o}function Jv(o,u,p,v,C,k){var P=p&g,q=o.length,z=u.length;if(q!=z&&!(P&&z>q))return!1;var he=k.get(o),pe=k.get(u);if(he&&pe)return he==u&&pe==o;var ye=-1,Ie=!0,Ue=p&y?new Es:e;for(k.set(o,u),k.set(u,o);++ye<q;){var je=o[ye],ft=u[ye];if(v)var He=P?v(ft,je,ye,u,o,k):v(je,ft,ye,o,u,k);if(He!==e){if(He)continue;Ie=!1;break}if(Ue){if(!ep(u,function(wt,Nt){if(!ql(Ue,Nt)&&(je===wt||C(je,wt,p,v,k)))return Ue.push(Nt)})){Ie=!1;break}}else if(!(je===ft||C(je,ft,p,v,k))){Ie=!1;break}}return k.delete(o),k.delete(u),Ie}function sR(o,u,p,v,C,k,P){switch(p){case rt:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Ht:return!(o.byteLength!=u.byteLength||!k(new Lc(o),new Lc(u)));case _t:case Ze:case G:return mi(+o,+u);case A:return o.name==u.name&&o.message==u.message;case ne:case de:return o==u+"";case Y:var q=sp;case Z:var z=v&g;if(q||(q=kc),o.size!=u.size&&!z)return!1;var he=P.get(o);if(he)return he==u;v|=y,P.set(o,u);var pe=Jv(q(o),q(u),v,C,k,P);return P.delete(o),pe;case Me:if(Hl)return Hl.call(o)==Hl.call(u)}return!1}function oR(o,u,p,v,C,k){var P=p&g,q=Rp(o),z=q.length,he=Rp(u),pe=he.length;if(z!=pe&&!P)return!1;for(var ye=z;ye--;){var Ie=q[ye];if(!(P?Ie in u:Vt.call(u,Ie)))return!1}var Ue=k.get(o),je=k.get(u);if(Ue&&je)return Ue==u&&je==o;var ft=!0;k.set(o,u),k.set(u,o);for(var He=P;++ye<z;){Ie=q[ye];var wt=o[Ie],Nt=u[Ie];if(v)var Ln=P?v(Nt,wt,Ie,u,o,k):v(wt,Nt,Ie,o,u,k);if(!(Ln===e?wt===Nt||C(wt,Nt,p,v,k):Ln)){ft=!1;break}He||(He=Ie=="constructor")}if(ft&&!He){var ln=o.constructor,Pn=u.constructor;ln!=Pn&&"constructor"in o&&"constructor"in u&&!(typeof ln=="function"&&ln instanceof ln&&typeof Pn=="function"&&Pn instanceof Pn)&&(ft=!1)}return k.delete(o),k.delete(u),ft}function la(o){return Fp(n1(o,e,d1),o+"")}function Rp(o){return yv(o,Or,Lp)}function Bp(o){return yv(o,Cn,Zv)}var Dp=Gc?function(o){return Gc.get(o)}:Zp;function tf(o){for(var u=o.name+"",p=To[u],v=Vt.call(To,u)?p.length:0;v--;){var C=p[v],k=C.func;if(k==null||k==o)return C.name}return u}function No(o){var u=Vt.call(I,"placeholder")?I:o;return u.placeholder}function Ke(){var o=I.iteratee||Xp;return o=o===Xp?wv:o,arguments.length?o(arguments[0],arguments[1]):o}function rf(o,u){var p=o.__data__;return gR(u)?p[typeof u=="string"?"string":"hash"]:p.map}function Op(o){for(var u=Or(o),p=u.length;p--;){var v=u[p],C=o[v];u[p]=[v,C,t1(C)]}return u}function xs(o,u){var p=vk(o,u);return _v(p)?p:e}function lR(o){var u=Vt.call(o,_s),p=o[_s];try{o[_s]=e;var v=!0}catch(k){}var C=Dc.call(o);return v&&(u?o[_s]=p:delete o[_s]),C}var Lp=lp?function(o){return o==null?[]:(o=zt(o),Da(lp(o),function(u){return iv.call(o,u)}))}:$p,Zv=lp?function(o){for(var u=[];o;)Oa(u,Lp(o)),o=Pc(o);return u}:$p,$r=sn;(up&&$r(new up(new ArrayBuffer(1)))!=rt||Vl&&$r(new Vl)!=Y||cp&&$r(cp.resolve())!=H||So&&$r(new So)!=Z||Kl&&$r(new Kl)!=ot)&&($r=function(o){var u=sn(o),p=u==J?o.constructor:e,v=p?Ss(p):"";if(v)switch(v){case jk:return rt;case Hk:return Y;case Yk:return H;case Wk:return Z;case zk:return ot}return u});function uR(o,u,p){for(var v=-1,C=p.length;++v<C;){var k=p[v],P=k.size;switch(k.type){case"drop":o+=P;break;case"dropRight":u-=P;break;case"take":u=Zr(u,o+P);break;case"takeRight":o=kr(o,u-P);break}}return{start:o,end:u}}function cR(o){var u=o.match(mI);return u?u[1].split(yI):[]}function $v(o,u,p){u=qa(u,o);for(var v=-1,C=u.length,k=!1;++v<C;){var P=Li(u[v]);if(!(k=o!=null&&p(o,P)))break;o=o[P]}return k||++v!=C?k:(C=o==null?0:o.length,!!C&&cf(C)&&ua(P,C)&&(nt(o)||Ts(o)))}function fR(o){var u=o.length,p=new o.constructor(u);return u&&typeof o[0]=="string"&&Vt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function e1(o){return typeof o.constructor=="function"&&!Zl(o)?Ao(Pc(o)):{}}function dR(o,u,p){var v=o.constructor;switch(u){case Ht:return Ip(o);case _t:case Ze:return new v(+o);case rt:return QN(o,p);case kt:case cr:case Ba:case ms:case ys:case _n:case na:case Jr:case Ar:return Pv(o,p);case Y:return new v;case G:case de:return new v(o);case ne:return XN(o);case Z:return new v;case Me:return JN(o)}}function hR(o,u){var p=u.length;if(!p)return o;var v=p-1;return u[v]=(p>1?"& ":"")+u[v],u=u.join(p>2?", ":" "),o.replace(gI,`{
/* [wrapped with `+u+`] */
`)}function pR(o){return nt(o)||Ts(o)||!!(av&&o&&o[av])}function ua(o,u){var p=typeof o;return u=u==null?Ee:u,!!u&&(p=="number"||p!="symbol"&&TI.test(o))&&o>-1&&o%1==0&&o<u}function on(o,u,p){if(!fr(p))return!1;var v=typeof u;return(v=="number"?En(p)&&ua(u,p.length):v=="string"&&u in p)?mi(p[u],o):!1}function Pp(o,u){if(nt(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||On(o)?!0:fI.test(o)||!cI.test(o)||u!=null&&o in zt(u)}function gR(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Mp(o){var u=tf(o),p=I[u];if(typeof p!="function"||!(u in Tt.prototype))return!1;if(o===p)return!0;var v=Dp(p);return!!v&&o===v[0]}function mR(o){return!!tv&&tv in o}var yR=Rc?ca:e0;function Zl(o){var u=o&&o.constructor,p=typeof u=="function"&&u.prototype||xo;return o===p}function t1(o){return o===o&&!fr(o)}function r1(o,u){return function(p){return p==null?!1:p[o]===u&&(u!==e||o in zt(p))}}function vR(o){var u=lf(o,function(v){return p.size===l&&p.clear(),v}),p=u.cache;return u}function _R(o,u){var p=o[1],v=u[1],C=p|v,k=C<(m|_|D),P=v==D&&p==E||v==D&&p==O&&o[7].length<=u[8]||v==(D|O)&&u[7].length<=u[8]&&p==E;if(!(k||P))return o;v&m&&(o[2]=u[2],C|=p&m?0:w);var q=u[3];if(q){var z=o[3];o[3]=z?Uv(z,q,u[4]):q,o[4]=z?La(o[3],c):u[4]}return q=u[5],q&&(z=o[5],o[5]=z?Fv(z,q,u[6]):q,o[6]=z?La(o[5],c):u[6]),q=u[7],q&&(o[7]=q),v&D&&(o[8]=o[8]==null?u[8]:Zr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=C,o}function wR(o){var u=[];if(o!=null)for(var p in zt(o))u.push(p);return u}function ER(o){return Dc.call(o)}function n1(o,u,p){return u=kr(u===e?o.length-1:u,0),function(){for(var v=arguments,C=-1,k=kr(v.length-u,0),P=ie(k);++C<k;)P[C]=v[u+C];C=-1;for(var q=ie(u+1);++C<u;)q[C]=v[C];return q[u]=p(P),Rn(o,this,q)}}function i1(o,u){return u.length<2?o:bs(o,zn(u,0,-1))}function CR(o,u){for(var p=o.length,v=Zr(u.length,p),C=wn(o);v--;){var k=u[v];o[v]=ua(k,p)?C[k]:e}return o}function Up(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var a1=o1(Iv),$l=Mk||function(o,u){return Dr.setTimeout(o,u)},Fp=o1(HN);function s1(o,u,p){var v=u+"";return Fp(o,hR(v,bR(cR(v),p)))}function o1(o){var u=0,p=0;return function(){var v=Gk(),C=se-(v-p);if(p=v,C>0){if(++u>=le)return arguments[0]}else u=0;return o.apply(e,arguments)}}function nf(o,u){var p=-1,v=o.length,C=v-1;for(u=u===e?v:u;++p<u;){var k=Ep(p,C),P=o[k];o[k]=o[p],o[p]=P}return o.length=u,o}var l1=vR(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(dI,function(p,v,C,k){u.push(C?k.replace(wI,"$1"):v||p)}),u});function Li(o){if(typeof o=="string"||On(o))return o;var u=o+"";return u=="0"&&1/o==-Se?"-0":u}function Ss(o){if(o!=null){try{return Bc.call(o)}catch(u){}try{return o+""}catch(u){}}return""}function bR(o,u){return jn(Qe,function(p){var v="_."+p[0];u&p[1]&&!Ac(o,v)&&o.push(v)}),o.sort()}function u1(o){if(o instanceof Tt)return o.clone();var u=new Yn(o.__wrapped__,o.__chain__);return u.__actions__=wn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function xR(o,u,p){(p?on(o,u,p):u===e)?u=1:u=kr(lt(u),0);var v=o==null?0:o.length;if(!v||u<1)return[];for(var C=0,k=0,P=ie(Fc(v/u));C<v;)P[k++]=zn(o,C,C+=u);return P}function SR(o){for(var u=-1,p=o==null?0:o.length,v=0,C=[];++u<p;){var k=o[u];k&&(C[v++]=k)}return C}function TR(){var o=arguments.length;if(!o)return[];for(var u=ie(o-1),p=arguments[0],v=o;v--;)u[v-1]=arguments[v];return Oa(nt(p)?wn(p):[p],jr(u,1))}var AR=mt(function(o,u){return vr(o)?Wl(o,jr(u,1,vr,!0)):[]}),IR=mt(function(o,u){var p=Qn(u);return vr(p)&&(p=e),vr(o)?Wl(o,jr(u,1,vr,!0),Ke(p,2)):[]}),kR=mt(function(o,u){var p=Qn(u);return vr(p)&&(p=e),vr(o)?Wl(o,jr(u,1,vr,!0),e,p):[]});function NR(o,u,p){var v=o==null?0:o.length;return v?(u=p||u===e?1:lt(u),zn(o,u<0?0:u,v)):[]}function RR(o,u,p){var v=o==null?0:o.length;return v?(u=p||u===e?1:lt(u),u=v-u,zn(o,0,u<0?0:u)):[]}function BR(o,u){return o&&o.length?Qc(o,Ke(u,3),!0,!0):[]}function DR(o,u){return o&&o.length?Qc(o,Ke(u,3),!0):[]}function OR(o,u,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&on(o,u,p)&&(p=0,v=C),TN(o,u,p,v)):[]}function c1(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:lt(p);return C<0&&(C=kr(v+C,0)),Ic(o,Ke(u,3),C)}function f1(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==e&&(C=lt(p),C=p<0?kr(v+C,0):Zr(C,v-1)),Ic(o,Ke(u,3),C,!0)}function d1(o){var u=o==null?0:o.length;return u?jr(o,1):[]}function LR(o){var u=o==null?0:o.length;return u?jr(o,Se):[]}function PR(o,u){var p=o==null?0:o.length;return p?(u=u===e?1:lt(u),jr(o,u)):[]}function MR(o){for(var u=-1,p=o==null?0:o.length,v={};++u<p;){var C=o[u];v[C[0]]=C[1]}return v}function h1(o){return o&&o.length?o[0]:e}function UR(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:lt(p);return C<0&&(C=kr(v+C,0)),Eo(o,u,C)}function FR(o){var u=o==null?0:o.length;return u?zn(o,0,-1):[]}var qR=mt(function(o){var u=sr(o,Tp);return u.length&&u[0]===o[0]?mp(u):[]}),GR=mt(function(o){var u=Qn(o),p=sr(o,Tp);return u===Qn(p)?u=e:p.pop(),p.length&&p[0]===o[0]?mp(p,Ke(u,2)):[]}),VR=mt(function(o){var u=Qn(o),p=sr(o,Tp);return u=typeof u=="function"?u:e,u&&p.pop(),p.length&&p[0]===o[0]?mp(p,e,u):[]});function KR(o,u){return o==null?"":Fk.call(o,u)}function Qn(o){var u=o==null?0:o.length;return u?o[u-1]:e}function jR(o,u,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==e&&(C=lt(p),C=C<0?kr(v+C,0):Zr(C,v-1)),u===u?bk(o,u,C):Ic(o,Wy,C,!0)}function HR(o,u){return o&&o.length?xv(o,lt(u)):e}var YR=mt(p1);function p1(o,u){return o&&o.length&&u&&u.length?wp(o,u):o}function WR(o,u,p){return o&&o.length&&u&&u.length?wp(o,u,Ke(p,2)):o}function zR(o,u,p){return o&&o.length&&u&&u.length?wp(o,u,e,p):o}var QR=la(function(o,u){var p=o==null?0:o.length,v=dp(o,u);return Av(o,sr(u,function(C){return ua(C,p)?+C:C}).sort(Mv)),v});function XR(o,u){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],k=o.length;for(u=Ke(u,3);++v<k;){var P=o[v];u(P,v,o)&&(p.push(P),C.push(v))}return Av(o,C),p}function qp(o){return o==null?o:Kk.call(o)}function JR(o,u,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&on(o,u,p)?(u=0,p=v):(u=u==null?0:lt(u),p=p===e?v:lt(p)),zn(o,u,p)):[]}function ZR(o,u){return zc(o,u)}function $R(o,u,p){return bp(o,u,Ke(p,2))}function eB(o,u){var p=o==null?0:o.length;if(p){var v=zc(o,u);if(v<p&&mi(o[v],u))return v}return-1}function tB(o,u){return zc(o,u,!0)}function rB(o,u,p){return bp(o,u,Ke(p,2),!0)}function nB(o,u){var p=o==null?0:o.length;if(p){var v=zc(o,u,!0)-1;if(mi(o[v],u))return v}return-1}function iB(o){return o&&o.length?kv(o):[]}function aB(o,u){return o&&o.length?kv(o,Ke(u,2)):[]}function sB(o){var u=o==null?0:o.length;return u?zn(o,1,u):[]}function oB(o,u,p){return o&&o.length?(u=p||u===e?1:lt(u),zn(o,0,u<0?0:u)):[]}function lB(o,u,p){var v=o==null?0:o.length;return v?(u=p||u===e?1:lt(u),u=v-u,zn(o,u<0?0:u,v)):[]}function uB(o,u){return o&&o.length?Qc(o,Ke(u,3),!1,!0):[]}function cB(o,u){return o&&o.length?Qc(o,Ke(u,3)):[]}var fB=mt(function(o){return Fa(jr(o,1,vr,!0))}),dB=mt(function(o){var u=Qn(o);return vr(u)&&(u=e),Fa(jr(o,1,vr,!0),Ke(u,2))}),hB=mt(function(o){var u=Qn(o);return u=typeof u=="function"?u:e,Fa(jr(o,1,vr,!0),e,u)});function pB(o){return o&&o.length?Fa(o):[]}function gB(o,u){return o&&o.length?Fa(o,Ke(u,2)):[]}function mB(o,u){return u=typeof u=="function"?u:e,o&&o.length?Fa(o,e,u):[]}function Gp(o){if(!(o&&o.length))return[];var u=0;return o=Da(o,function(p){if(vr(p))return u=kr(p.length,u),!0}),ip(u,function(p){return sr(o,tp(p))})}function g1(o,u){if(!(o&&o.length))return[];var p=Gp(o);return u==null?p:sr(p,function(v){return Rn(u,e,v)})}var yB=mt(function(o,u){return vr(o)?Wl(o,u):[]}),vB=mt(function(o){return Sp(Da(o,vr))}),_B=mt(function(o){var u=Qn(o);return vr(u)&&(u=e),Sp(Da(o,vr),Ke(u,2))}),wB=mt(function(o){var u=Qn(o);return u=typeof u=="function"?u:e,Sp(Da(o,vr),e,u)}),EB=mt(Gp);function CB(o,u){return Dv(o||[],u||[],Yl)}function bB(o,u){return Dv(o||[],u||[],Xl)}var xB=mt(function(o){var u=o.length,p=u>1?o[u-1]:e;return p=typeof p=="function"?(o.pop(),p):e,g1(o,p)});function m1(o){var u=I(o);return u.__chain__=!0,u}function SB(o,u){return u(o),o}function af(o,u){return u(o)}var TB=la(function(o){var u=o.length,p=u?o[0]:0,v=this.__wrapped__,C=function(k){return dp(k,o)};return u>1||this.__actions__.length||!(v instanceof Tt)||!ua(p)?this.thru(C):(v=v.slice(p,+p+(u?1:0)),v.__actions__.push({func:af,args:[C],thisArg:e}),new Yn(v,this.__chain__).thru(function(k){return u&&!k.length&&k.push(e),k}))});function AB(){return m1(this)}function IB(){return new Yn(this.value(),this.__chain__)}function kB(){this.__values__===e&&(this.__values__=N1(this.value()));var o=this.__index__>=this.__values__.length,u=o?e:this.__values__[this.__index__++];return{done:o,value:u}}function NB(){return this}function RB(o){for(var u,p=this;p instanceof Kc;){var v=u1(p);v.__index__=0,v.__values__=e,u?C.__wrapped__=v:u=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,u}function BB(){var o=this.__wrapped__;if(o instanceof Tt){var u=o;return this.__actions__.length&&(u=new Tt(this)),u=u.reverse(),u.__actions__.push({func:af,args:[qp],thisArg:e}),new Yn(u,this.__chain__)}return this.thru(qp)}function DB(){return Bv(this.__wrapped__,this.__actions__)}var OB=Xc(function(o,u,p){Vt.call(o,p)?++o[p]:sa(o,p,1)});function LB(o,u,p){var v=nt(o)?Hy:SN;return p&&on(o,u,p)&&(u=e),v(o,Ke(u,3))}function PB(o,u){var p=nt(o)?Da:gv;return p(o,Ke(u,3))}var MB=Kv(c1),UB=Kv(f1);function FB(o,u){return jr(sf(o,u),1)}function qB(o,u){return jr(sf(o,u),Se)}function GB(o,u,p){return p=p===e?1:lt(p),jr(sf(o,u),p)}function y1(o,u){var p=nt(o)?jn:Ua;return p(o,Ke(u,3))}function v1(o,u){var p=nt(o)?sk:pv;return p(o,Ke(u,3))}var VB=Xc(function(o,u,p){Vt.call(o,p)?o[p].push(u):sa(o,p,[u])});function KB(o,u,p,v){o=En(o)?o:Bo(o),p=p&&!v?lt(p):0;var C=o.length;return p<0&&(p=kr(C+p,0)),ff(o)?p<=C&&o.indexOf(u,p)>-1:!!C&&Eo(o,u,p)>-1}var jB=mt(function(o,u,p){var v=-1,C=typeof u=="function",k=En(o)?ie(o.length):[];return Ua(o,function(P){k[++v]=C?Rn(u,P,p):zl(P,u,p)}),k}),HB=Xc(function(o,u,p){sa(o,p,u)});function sf(o,u){var p=nt(o)?sr:Ev;return p(o,Ke(u,3))}function YB(o,u,p,v){return o==null?[]:(nt(u)||(u=u==null?[]:[u]),p=v?e:p,nt(p)||(p=p==null?[]:[p]),Sv(o,u,p))}var WB=Xc(function(o,u,p){o[p?0:1].push(u)},function(){return[[],[]]});function zB(o,u,p){var v=nt(o)?$h:Qy,C=arguments.length<3;return v(o,Ke(u,4),p,C,Ua)}function QB(o,u,p){var v=nt(o)?ok:Qy,C=arguments.length<3;return v(o,Ke(u,4),p,C,pv)}function XB(o,u){var p=nt(o)?Da:gv;return p(o,uf(Ke(u,3)))}function JB(o){var u=nt(o)?cv:KN;return u(o)}function ZB(o,u,p){(p?on(o,u,p):u===e)?u=1:u=lt(u);var v=nt(o)?wN:jN;return v(o,u)}function $B(o){var u=nt(o)?EN:YN;return u(o)}function eD(o){if(o==null)return 0;if(En(o))return ff(o)?bo(o):o.length;var u=$r(o);return u==Y||u==Z?o.size:vp(o).length}function tD(o,u,p){var v=nt(o)?ep:WN;return p&&on(o,u,p)&&(u=e),v(o,Ke(u,3))}var rD=mt(function(o,u){if(o==null)return[];var p=u.length;return p>1&&on(o,u[0],u[1])?u=[]:p>2&&on(u[0],u[1],u[2])&&(u=[u[0]]),Sv(o,jr(u,1),[])}),of=Pk||function(){return Dr.Date.now()};function nD(o,u){if(typeof u!="function")throw new Hn(i);return o=lt(o),function(){if(--o<1)return u.apply(this,arguments)}}function _1(o,u,p){return u=p?e:u,u=o&&u==null?o.length:u,oa(o,D,e,e,e,e,u)}function w1(o,u){var p;if(typeof u!="function")throw new Hn(i);return o=lt(o),function(){return--o>0&&(p=u.apply(this,arguments)),o<=1&&(u=e),p}}var Vp=mt(function(o,u,p){var v=m;if(p.length){var C=La(p,No(Vp));v|=N}return oa(o,v,u,p,C)}),E1=mt(function(o,u,p){var v=m|_;if(p.length){var C=La(p,No(E1));v|=N}return oa(u,v,o,p,C)});function C1(o,u,p){u=p?e:u;var v=oa(o,E,e,e,e,e,e,u);return v.placeholder=C1.placeholder,v}function b1(o,u,p){u=p?e:u;var v=oa(o,S,e,e,e,e,e,u);return v.placeholder=b1.placeholder,v}function x1(o,u,p){var v,C,k,P,q,z,he=0,pe=!1,ye=!1,Ie=!0;if(typeof o!="function")throw new Hn(i);u=Xn(u)||0,fr(p)&&(pe=!!p.leading,ye="maxWait"in p,k=ye?kr(Xn(p.maxWait)||0,u):k,Ie="trailing"in p?!!p.trailing:Ie);function Ue(_r){var yi=v,da=C;return v=C=e,he=_r,P=o.apply(da,yi),P}function je(_r){return he=_r,q=$l(wt,u),pe?Ue(_r):P}function ft(_r){var yi=_r-z,da=_r-he,K1=u-yi;return ye?Zr(K1,k-da):K1}function He(_r){var yi=_r-z,da=_r-he;return z===e||yi>=u||yi<0||ye&&da>=k}function wt(){var _r=of();if(He(_r))return Nt(_r);q=$l(wt,ft(_r))}function Nt(_r){return q=e,Ie&&v?Ue(_r):(v=C=e,P)}function Ln(){q!==e&&Ov(q),he=0,v=z=C=q=e}function ln(){return q===e?P:Nt(of())}function Pn(){var _r=of(),yi=He(_r);if(v=arguments,C=this,z=_r,yi){if(q===e)return je(z);if(ye)return Ov(q),q=$l(wt,u),Ue(z)}return q===e&&(q=$l(wt,u)),P}return Pn.cancel=Ln,Pn.flush=ln,Pn}var iD=mt(function(o,u){return hv(o,1,u)}),aD=mt(function(o,u,p){return hv(o,Xn(u)||0,p)});function sD(o){return oa(o,te)}function lf(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Hn(i);var p=function(){var v=arguments,C=u?u.apply(this,v):v[0],k=p.cache;if(k.has(C))return k.get(C);var P=o.apply(this,v);return p.cache=k.set(C,P)||k,P};return p.cache=new(lf.Cache||aa),p}lf.Cache=aa;function uf(o){if(typeof o!="function")throw new Hn(i);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function oD(o){return w1(2,o)}var lD=zN(function(o,u){u=u.length==1&&nt(u[0])?sr(u[0],Bn(Ke())):sr(jr(u,1),Bn(Ke()));var p=u.length;return mt(function(v){for(var C=-1,k=Zr(v.length,p);++C<k;)v[C]=u[C].call(this,v[C]);return Rn(o,this,v)})}),Kp=mt(function(o,u){var p=La(u,No(Kp));return oa(o,N,e,u,p)}),S1=mt(function(o,u){var p=La(u,No(S1));return oa(o,R,e,u,p)}),uD=la(function(o,u){return oa(o,O,e,e,e,u)});function cD(o,u){if(typeof o!="function")throw new Hn(i);return u=u===e?u:lt(u),mt(o,u)}function fD(o,u){if(typeof o!="function")throw new Hn(i);return u=u==null?0:kr(lt(u),0),mt(function(p){var v=p[u],C=Ga(p,0,u);return v&&Oa(C,v),Rn(o,this,C)})}function dD(o,u,p){var v=!0,C=!0;if(typeof o!="function")throw new Hn(i);return fr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),x1(o,u,{leading:v,maxWait:u,trailing:C})}function hD(o){return _1(o,1)}function pD(o,u){return Kp(Ap(u),o)}function gD(){if(!arguments.length)return[];var o=arguments[0];return nt(o)?o:[o]}function mD(o){return Wn(o,h)}function yD(o,u){return u=typeof u=="function"?u:e,Wn(o,h,u)}function vD(o){return Wn(o,f|h)}function _D(o,u){return u=typeof u=="function"?u:e,Wn(o,f|h,u)}function wD(o,u){return u==null||dv(o,u,Or(u))}function mi(o,u){return o===u||o!==o&&u!==u}var ED=ef(gp),CD=ef(function(o,u){return o>=u}),Ts=vv(function(){return arguments}())?vv:function(o){return gr(o)&&Vt.call(o,"callee")&&!iv.call(o,"callee")},nt=ie.isArray,bD=Fy?Bn(Fy):RN;function En(o){return o!=null&&cf(o.length)&&!ca(o)}function vr(o){return gr(o)&&En(o)}function xD(o){return o===!0||o===!1||gr(o)&&sn(o)==_t}var Va=Uk||e0,SD=qy?Bn(qy):BN;function TD(o){return gr(o)&&o.nodeType===1&&!eu(o)}function AD(o){if(o==null)return!0;if(En(o)&&(nt(o)||typeof o=="string"||typeof o.splice=="function"||Va(o)||Ro(o)||Ts(o)))return!o.length;var u=$r(o);if(u==Y||u==Z)return!o.size;if(Zl(o))return!vp(o).length;for(var p in o)if(Vt.call(o,p))return!1;return!0}function ID(o,u){return Ql(o,u)}function kD(o,u,p){p=typeof p=="function"?p:e;var v=p?p(o,u):e;return v===e?Ql(o,u,e,p):!!v}function jp(o){if(!gr(o))return!1;var u=sn(o);return u==A||u==Ce||typeof o.message=="string"&&typeof o.name=="string"&&!eu(o)}function ND(o){return typeof o=="number"&&sv(o)}function ca(o){if(!fr(o))return!1;var u=sn(o);return u==B||u==L||u==tt||u==X}function T1(o){return typeof o=="number"&&o==lt(o)}function cf(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Ee}function fr(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function gr(o){return o!=null&&typeof o=="object"}var A1=Gy?Bn(Gy):ON;function RD(o,u){return o===u||yp(o,u,Op(u))}function BD(o,u,p){return p=typeof p=="function"?p:e,yp(o,u,Op(u),p)}function DD(o){return I1(o)&&o!=+o}function OD(o){if(yR(o))throw new et(n);return _v(o)}function LD(o){return o===null}function PD(o){return o==null}function I1(o){return typeof o=="number"||gr(o)&&sn(o)==G}function eu(o){if(!gr(o)||sn(o)!=J)return!1;var u=Pc(o);if(u===null)return!0;var p=Vt.call(u,"constructor")&&u.constructor;return typeof p=="function"&&p instanceof p&&Bc.call(p)==Bk}var Hp=Vy?Bn(Vy):LN;function MD(o){return T1(o)&&o>=-Ee&&o<=Ee}var k1=Ky?Bn(Ky):PN;function ff(o){return typeof o=="string"||!nt(o)&&gr(o)&&sn(o)==de}function On(o){return typeof o=="symbol"||gr(o)&&sn(o)==Me}var Ro=jy?Bn(jy):MN;function UD(o){return o===e}function FD(o){return gr(o)&&$r(o)==ot}function qD(o){return gr(o)&&sn(o)==jt}var GD=ef(_p),VD=ef(function(o,u){return o<=u});function N1(o){if(!o)return[];if(En(o))return ff(o)?pi(o):wn(o);if(Gl&&o[Gl])return wk(o[Gl]());var u=$r(o),p=u==Y?sp:u==Z?kc:Bo;return p(o)}function fa(o){if(!o)return o===0?o:0;if(o=Xn(o),o===Se||o===-Se){var u=o<0?-1:1;return u*ve}return o===o?o:0}function lt(o){var u=fa(o),p=u%1;return u===u?p?u-p:u:0}function R1(o){return o?Cs(lt(o),0,Ve):0}function Xn(o){if(typeof o=="number")return o;if(On(o))return ze;if(fr(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=fr(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Xy(o);var p=bI.test(o);return p||SI.test(o)?nk(o.slice(2),p?2:8):CI.test(o)?ze:+o}function B1(o){return Oi(o,Cn(o))}function KD(o){return o?Cs(lt(o),-Ee,Ee):o===0?o:0}function Ft(o){return o==null?"":Dn(o)}var jD=Io(function(o,u){if(Zl(u)||En(u)){Oi(u,Or(u),o);return}for(var p in u)Vt.call(u,p)&&Yl(o,p,u[p])}),D1=Io(function(o,u){Oi(u,Cn(u),o)}),df=Io(function(o,u,p,v){Oi(u,Cn(u),o,v)}),HD=Io(function(o,u,p,v){Oi(u,Or(u),o,v)}),YD=la(dp);function WD(o,u){var p=Ao(o);return u==null?p:fv(p,u)}var zD=mt(function(o,u){o=zt(o);var p=-1,v=u.length,C=v>2?u[2]:e;for(C&&on(u[0],u[1],C)&&(v=1);++p<v;)for(var k=u[p],P=Cn(k),q=-1,z=P.length;++q<z;){var he=P[q],pe=o[he];(pe===e||mi(pe,xo[he])&&!Vt.call(o,he))&&(o[he]=k[he])}return o}),QD=mt(function(o){return o.push(e,Xv),Rn(O1,e,o)});function XD(o,u){return Yy(o,Ke(u,3),Di)}function JD(o,u){return Yy(o,Ke(u,3),pp)}function ZD(o,u){return o==null?o:hp(o,Ke(u,3),Cn)}function $D(o,u){return o==null?o:mv(o,Ke(u,3),Cn)}function eO(o,u){return o&&Di(o,Ke(u,3))}function tO(o,u){return o&&pp(o,Ke(u,3))}function rO(o){return o==null?[]:Yc(o,Or(o))}function nO(o){return o==null?[]:Yc(o,Cn(o))}function Yp(o,u,p){var v=o==null?e:bs(o,u);return v===e?p:v}function iO(o,u){return o!=null&&$v(o,u,AN)}function Wp(o,u){return o!=null&&$v(o,u,IN)}var aO=Hv(function(o,u,p){u!=null&&typeof u.toString!="function"&&(u=Dc.call(u)),o[u]=p},Qp(bn)),sO=Hv(function(o,u,p){u!=null&&typeof u.toString!="function"&&(u=Dc.call(u)),Vt.call(o,u)?o[u].push(p):o[u]=[p]},Ke),oO=mt(zl);function Or(o){return En(o)?uv(o):vp(o)}function Cn(o){return En(o)?uv(o,!0):UN(o)}function lO(o,u){var p={};return u=Ke(u,3),Di(o,function(v,C,k){sa(p,u(v,C,k),v)}),p}function uO(o,u){var p={};return u=Ke(u,3),Di(o,function(v,C,k){sa(p,C,u(v,C,k))}),p}var cO=Io(function(o,u,p){Wc(o,u,p)}),O1=Io(function(o,u,p,v){Wc(o,u,p,v)}),fO=la(function(o,u){var p={};if(o==null)return p;var v=!1;u=sr(u,function(k){return k=qa(k,o),v||(v=k.length>1),k}),Oi(o,Bp(o),p),v&&(p=Wn(p,f|d|h,aR));for(var C=u.length;C--;)xp(p,u[C]);return p});function dO(o,u){return L1(o,uf(Ke(u)))}var hO=la(function(o,u){return o==null?{}:qN(o,u)});function L1(o,u){if(o==null)return{};var p=sr(Bp(o),function(v){return[v]});return u=Ke(u),Tv(o,p,function(v,C){return u(v,C[0])})}function pO(o,u,p){u=qa(u,o);var v=-1,C=u.length;for(C||(C=1,o=e);++v<C;){var k=o==null?e:o[Li(u[v])];k===e&&(v=C,k=p),o=ca(k)?k.call(o):k}return o}function gO(o,u,p){return o==null?o:Xl(o,u,p)}function mO(o,u,p,v){return v=typeof v=="function"?v:e,o==null?o:Xl(o,u,p,v)}var P1=zv(Or),M1=zv(Cn);function yO(o,u,p){var v=nt(o),C=v||Va(o)||Ro(o);if(u=Ke(u,4),p==null){var k=o&&o.constructor;C?p=v?new k:[]:fr(o)?p=ca(k)?Ao(Pc(o)):{}:p={}}return(C?jn:Di)(o,function(P,q,z){return u(p,P,q,z)}),p}function vO(o,u){return o==null?!0:xp(o,u)}function _O(o,u,p){return o==null?o:Rv(o,u,Ap(p))}function wO(o,u,p,v){return v=typeof v=="function"?v:e,o==null?o:Rv(o,u,Ap(p),v)}function Bo(o){return o==null?[]:ap(o,Or(o))}function EO(o){return o==null?[]:ap(o,Cn(o))}function CO(o,u,p){return p===e&&(p=u,u=e),p!==e&&(p=Xn(p),p=p===p?p:0),u!==e&&(u=Xn(u),u=u===u?u:0),Cs(Xn(o),u,p)}function bO(o,u,p){return u=fa(u),p===e?(p=u,u=0):p=fa(p),o=Xn(o),kN(o,u,p)}function xO(o,u,p){if(p&&typeof p!="boolean"&&on(o,u,p)&&(u=p=e),p===e&&(typeof u=="boolean"?(p=u,u=e):typeof o=="boolean"&&(p=o,o=e)),o===e&&u===e?(o=0,u=1):(o=fa(o),u===e?(u=o,o=0):u=fa(u)),o>u){var v=o;o=u,u=v}if(p||o%1||u%1){var C=ov();return Zr(o+C*(u-o+rk("1e-"+((C+"").length-1))),u)}return Ep(o,u)}var SO=ko(function(o,u,p){return u=u.toLowerCase(),o+(p?U1(u):u)});function U1(o){return zp(Ft(o).toLowerCase())}function F1(o){return o=Ft(o),o&&o.replace(AI,gk).replace(YI,"")}function TO(o,u,p){o=Ft(o),u=Dn(u);var v=o.length;p=p===e?v:Cs(lt(p),0,v);var C=p;return p-=u.length,p>=0&&o.slice(p,C)==u}function AO(o){return o=Ft(o),o&&oI.test(o)?o.replace(my,mk):o}function IO(o){return o=Ft(o),o&&hI.test(o)?o.replace(Kh,"\\$&"):o}var kO=ko(function(o,u,p){return o+(p?"-":"")+u.toLowerCase()}),NO=ko(function(o,u,p){return o+(p?" ":"")+u.toLowerCase()}),RO=Vv("toLowerCase");function BO(o,u,p){o=Ft(o),u=lt(u);var v=u?bo(o):0;if(!u||v>=u)return o;var C=(u-v)/2;return $c(qc(C),p)+o+$c(Fc(C),p)}function DO(o,u,p){o=Ft(o),u=lt(u);var v=u?bo(o):0;return u&&v<u?o+$c(u-v,p):o}function OO(o,u,p){o=Ft(o),u=lt(u);var v=u?bo(o):0;return u&&v<u?$c(u-v,p)+o:o}function LO(o,u,p){return p||u==null?u=0:u&&(u=+u),Vk(Ft(o).replace(jh,""),u||0)}function PO(o,u,p){return(p?on(o,u,p):u===e)?u=1:u=lt(u),Cp(Ft(o),u)}function MO(){var o=arguments,u=Ft(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var UO=ko(function(o,u,p){return o+(p?"_":"")+u.toLowerCase()});function FO(o,u,p){return p&&typeof p!="number"&&on(o,u,p)&&(u=p=e),p=p===e?Ve:p>>>0,p?(o=Ft(o),o&&(typeof u=="string"||u!=null&&!Hp(u))&&(u=Dn(u),!u&&Co(o))?Ga(pi(o),0,p):o.split(u,p)):[]}var qO=ko(function(o,u,p){return o+(p?" ":"")+zp(u)});function GO(o,u,p){return o=Ft(o),p=p==null?0:Cs(lt(p),0,o.length),u=Dn(u),o.slice(p,p+u.length)==u}function VO(o,u,p){var v=I.templateSettings;p&&on(o,u,p)&&(u=e),o=Ft(o),u=df({},u,v,Qv);var C=df({},u.imports,v.imports,Qv),k=Or(C),P=ap(C,k),q,z,he=0,pe=u.interpolate||xc,ye="__p += '",Ie=op((u.escape||xc).source+"|"+pe.source+"|"+(pe===yy?EI:xc).source+"|"+(u.evaluate||xc).source+"|$","g"),Ue="//# sourceURL="+(Vt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++JI+"]")+`
`;o.replace(Ie,function(He,wt,Nt,Ln,ln,Pn){return Nt||(Nt=Ln),ye+=o.slice(he,Pn).replace(II,yk),wt&&(q=!0,ye+=`' +
__e(`+wt+`) +
'`),ln&&(z=!0,ye+=`';
`+ln+`;
__p += '`),Nt&&(ye+=`' +
((__t = (`+Nt+`)) == null ? '' : __t) +
'`),he=Pn+He.length,He}),ye+=`';
`;var je=Vt.call(u,"variable")&&u.variable;if(!je)ye=`with (obj) {
`+ye+`
}
`;else if(_I.test(je))throw new et(a);ye=(z?ye.replace(ar,""):ye).replace(iI,"$1").replace(aI,"$1;"),ye="function("+(je||"obj")+`) {
`+(je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ye+`return __p
}`;var ft=G1(function(){return Ut(k,Ue+"return "+ye).apply(e,P)});if(ft.source=ye,jp(ft))throw ft;return ft}function KO(o){return Ft(o).toLowerCase()}function jO(o){return Ft(o).toUpperCase()}function HO(o,u,p){if(o=Ft(o),o&&(p||u===e))return Xy(o);if(!o||!(u=Dn(u)))return o;var v=pi(o),C=pi(u),k=Jy(v,C),P=Zy(v,C)+1;return Ga(v,k,P).join("")}function YO(o,u,p){if(o=Ft(o),o&&(p||u===e))return o.slice(0,ev(o)+1);if(!o||!(u=Dn(u)))return o;var v=pi(o),C=Zy(v,pi(u))+1;return Ga(v,0,C).join("")}function WO(o,u,p){if(o=Ft(o),o&&(p||u===e))return o.replace(jh,"");if(!o||!(u=Dn(u)))return o;var v=pi(o),C=Jy(v,pi(u));return Ga(v,C).join("")}function zO(o,u){var p=V,v=M;if(fr(u)){var C="separator"in u?u.separator:C;p="length"in u?lt(u.length):p,v="omission"in u?Dn(u.omission):v}o=Ft(o);var k=o.length;if(Co(o)){var P=pi(o);k=P.length}if(p>=k)return o;var q=p-bo(v);if(q<1)return v;var z=P?Ga(P,0,q).join(""):o.slice(0,q);if(C===e)return z+v;if(P&&(q+=z.length-q),Hp(C)){if(o.slice(q).search(C)){var he,pe=z;for(C.global||(C=op(C.source,Ft(vy.exec(C))+"g")),C.lastIndex=0;he=C.exec(pe);)var ye=he.index;z=z.slice(0,ye===e?q:ye)}}else if(o.indexOf(Dn(C),q)!=q){var Ie=z.lastIndexOf(C);Ie>-1&&(z=z.slice(0,Ie))}return z+v}function QO(o){return o=Ft(o),o&&sI.test(o)?o.replace(gy,xk):o}var XO=ko(function(o,u,p){return o+(p?" ":"")+u.toUpperCase()}),zp=Vv("toUpperCase");function q1(o,u,p){return o=Ft(o),u=p?e:u,u===e?_k(o)?Ak(o):ck(o):o.match(u)||[]}var G1=mt(function(o,u){try{return Rn(o,e,u)}catch(p){return jp(p)?p:new et(p)}}),JO=la(function(o,u){return jn(u,function(p){p=Li(p),sa(o,p,Vp(o[p],o))}),o});function ZO(o){var u=o==null?0:o.length,p=Ke();return o=u?sr(o,function(v){if(typeof v[1]!="function")throw new Hn(i);return[p(v[0]),v[1]]}):[],mt(function(v){for(var C=-1;++C<u;){var k=o[C];if(Rn(k[0],this,v))return Rn(k[1],this,v)}})}function $O(o){return xN(Wn(o,f))}function Qp(o){return function(){return o}}function eL(o,u){return o==null||o!==o?u:o}var tL=jv(),rL=jv(!0);function bn(o){return o}function Xp(o){return wv(typeof o=="function"?o:Wn(o,f))}function nL(o){return Cv(Wn(o,f))}function iL(o,u){return bv(o,Wn(u,f))}var aL=mt(function(o,u){return function(p){return zl(p,o,u)}}),sL=mt(function(o,u){return function(p){return zl(o,p,u)}});function Jp(o,u,p){var v=Or(u),C=Yc(u,v);p==null&&!(fr(u)&&(C.length||!v.length))&&(p=u,u=o,o=this,C=Yc(u,Or(u)));var k=!(fr(p)&&"chain"in p)||!!p.chain,P=ca(o);return jn(C,function(q){var z=u[q];o[q]=z,P&&(o.prototype[q]=function(){var he=this.__chain__;if(k||he){var pe=o(this.__wrapped__),ye=pe.__actions__=wn(this.__actions__);return ye.push({func:z,args:arguments,thisArg:o}),pe.__chain__=he,pe}return z.apply(o,Oa([this.value()],arguments))})}),o}function oL(){return Dr._===this&&(Dr._=Dk),this}function Zp(){}function lL(o){return o=lt(o),mt(function(u){return xv(u,o)})}var uL=kp(sr),cL=kp(Hy),fL=kp(ep);function V1(o){return Pp(o)?tp(Li(o)):GN(o)}function dL(o){return function(u){return o==null?e:bs(o,u)}}var hL=Yv(),pL=Yv(!0);function $p(){return[]}function e0(){return!1}function gL(){return{}}function mL(){return""}function yL(){return!0}function vL(o,u){if(o=lt(o),o<1||o>Ee)return[];var p=Ve,v=Zr(o,Ve);u=Ke(u),o-=Ve;for(var C=ip(v,u);++p<o;)u(p);return C}function _L(o){return nt(o)?sr(o,Li):On(o)?[o]:wn(l1(Ft(o)))}function wL(o){var u=++Rk;return Ft(o)+u}var EL=Zc(function(o,u){return o+u},0),CL=Np("ceil"),bL=Zc(function(o,u){return o/u},1),xL=Np("floor");function SL(o){return o&&o.length?Hc(o,bn,gp):e}function TL(o,u){return o&&o.length?Hc(o,Ke(u,2),gp):e}function AL(o){return zy(o,bn)}function IL(o,u){return zy(o,Ke(u,2))}function kL(o){return o&&o.length?Hc(o,bn,_p):e}function NL(o,u){return o&&o.length?Hc(o,Ke(u,2),_p):e}var RL=Zc(function(o,u){return o*u},1),BL=Np("round"),DL=Zc(function(o,u){return o-u},0);function OL(o){return o&&o.length?np(o,bn):0}function LL(o,u){return o&&o.length?np(o,Ke(u,2)):0}return I.after=nD,I.ary=_1,I.assign=jD,I.assignIn=D1,I.assignInWith=df,I.assignWith=HD,I.at=YD,I.before=w1,I.bind=Vp,I.bindAll=JO,I.bindKey=E1,I.castArray=gD,I.chain=m1,I.chunk=xR,I.compact=SR,I.concat=TR,I.cond=ZO,I.conforms=$O,I.constant=Qp,I.countBy=OB,I.create=WD,I.curry=C1,I.curryRight=b1,I.debounce=x1,I.defaults=zD,I.defaultsDeep=QD,I.defer=iD,I.delay=aD,I.difference=AR,I.differenceBy=IR,I.differenceWith=kR,I.drop=NR,I.dropRight=RR,I.dropRightWhile=BR,I.dropWhile=DR,I.fill=OR,I.filter=PB,I.flatMap=FB,I.flatMapDeep=qB,I.flatMapDepth=GB,I.flatten=d1,I.flattenDeep=LR,I.flattenDepth=PR,I.flip=sD,I.flow=tL,I.flowRight=rL,I.fromPairs=MR,I.functions=rO,I.functionsIn=nO,I.groupBy=VB,I.initial=FR,I.intersection=qR,I.intersectionBy=GR,I.intersectionWith=VR,I.invert=aO,I.invertBy=sO,I.invokeMap=jB,I.iteratee=Xp,I.keyBy=HB,I.keys=Or,I.keysIn=Cn,I.map=sf,I.mapKeys=lO,I.mapValues=uO,I.matches=nL,I.matchesProperty=iL,I.memoize=lf,I.merge=cO,I.mergeWith=O1,I.method=aL,I.methodOf=sL,I.mixin=Jp,I.negate=uf,I.nthArg=lL,I.omit=fO,I.omitBy=dO,I.once=oD,I.orderBy=YB,I.over=uL,I.overArgs=lD,I.overEvery=cL,I.overSome=fL,I.partial=Kp,I.partialRight=S1,I.partition=WB,I.pick=hO,I.pickBy=L1,I.property=V1,I.propertyOf=dL,I.pull=YR,I.pullAll=p1,I.pullAllBy=WR,I.pullAllWith=zR,I.pullAt=QR,I.range=hL,I.rangeRight=pL,I.rearg=uD,I.reject=XB,I.remove=XR,I.rest=cD,I.reverse=qp,I.sampleSize=ZB,I.set=gO,I.setWith=mO,I.shuffle=$B,I.slice=JR,I.sortBy=rD,I.sortedUniq=iB,I.sortedUniqBy=aB,I.split=FO,I.spread=fD,I.tail=sB,I.take=oB,I.takeRight=lB,I.takeRightWhile=uB,I.takeWhile=cB,I.tap=SB,I.throttle=dD,I.thru=af,I.toArray=N1,I.toPairs=P1,I.toPairsIn=M1,I.toPath=_L,I.toPlainObject=B1,I.transform=yO,I.unary=hD,I.union=fB,I.unionBy=dB,I.unionWith=hB,I.uniq=pB,I.uniqBy=gB,I.uniqWith=mB,I.unset=vO,I.unzip=Gp,I.unzipWith=g1,I.update=_O,I.updateWith=wO,I.values=Bo,I.valuesIn=EO,I.without=yB,I.words=q1,I.wrap=pD,I.xor=vB,I.xorBy=_B,I.xorWith=wB,I.zip=EB,I.zipObject=CB,I.zipObjectDeep=bB,I.zipWith=xB,I.entries=P1,I.entriesIn=M1,I.extend=D1,I.extendWith=df,Jp(I,I),I.add=EL,I.attempt=G1,I.camelCase=SO,I.capitalize=U1,I.ceil=CL,I.clamp=CO,I.clone=mD,I.cloneDeep=vD,I.cloneDeepWith=_D,I.cloneWith=yD,I.conformsTo=wD,I.deburr=F1,I.defaultTo=eL,I.divide=bL,I.endsWith=TO,I.eq=mi,I.escape=AO,I.escapeRegExp=IO,I.every=LB,I.find=MB,I.findIndex=c1,I.findKey=XD,I.findLast=UB,I.findLastIndex=f1,I.findLastKey=JD,I.floor=xL,I.forEach=y1,I.forEachRight=v1,I.forIn=ZD,I.forInRight=$D,I.forOwn=eO,I.forOwnRight=tO,I.get=Yp,I.gt=ED,I.gte=CD,I.has=iO,I.hasIn=Wp,I.head=h1,I.identity=bn,I.includes=KB,I.indexOf=UR,I.inRange=bO,I.invoke=oO,I.isArguments=Ts,I.isArray=nt,I.isArrayBuffer=bD,I.isArrayLike=En,I.isArrayLikeObject=vr,I.isBoolean=xD,I.isBuffer=Va,I.isDate=SD,I.isElement=TD,I.isEmpty=AD,I.isEqual=ID,I.isEqualWith=kD,I.isError=jp,I.isFinite=ND,I.isFunction=ca,I.isInteger=T1,I.isLength=cf,I.isMap=A1,I.isMatch=RD,I.isMatchWith=BD,I.isNaN=DD,I.isNative=OD,I.isNil=PD,I.isNull=LD,I.isNumber=I1,I.isObject=fr,I.isObjectLike=gr,I.isPlainObject=eu,I.isRegExp=Hp,I.isSafeInteger=MD,I.isSet=k1,I.isString=ff,I.isSymbol=On,I.isTypedArray=Ro,I.isUndefined=UD,I.isWeakMap=FD,I.isWeakSet=qD,I.join=KR,I.kebabCase=kO,I.last=Qn,I.lastIndexOf=jR,I.lowerCase=NO,I.lowerFirst=RO,I.lt=GD,I.lte=VD,I.max=SL,I.maxBy=TL,I.mean=AL,I.meanBy=IL,I.min=kL,I.minBy=NL,I.stubArray=$p,I.stubFalse=e0,I.stubObject=gL,I.stubString=mL,I.stubTrue=yL,I.multiply=RL,I.nth=HR,I.noConflict=oL,I.noop=Zp,I.now=of,I.pad=BO,I.padEnd=DO,I.padStart=OO,I.parseInt=LO,I.random=xO,I.reduce=zB,I.reduceRight=QB,I.repeat=PO,I.replace=MO,I.result=pO,I.round=BL,I.runInContext=W,I.sample=JB,I.size=eD,I.snakeCase=UO,I.some=tD,I.sortedIndex=ZR,I.sortedIndexBy=$R,I.sortedIndexOf=eB,I.sortedLastIndex=tB,I.sortedLastIndexBy=rB,I.sortedLastIndexOf=nB,I.startCase=qO,I.startsWith=GO,I.subtract=DL,I.sum=OL,I.sumBy=LL,I.template=VO,I.times=vL,I.toFinite=fa,I.toInteger=lt,I.toLength=R1,I.toLower=KO,I.toNumber=Xn,I.toSafeInteger=KD,I.toString=Ft,I.toUpper=jO,I.trim=HO,I.trimEnd=YO,I.trimStart=WO,I.truncate=zO,I.unescape=QO,I.uniqueId=wL,I.upperCase=XO,I.upperFirst=zp,I.each=y1,I.eachRight=v1,I.first=h1,Jp(I,function(){var o={};return Di(I,function(u,p){Vt.call(I.prototype,p)||(o[p]=u)}),o}(),{chain:!1}),I.VERSION=t,jn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){I[o].placeholder=I}),jn(["drop","take"],function(o,u){Tt.prototype[o]=function(p){p=p===e?1:kr(lt(p),0);var v=this.__filtered__&&!u?new Tt(this):this.clone();return v.__filtered__?v.__takeCount__=Zr(p,v.__takeCount__):v.__views__.push({size:Zr(p,Ve),type:o+(v.__dir__<0?"Right":"")}),v},Tt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),jn(["filter","map","takeWhile"],function(o,u){var p=u+1,v=p==_e||p==Ne;Tt.prototype[o]=function(C){var k=this.clone();return k.__iteratees__.push({iteratee:Ke(C,3),type:p}),k.__filtered__=k.__filtered__||v,k}}),jn(["head","last"],function(o,u){var p="take"+(u?"Right":"");Tt.prototype[o]=function(){return this[p](1).value()[0]}}),jn(["initial","tail"],function(o,u){var p="drop"+(u?"":"Right");Tt.prototype[o]=function(){return this.__filtered__?new Tt(this):this[p](1)}}),Tt.prototype.compact=function(){return this.filter(bn)},Tt.prototype.find=function(o){return this.filter(o).head()},Tt.prototype.findLast=function(o){return this.reverse().find(o)},Tt.prototype.invokeMap=mt(function(o,u){return typeof o=="function"?new Tt(this):this.map(function(p){return zl(p,o,u)})}),Tt.prototype.reject=function(o){return this.filter(uf(Ke(o)))},Tt.prototype.slice=function(o,u){o=lt(o);var p=this;return p.__filtered__&&(o>0||u<0)?new Tt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),u!==e&&(u=lt(u),p=u<0?p.dropRight(-u):p.take(u-o)),p)},Tt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Tt.prototype.toArray=function(){return this.take(Ve)},Di(Tt.prototype,function(o,u){var p=/^(?:filter|find|map|reject)|While$/.test(u),v=/^(?:head|last)$/.test(u),C=I[v?"take"+(u=="last"?"Right":""):u],k=v||/^find/.test(u);!C||(I.prototype[u]=function(){var P=this.__wrapped__,q=v?[1]:arguments,z=P instanceof Tt,he=q[0],pe=z||nt(P),ye=function(wt){var Nt=C.apply(I,Oa([wt],q));return v&&Ie?Nt[0]:Nt};pe&&p&&typeof he=="function"&&he.length!=1&&(z=pe=!1);var Ie=this.__chain__,Ue=!!this.__actions__.length,je=k&&!Ie,ft=z&&!Ue;if(!k&&pe){P=ft?P:new Tt(this);var He=o.apply(P,q);return He.__actions__.push({func:af,args:[ye],thisArg:e}),new Yn(He,Ie)}return je&&ft?o.apply(this,q):(He=this.thru(ye),je?v?He.value()[0]:He.value():He)})}),jn(["pop","push","shift","sort","splice","unshift"],function(o){var u=Nc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);I.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var k=this.value();return u.apply(nt(k)?k:[],C)}return this[p](function(P){return u.apply(nt(P)?P:[],C)})}}),Di(Tt.prototype,function(o,u){var p=I[u];if(p){var v=p.name+"";Vt.call(To,v)||(To[v]=[]),To[v].push({name:u,func:p})}}),To[Jc(e,_).name]=[{name:"wrapper",func:e}],Tt.prototype.clone=Qk,Tt.prototype.reverse=Xk,Tt.prototype.value=Jk,I.prototype.at=TB,I.prototype.chain=AB,I.prototype.commit=IB,I.prototype.next=kB,I.prototype.plant=RB,I.prototype.reverse=BB,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=DB,I.prototype.first=I.prototype.head,Gl&&(I.prototype[Gl]=NB),I},Pa=Ik();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Dr._=Pa,define(function(){return Pa})):vs?((vs.exports=Pa)._=Pa,Xh._=Pa):Dr._=Pa}).call(Cl)});var Um=ce((xW,ch)=>{var yS,vS,_S,wS,ES,CS,bS,xS,SS,lh,Mm,TS,AS,IS,Tl,kS,NS,RS,BS,DS,OS,LS,PS,uh;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof ch=="object"&&typeof ch.exports=="object"?e(r(t,r(ch.exports))):e(r(t));function r(n,i){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};yS=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},vS=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},_S=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},wS=function(n,i,a,s){var l=arguments.length,c=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(c=(l<3?f(c):l>3?f(i,a,c):f(i,a))||c);return l>3&&c&&Object.defineProperty(i,a,c),c},ES=function(n,i){return function(a,s){i(a,s,n)}},CS=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},bS=function(n,i,a,s){function l(c){return c instanceof a?c:new a(function(f){f(c)})}return new(a||(a=Promise))(function(c,f){function d(y){try{g(s.next(y))}catch(m){f(m)}}function h(y){try{g(s.throw(y))}catch(m){f(m)}}function g(y){y.done?c(y.value):l(y.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},xS=function(n,i){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(y){return h([g,y])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){a.label=g[1];break}if(g[0]===6&&a.label<c[1]){a.label=c[1],c=g;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(g);break}c[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(y){g=[6,y],l=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},SS=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&uh(i,n,a)},uh=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},lh=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Mm=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,c=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return c},TS=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Mm(arguments[i]));return n},AS=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var c=arguments[i],f=0,d=c.length;f<d;f++,l++)s[l]=c[f];return s},IS=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},Tl=function(n){return this instanceof Tl?(this.v=n,this):new Tl(n)},kS=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,c=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){s[_]&&(l[_]=function(w){return new Promise(function(E,S){c.push([_,w,E,S])>1||d(_,w)})})}function d(_,w){try{h(s[_](w))}catch(E){m(c[0][3],E)}}function h(_){_.value instanceof Tl?Promise.resolve(_.value.v).then(g,y):m(c[0][2],_)}function g(_){d("next",_)}function y(_){d("throw",_)}function m(_,w){_(w),c.shift(),c.length&&d(c[0][0],c[0][1])}},NS=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,c){i[l]=n[l]?function(f){return(a=!a)?{value:Tl(n[l](f)),done:l==="return"}:c?c(f):f}:c}},RS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof lh=="function"?lh(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(c){a[c]=n[c]&&function(f){return new Promise(function(d,h){f=n[c](f),l(d,h,f.done,f.value)})}}function l(c,f,d,h){Promise.resolve(h).then(function(g){c({value:g,done:d})},f)}},BS=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};DS=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&uh(i,n,a);return r(i,n),i},OS=function(n){return n&&n.__esModule?n:{default:n}},LS=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},PS=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},e("__extends",yS),e("__assign",vS),e("__rest",_S),e("__decorate",wS),e("__param",ES),e("__metadata",CS),e("__awaiter",bS),e("__generator",xS),e("__exportStar",SS),e("__createBinding",uh),e("__values",lh),e("__read",Mm),e("__spread",TS),e("__spreadArrays",AS),e("__spreadArray",IS),e("__await",Tl),e("__asyncGenerator",kS),e("__asyncDelegator",NS),e("__asyncValues",RS),e("__makeTemplateObject",BS),e("__importStar",DS),e("__importDefault",OS),e("__classPrivateFieldGet",LS),e("__classPrivateFieldSet",PS)})});var cT=ce((Nz,yh)=>{var jS,HS,YS,WS,zS,QS,XS,JS,ZS,mh,Gm,$S,eT,Al,tT,rT,nT,iT,aT,sT,oT,lT,uT;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof yh=="object"&&typeof yh.exports=="object"?e(r(t,r(yh.exports))):e(r(t));function r(n,i){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};jS=function(r,n){t(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},HS=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},YS=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},WS=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(c=r[f])&&(l=(s<3?c(l):s>3?c(n,i,l):c(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},zS=function(r,n){return function(i,a){n(i,a,r)}},QS=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},XS=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(g){try{h(a.next(g))}catch(y){c(y)}}function d(g){try{h(a.throw(g))}catch(y){c(y)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},JS=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},uT=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},ZS=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},mh=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Gm=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],c;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){c={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(c)throw c.error}}return l},$S=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(Gm(arguments[n]));return r},eT=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],c=0,f=l.length;c<f;c++,s++)a[s]=l[c];return a},Al=function(r){return this instanceof Al?(this.v=r,this):new Al(r)},tT=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(m){a[m]&&(s[m]=function(_){return new Promise(function(w,E){l.push([m,_,w,E])>1||f(m,_)})})}function f(m,_){try{d(a[m](_))}catch(w){y(l[0][3],w)}}function d(m){m.value instanceof Al?Promise.resolve(m.value.v).then(h,g):y(l[0][2],m)}function h(m){f("next",m)}function g(m){f("throw",m)}function y(m,_){m(_),l.shift(),l.length&&f(l[0][0],l[0][1])}},rT=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(c){return(i=!i)?{value:Al(r[s](c)),done:s==="return"}:l?l(c):c}:l}},nT=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof mh=="function"?mh(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(c){return new Promise(function(f,d){c=r[l](c),s(f,d,c.done,c.value)})}}function s(l,c,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},c)}},iT=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},aT=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},sT=function(r){return r&&r.__esModule?r:{default:r}},oT=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},lT=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},e("__extends",jS),e("__assign",HS),e("__rest",YS),e("__decorate",WS),e("__param",zS),e("__metadata",QS),e("__awaiter",XS),e("__generator",JS),e("__exportStar",ZS),e("__createBinding",uT),e("__values",mh),e("__read",Gm),e("__spread",$S),e("__spreadArrays",eT),e("__await",Al),e("__asyncGenerator",tT),e("__asyncDelegator",rT),e("__asyncValues",nT),e("__makeTemplateObject",iT),e("__importStar",aT),e("__importDefault",sT),e("__classPrivateFieldGet",oT),e("__classPrivateFieldSet",lT)})});var zm=ce(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var pr=require("obsidian"),Ym="YYYY-MM-DD",Wm="gggg-[W]ww",rA="YYYY-MM",nA="YYYY-[Q]Q",iA="YYYY";function ac(e){var r,n;let t=window.app.plugins.getPlugin("periodic-notes");return t&&((n=(r=t.settings)==null?void 0:r[e])==null?void 0:n.enabled)}function sc(){var e,t,r,n;try{let{internalPlugins:i,plugins:a}=window.app;if(ac("daily")){let{format:f,folder:d,template:h}=((t=(e=a.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:t.daily)||{};return{format:f||Ym,folder:(d==null?void 0:d.trim())||"",template:(h==null?void 0:h.trim())||""}}let{folder:s,format:l,template:c}=((n=(r=i.getPluginById("daily-notes"))==null?void 0:r.instance)==null?void 0:n.options)||{};return{format:l||Ym,folder:(s==null?void 0:s.trim())||"",template:(c==null?void 0:c.trim())||""}}catch(i){console.info("No custom daily note settings found!",i)}}function oc(){var e,t,r,n,i,a,s;try{let l=window.app.plugins,c=(e=l.getPlugin("calendar"))==null?void 0:e.options,f=(r=(t=l.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:r.weekly;if(ac("weekly"))return{format:f.format||Wm,folder:((n=f.folder)==null?void 0:n.trim())||"",template:((i=f.template)==null?void 0:i.trim())||""};let d=c||{};return{format:d.weeklyNoteFormat||Wm,folder:((a=d.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=d.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(l){console.info("No custom weekly note settings found!",l)}}function lc(){var t,r,n,i;let e=window.app.plugins;try{let a=ac("monthly")&&((r=(t=e.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:r.monthly)||{};return{format:a.format||rA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function uc(){var t,r,n,i;let e=window.app.plugins;try{let a=ac("quarterly")&&((r=(t=e.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:r.quarterly)||{};return{format:a.format||nA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function cc(){var t,r,n,i;let e=window.app.plugins;try{let a=ac("yearly")&&((r=(t=e.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:r.yearly)||{};return{format:a.format||iA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function aA(...e){let t=[];for(let n=0,i=e.length;n<i;n++)t=t.concat(e[n].split("/"));let r=[];for(let n=0,i=t.length;n<i;n++){let a=t[n];!a||a==="."||r.push(a)}return t[0]===""&&r.unshift(""),r.join("/")}function Dq(e){let t=e.substring(e.lastIndexOf("/")+1);return t.lastIndexOf(".")!=-1&&(t=t.substring(0,t.lastIndexOf("."))),t}function Oq(e){return U(this,null,function*(){let t=e.replace(/\\/g,"/").split("/");if(t.pop(),t.length){let r=aA(...t);window.app.vault.getAbstractFileByPath(r)||(yield window.app.vault.createFolder(r))}})}function fc(e,t){return U(this,null,function*(){t.endsWith(".md")||(t+=".md");let r=pr.normalizePath(aA(e,t));return yield Oq(r),r})}function Bl(e){return U(this,null,function*(){let{metadataCache:t,vault:r}=window.app,n=pr.normalizePath(e);if(n==="/")return Promise.resolve(["",null]);try{let i=t.getFirstLinkpathDest(n,""),a=yield r.cachedRead(i),s=window.app.foldManager.load(i);return[a,s]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new pr.Notice("Failed to read the daily note template"),["",null]}})}function Ri(e,t="day"){let r=e.clone().startOf(t).format();return`${t}-${r}`}function sA(e){return e.replace(/\[[^\]]*\]/g,"")}function Lq(e,t){if(t==="week"){let r=sA(e);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function Dl(e,t){return oA(e.basename,t)}function Pq(e,t){return oA(Dq(e),t)}function oA(e,t){let n={day:sc,week:oc,month:lc,quarter:uc,year:cc}[t]().format.split("/").pop(),i=window.moment(e,n,!0);if(!i.isValid())return null;if(Lq(n,t)&&t==="week"){let a=sA(n);if(/w{1,2}/i.test(a))return window.moment(e,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var lA=class extends Error{};function uA(e){return U(this,null,function*(){let t=window.app,{vault:r}=t,n=window.moment,{template:i,format:a,folder:s}=sc(),[l,c]=yield Bl(i),f=e.format(a),d=yield fc(s,f);try{let h=yield r.create(d,l.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,y,m,_,w,E)=>{let S=n(),N=e.clone().set({hour:S.get("hour"),minute:S.get("minute"),second:S.get("second")});return m&&N.add(parseInt(_,10),w),E?N.format(E.substring(1).trim()):N.format(a)}).replace(/{{\s*yesterday\s*}}/gi,e.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,e.clone().add(1,"d").format(a)));return t.foldManager.save(h,c),h}catch(h){console.error(`Failed to create file: '${d}'`,h),new pr.Notice("Unable to create new file.")}})}function Mq(e,t){var r;return(r=t[Ri(e,"day")])!=null?r:null}function Uq(){let{vault:e}=window.app,{folder:t}=sc(),r=e.getAbstractFileByPath(pr.normalizePath(t));if(!r)throw new lA("Failed to find daily notes folder");let n={};return pr.Vault.recurseChildren(r,i=>{if(i instanceof pr.TFile){let a=Dl(i,"day");if(a){let s=Ri(a,"day");n[s]=i}}}),n}var cA=class extends Error{};function Fq(){let{moment:e}=window,t=e.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;t;)r.push(r.shift()),t--;return r}function qq(e){return Fq().indexOf(e.toLowerCase())}function fA(e){return U(this,null,function*(){let{vault:t}=window.app,{template:r,format:n,folder:i}=oc(),[a,s]=yield Bl(r),l=e.format(n),c=yield fc(i,l);try{let f=yield t.create(c,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let w=window.moment(),E=e.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(y,10),m),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,h,g)=>{let y=qq(h);return e.weekday(y).format(g.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${c}'`,f),new pr.Notice("Unable to create new file.")}})}function Gq(e,t){var r;return(r=t[Ri(e,"week")])!=null?r:null}function Vq(){let e={};if(!mA())return e;let{vault:t}=window.app,{folder:r}=oc(),n=t.getAbstractFileByPath(pr.normalizePath(r));if(!n)throw new cA("Failed to find weekly notes folder");return pr.Vault.recurseChildren(n,i=>{if(i instanceof pr.TFile){let a=Dl(i,"week");if(a){let s=Ri(a,"week");e[s]=i}}}),e}var dA=class extends Error{};function hA(e){return U(this,null,function*(){let{vault:t}=window.app,{template:r,format:n,folder:i}=lc(),[a,s]=yield Bl(r),l=e.format(n),c=yield fc(i,l);try{let f=yield t.create(c,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let w=window.moment(),E=e.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(y,10),m),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${c}'`,f),new pr.Notice("Unable to create new file.")}})}function Kq(e,t){var r;return(r=t[Ri(e,"month")])!=null?r:null}function jq(){let e={};if(!yA())return e;let{vault:t}=window.app,{folder:r}=lc(),n=t.getAbstractFileByPath(pr.normalizePath(r));if(!n)throw new dA("Failed to find monthly notes folder");return pr.Vault.recurseChildren(n,i=>{if(i instanceof pr.TFile){let a=Dl(i,"month");if(a){let s=Ri(a,"month");e[s]=i}}}),e}var pA=class extends Error{};function Hq(e){return U(this,null,function*(){let{vault:t}=window.app,{template:r,format:n,folder:i}=uc(),[a,s]=yield Bl(r),l=e.format(n),c=yield fc(i,l);try{let f=yield t.create(c,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let w=window.moment(),E=e.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(y,10),m),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${c}'`,f),new pr.Notice("Unable to create new file.")}})}function Yq(e,t){var r;return(r=t[Ri(e,"quarter")])!=null?r:null}function Wq(){let e={};if(!vA())return e;let{vault:t}=window.app,{folder:r}=uc(),n=t.getAbstractFileByPath(pr.normalizePath(r));if(!n)throw new pA("Failed to find quarterly notes folder");return pr.Vault.recurseChildren(n,i=>{if(i instanceof pr.TFile){let a=Dl(i,"quarter");if(a){let s=Ri(a,"quarter");e[s]=i}}}),e}var gA=class extends Error{};function zq(e){return U(this,null,function*(){let{vault:t}=window.app,{template:r,format:n,folder:i}=cc(),[a,s]=yield Bl(r),l=e.format(n),c=yield fc(i,l);try{let f=yield t.create(c,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let w=window.moment(),E=e.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(y,10),m),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${c}'`,f),new pr.Notice("Unable to create new file.")}})}function Qq(e,t){var r;return(r=t[Ri(e,"year")])!=null?r:null}function Xq(){let e={};if(!_A())return e;let{vault:t}=window.app,{folder:r}=cc(),n=t.getAbstractFileByPath(pr.normalizePath(r));if(!n)throw new gA("Failed to find yearly notes folder");return pr.Vault.recurseChildren(n,i=>{if(i instanceof pr.TFile){let a=Dl(i,"year");if(a){let s=Ri(a,"year");e[s]=i}}}),e}function Jq(){var n,i;let{app:e}=window,t=e.internalPlugins.plugins["daily-notes"];if(t&&t.enabled)return!0;let r=e.plugins.getPlugin("periodic-notes");return r&&((i=(n=r.settings)==null?void 0:n.daily)==null?void 0:i.enabled)}function mA(){var r,n;let{app:e}=window;if(e.plugins.getPlugin("calendar"))return!0;let t=e.plugins.getPlugin("periodic-notes");return t&&((n=(r=t.settings)==null?void 0:r.weekly)==null?void 0:n.enabled)}function yA(){var r,n;let{app:e}=window,t=e.plugins.getPlugin("periodic-notes");return t&&((n=(r=t.settings)==null?void 0:r.monthly)==null?void 0:n.enabled)}function vA(){var r,n;let{app:e}=window,t=e.plugins.getPlugin("periodic-notes");return t&&((n=(r=t.settings)==null?void 0:r.quarterly)==null?void 0:n.enabled)}function _A(){var r,n;let{app:e}=window,t=e.plugins.getPlugin("periodic-notes");return t&&((n=(r=t.settings)==null?void 0:r.yearly)==null?void 0:n.enabled)}function Zq(e){return{day:sc,week:oc,month:lc,quarter:uc,year:cc}[e]()}function $q(e,t){return{day:uA,month:hA,week:fA}[e](t)}yt.DEFAULT_DAILY_NOTE_FORMAT=Ym;yt.DEFAULT_MONTHLY_NOTE_FORMAT=rA;yt.DEFAULT_QUARTERLY_NOTE_FORMAT=nA;yt.DEFAULT_WEEKLY_NOTE_FORMAT=Wm;yt.DEFAULT_YEARLY_NOTE_FORMAT=iA;yt.appHasDailyNotesPluginLoaded=Jq;yt.appHasMonthlyNotesPluginLoaded=yA;yt.appHasQuarterlyNotesPluginLoaded=vA;yt.appHasWeeklyNotesPluginLoaded=mA;yt.appHasYearlyNotesPluginLoaded=_A;yt.createDailyNote=uA;yt.createMonthlyNote=hA;yt.createPeriodicNote=$q;yt.createQuarterlyNote=Hq;yt.createWeeklyNote=fA;yt.createYearlyNote=zq;yt.getAllDailyNotes=Uq;yt.getAllMonthlyNotes=jq;yt.getAllQuarterlyNotes=Wq;yt.getAllWeeklyNotes=Vq;yt.getAllYearlyNotes=Xq;yt.getDailyNote=Mq;yt.getDailyNoteSettings=sc;yt.getDateFromFile=Dl;yt.getDateFromPath=Pq;yt.getDateUID=Ri;yt.getMonthlyNote=Kq;yt.getMonthlyNoteSettings=lc;yt.getPeriodicNoteSettings=Zq;yt.getQuarterlyNote=Yq;yt.getQuarterlyNoteSettings=uc;yt.getTemplateInfo=Bl;yt.getWeeklyNote=Gq;yt.getWeeklyNoteSettings=oc;yt.getYearlyNote=Qq;yt.getYearlyNoteSettings=cc});var xA=ce(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.isDate=ds.isComparable=ds.isIterable=void 0;ds.isIterable=e=>!(e==null||e[Symbol.iterator]==null);ds.isComparable=e=>{let t=Object.prototype.toString,r=e;return r.compare!=null&&t.call(r.compare).endsWith("Function]")};ds.isDate=e=>Object.prototype.toString.call(e).endsWith("Date]")});var TA=ce(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0})});var AA=ce(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});var tG=Um(),Qm=xA(),rG=(e,t)=>e-t,nG=(e,t)=>Number(e-t),iG=(e,t)=>e.localeCompare(t),aG=(e,t)=>e.getTime()-t.getTime(),Ol={number:rG,string:iG,Date:aG,bigInt:nG,none:()=>0},sG=e=>{if(typeof e=="number")return Ol.number;if(typeof e=="string")return Ol.string;if(typeof e=="bigint")return Ol.bigInt;if(Qm.isDate(e))return Ol.Date;if(Qm.isComparable(e))return(t,r)=>t.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},po=class extends Map{constructor(t,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=Ol.none,this.sortedKeys=[],Qm.isIterable(t)&&this._constructor(t,r),this.isCompareFn(t)&&this._constructor(null,t),t==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(t,r){return Math.sign(this.compareFn(t,r))}_constructor(t,r){if(this.compareFn=r==null?Ol.none:r,this.specifiedCompareFn=r!=null,t!=null)for(let n of t)this.set(...n)}static fromMap(t,r){let n=new po(r);return n.setAll(t),n}duplicate(){return po.fromMap(this,this.compareFn)}toMap(){let t=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{t.set(n,i)}),t}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(t){let r=this.sortedKeys.find(n=>this.comparator(n,t)===0);if(r!=null)return super.get(r)}set(t,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=sG(t),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,t)===0);return n==null?(this.sortedKeys.push(t),super.set(t,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(t){return t.forEach((r,n)=>{this.set(n,r)}),this}delete(t){return super.delete(t)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,t)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(t=>super.get(t)).values()}entries(){return this.toMap().entries()}firstEntry(){let t=this.firstKey();if(t==null)return;let r=this.get(t);return r===void 0?void 0:[t,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let t=this.lastKey();if(t==null)return;let r=this.get(t);return r===void 0?void 0:[t,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let t=this.firstEntry();if(t!=null)return this.delete(t[0]),t}popEntry(){let t=this.lastEntry();if(t!=null)return this.delete(t[0]),t}floorEntry(t){let r=this.floorKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)<=0).reverse()[0]}ceilingEntry(t){let r=this.ceilingKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)>=0)[0]}lowerEntry(t){let r=this.lowerKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)<0).reverse()[0]}higherEntry(t){let r=this.higherKey(t);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(t){return this.sortedKeys.filter(n=>this.compare(n,t)>0)[0]}splitLower(t,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],t)<0;return r?a||this.compare(i[0],t)===0:a});return new po(n,this.compareFn)}splitHigher(t,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],t)>0;return r?a||this.compare(i[0],t)===0:a});return new po(n,this.compareFn)}forEach(t,r){Array.from(this.entries()).forEach(([n,i])=>{t(i,n,this)},r)}};xh.default=po;tG.__exportStar(TA(),xh)});KL(exports,{default:()=>xt});var Fl=ut(require("obsidian"));var t0=ut(require("obsidian")),hf=new Map;function dr(e){let t=window.moment();hf.has(e)?hf.get(e).isBefore(t)&&(new t0.Notice(e),hf.set(e,t.add(1,"minute"))):(new t0.Notice(e),hf.set(e,t.add(1,"minute")))}var Kt=ut(require("obsidian"));var pf=()=>{var e;return(e=window.localStorage.getItem("googleCalendarAccessToken"))!=null?e:""},ha=()=>{var e;return(e=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?e:""},gf=()=>{var t;let e=(t=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?t:"0";return parseInt(e,10)},As=()=>{var e;return(e=window.localStorage.getItem("googleCalendarUserId"))!=null?e:""},Ka=e=>{e!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",e)},mf=e=>{e!="undefined"&&window.localStorage.setItem("googleCalendarUserId",e)},ru=e=>{e!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",e)},ja=e=>{isNaN(e)||window.localStorage.setItem("googleCalendarExpirationTime",e+"")};var Ys=ut(require("obsidian")),pm=42813;function W8(){return!(!pf()||pf()==""||!gf()||isNaN(gf())||gf()<+new Date)}var z8=e=>U(void 0,null,function*(){let t={client_id:e.settings.googleClientId,client_secret:e.settings.googleClientSecret,grant_type:"refresh_token",refresh_token:ha()},r=yield(0,Ys.requestUrl)({method:"POST",url:"https://oauth2.googleapis.com/token",body:JSON.stringify(t)});if(r.status!=200)return!1;let n=yield r.json;return Ka(n.access_token),ja(+new Date+n.expires_in*1e3),!0}),Nx=e=>U(void 0,null,function*(){let t={uid:As()},r=yield(0,Ys.requestUrl)({url:`${e.settings.googleOAuthServer}/api/google/refresh`,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(r.status!=200)return!1;let{tokenData:n}=yield r.json;return Ka(n.access_token),ja(+new Date+n.expires_in*1e3),!0});function An(){return U(this,null,function*(){let e=xt.getInstance();if(!Yt())return"";let t=!1;return W8()==!1&&(ha()!=""||As()!="")&&(e.settings.useCustomClient?(t=yield z8(e),t==!1&&(t=yield Nx(e))):t=yield Nx(e)),pf()})}function Rx(){return U(this,null,function*(){let e=xt.getInstance();if(Ys.Platform.isDesktop){if(!Bx())return;let{OAuth2Client:t}=hx(),r=require("http"),n=Ax(),i=require("url"),a=kx(),s=new t(e.settings.googleClientId,e.settings.googleClientSecret,`http://127.0.0.1:${pm}/callback`),l=s.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),c=r.createServer((f,d)=>U(this,null,function*(){try{if(f.url.indexOf("/callback")>-1){let g=new i.URL(f.url,`http://localhost:${pm}`).searchParams.get("code");d.end("Authentication successful! Please return to obsidian."),c.destroy();let y=yield s.getToken(g);ru(y.tokens.refresh_token),Ka(y.tokens.access_token),ja(y.tokens.expiry_date),console.info("Tokens acquired."),e.settingsTab.display()}}catch(h){console.log("Auth failed")}})).listen(pm,()=>U(this,null,function*(){(yield n(l,{wait:!1})).unref()}));a(c)}else new Ys.Notice("Can't use OAuth on this device")})}var Dx=ut(require("obsidian"));var gm=new Map,mm=new Map;function Ox(){return U(this,null,function*(){var r,n;if(!Yt())return;let e=yield(0,Dx.requestUrl)({url:"https://www.googleapis.com/calendar/v3/colors",headers:{Authorization:"Bearer "+(yield An())}});if(e.status!==200){dr("Could not load Google Colors");return}let t=yield e.json;for(let i=1;;i++){let a=(r=t.calendar[i+""])==null?void 0:r.background;if(!a)break;gm.set(i+"",a)}for(let i=1;;i++){let a=(n=t.event[i+""])==null?void 0:n.background;if(!a)break;mm.set(i+"",a)}})}function Lu(e){return e.colorId&&mm.has(e.colorId)?mm.get(e.colorId):e.parent.colorId&&gm.has(e.parent.colorId)?gm.get(e.parent.colorId):"#a4bdfc"}var Lx=ut(require("obsidian"));var ym=[];function Px(e,t){return t.filter(n=>e.settings.calendarBlackList.findIndex(a=>a[0]==n.id)==-1)}function pn(){return U(this,null,function*(){if(!Yt())return[];let e=xt.getInstance();if(ym.length)return Px(e,ym);yield Ox();let t=yield(0,Lx.requestUrl)({url:"https://www.googleapis.com/calendar/v3/users/me/calendarList",headers:{Authorization:"Bearer "+(yield An())}});if(t.status!==200)return dr("Could not list Google Calendars"),[];let r=yield t.json;return ym=r.items,Px(e,r.items)})}var Ii=ut(require("obsidian"));var iS=ut(require("obsidian"));var yr="top",Nr="bottom",Sr="right",wr="left",Qd="auto",ss=[yr,Nr,Sr,wr],Ca="start",Ws="end",Mx="clippingParents",Xd="viewport",yl="popper",Ux="reference",vm=ss.reduce(function(e,t){return e.concat([t+"-"+Ca,t+"-"+Ws])},[]),Jd=[].concat(ss,[Qd]).reduce(function(e,t){return e.concat([t,t+"-"+Ca,t+"-"+Ws])},[]),Q8="beforeRead",X8="read",J8="afterRead",Z8="beforeMain",$8="main",eF="afterMain",tF="beforeWrite",rF="write",nF="afterWrite",Fx=[Q8,X8,J8,Z8,$8,eF,tF,rF,nF];function qr(e){return e?(e.nodeName||"").toLowerCase():null}function hr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ii(e){var t=hr(e).Element;return e instanceof t||e instanceof Element}function Rr(e){var t=hr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function vl(e){if(typeof ShadowRoot=="undefined")return!1;var t=hr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function iF(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!Rr(a)||!qr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function aF(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),l=s.reduce(function(c,f){return c[f]="",c},{});!Rr(i)||!qr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(c){i.removeAttribute(c)}))})}}var qx={name:"applyStyles",enabled:!0,phase:"write",fn:iF,effect:aF,requires:["computeStyles"]};function Gr(e){return e.split("-")[0]}var Si=Math.max,zs=Math.min,ba=Math.round;function _l(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Pu(){return!/^((?!chrome|android).)*safari/i.test(_l())}function ai(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,a=1;t&&Rr(e)&&(i=e.offsetWidth>0&&ba(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ba(n.height)/e.offsetHeight||1);var s=ii(e)?hr(e):window,l=s.visualViewport,c=!Pu()&&r,f=(n.left+(c&&l?l.offsetLeft:0))/i,d=(n.top+(c&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function Qs(e){var t=ai(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Mu(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&vl(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function gn(e){return hr(e).getComputedStyle(e)}function _m(e){return["table","td","th"].indexOf(qr(e))>=0}function zr(e){return((ii(e)?e.ownerDocument:e.document)||window.document).documentElement}function xa(e){return qr(e)==="html"?e:e.assignedSlot||e.parentNode||(vl(e)?e.host:null)||zr(e)}function Gx(e){return!Rr(e)||gn(e).position==="fixed"?null:e.offsetParent}function sF(e){var t=/firefox/i.test(_l()),r=/Trident/i.test(_l());if(r&&Rr(e)){var n=gn(e);if(n.position==="fixed")return null}var i=xa(e);for(vl(i)&&(i=i.host);Rr(i)&&["html","body"].indexOf(qr(i))<0;){var a=gn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Ti(e){for(var t=hr(e),r=Gx(e);r&&_m(r)&&gn(r).position==="static";)r=Gx(r);return r&&(qr(r)==="html"||qr(r)==="body"&&gn(r).position==="static")?t:r||sF(e)||t}function Xs(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Js(e,t,r){return Si(e,zs(t,r))}function Vx(e,t,r){var n=Js(e,t,r);return n>r?r:n}function Uu(){return{top:0,right:0,bottom:0,left:0}}function Fu(e){return Object.assign({},Uu(),e)}function qu(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var oF=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Fu(typeof t!="number"?t:qu(t,ss))};function lF(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Gr(r.placement),c=Xs(l),f=[wr,Sr].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=oF(i.padding,r),g=Qs(a),y=c==="y"?yr:wr,m=c==="y"?Nr:Sr,_=r.rects.reference[d]+r.rects.reference[c]-s[c]-r.rects.popper[d],w=s[c]-r.rects.reference[c],E=Ti(a),S=E?c==="y"?E.clientHeight||0:E.clientWidth||0:0,N=_/2-w/2,R=h[y],D=S-g[d]-h[m],O=S/2-g[d]/2+N,te=Js(R,O,D),V=c;r.modifiersData[n]=(t={},t[V]=te,t.centerOffset=te-O,t)}}function uF(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!Mu(t.elements.popper,i)||(t.elements.arrow=i))}var Kx={name:"arrow",enabled:!0,phase:"main",fn:lF,effect:uF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function si(e){return e.split("-")[1]}var cF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fF(e){var t=e.x,r=e.y,n=window,i=n.devicePixelRatio||1;return{x:ba(t*i)/i||0,y:ba(r*i)/i||0}}function jx(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,l=e.position,c=e.gpuAcceleration,f=e.adaptive,d=e.roundOffsets,h=e.isFixed,g=s.x,y=g===void 0?0:g,m=s.y,_=m===void 0?0:m,w=typeof d=="function"?d({x:y,y:_}):{x:y,y:_};y=w.x,_=w.y;var E=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),N=wr,R=yr,D=window;if(f){var O=Ti(r),te="clientHeight",V="clientWidth";if(O===hr(r)&&(O=zr(r),gn(O).position!=="static"&&l==="absolute"&&(te="scrollHeight",V="scrollWidth")),O=O,i===yr||(i===wr||i===Sr)&&a===Ws){R=Nr;var M=h&&O===D&&D.visualViewport?D.visualViewport.height:O[te];_-=M-n.height,_*=c?1:-1}if(i===wr||(i===yr||i===Nr)&&a===Ws){N=Sr;var le=h&&O===D&&D.visualViewport?D.visualViewport.width:O[V];y-=le-n.width,y*=c?1:-1}}var se=Object.assign({position:l},f&&cF),_e=d===!0?fF({x:y,y:_}):{x:y,y:_};if(y=_e.x,_=_e.y,c){var Oe;return Object.assign({},se,(Oe={},Oe[R]=S?"0":"",Oe[N]=E?"0":"",Oe.transform=(D.devicePixelRatio||1)<=1?"translate("+y+"px, "+_+"px)":"translate3d("+y+"px, "+_+"px, 0)",Oe))}return Object.assign({},se,(t={},t[R]=S?_+"px":"",t[N]=E?y+"px":"",t.transform="",t))}function dF(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,c=l===void 0?!0:l;if(!1)var f;var d={placement:Gr(t.placement),variation:si(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jx(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jx(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Hx={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dF,data:{}};var Zd={passive:!0};function hF(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,c=hr(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,Zd)}),l&&c.addEventListener("resize",r.update,Zd),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,Zd)}),l&&c.removeEventListener("resize",r.update,Zd)}}var Yx={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hF,data:{}};var pF={left:"right",right:"left",bottom:"top",top:"bottom"};function wl(e){return e.replace(/left|right|bottom|top/g,function(t){return pF[t]})}var gF={start:"end",end:"start"};function $d(e){return e.replace(/start|end/g,function(t){return gF[t]})}function Zs(e){var t=hr(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function $s(e){return ai(zr(e)).left+Zs(e).scrollLeft}function wm(e,t){var r=hr(e),n=zr(e),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,c=0;if(i){a=i.width,s=i.height;var f=Pu();(f||!f&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:s,x:l+$s(e),y:c}}function Em(e){var t,r=zr(e),n=Zs(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=Si(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Si(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+$s(e),c=-n.scrollTop;return gn(i||r).direction==="rtl"&&(l+=Si(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:c}}function eo(e){var t=gn(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function eh(e){return["html","body","#document"].indexOf(qr(e))>=0?e.ownerDocument.body:Rr(e)&&eo(e)?e:eh(xa(e))}function os(e,t){var r;t===void 0&&(t=[]);var n=eh(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=hr(n),s=i?[a].concat(a.visualViewport||[],eo(n)?n:[]):n,l=t.concat(s);return i?l:l.concat(os(xa(s)))}function El(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function mF(e,t){var r=ai(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Wx(e,t,r){return t===Xd?El(wm(e,r)):ii(t)?mF(t,r):El(Em(zr(e)))}function yF(e){var t=os(xa(e)),r=["absolute","fixed"].indexOf(gn(e).position)>=0,n=r&&Rr(e)?Ti(e):e;return ii(n)?t.filter(function(i){return ii(i)&&Mu(i,n)&&qr(i)!=="body"}):[]}function Cm(e,t,r,n){var i=t==="clippingParents"?yF(e):[].concat(t),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(c,f){var d=Wx(e,f,n);return c.top=Si(d.top,c.top),c.right=zs(d.right,c.right),c.bottom=zs(d.bottom,c.bottom),c.left=Si(d.left,c.left),c},Wx(e,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Gu(e){var t=e.reference,r=e.element,n=e.placement,i=n?Gr(n):null,a=n?si(n):null,s=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(i){case yr:c={x:s,y:t.y-r.height};break;case Nr:c={x:s,y:t.y+t.height};break;case Sr:c={x:t.x+t.width,y:l};break;case wr:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var f=i?Xs(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case Ca:c[f]=c[f]-(t[d]/2-r[d]/2);break;case Ws:c[f]=c[f]+(t[d]/2-r[d]/2);break;default:}}return c}function Ai(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.strategy,s=a===void 0?e.strategy:a,l=r.boundary,c=l===void 0?Mx:l,f=r.rootBoundary,d=f===void 0?Xd:f,h=r.elementContext,g=h===void 0?yl:h,y=r.altBoundary,m=y===void 0?!1:y,_=r.padding,w=_===void 0?0:_,E=Fu(typeof w!="number"?w:qu(w,ss)),S=g===yl?Ux:yl,N=e.rects.popper,R=e.elements[m?S:g],D=Cm(ii(R)?R:R.contextElement||zr(e.elements.popper),c,d,s),O=ai(e.elements.reference),te=Gu({reference:O,element:N,strategy:"absolute",placement:i}),V=El(Object.assign({},N,te)),M=g===yl?V:O,le={top:D.top-M.top+E.top,bottom:M.bottom-D.bottom+E.bottom,left:D.left-M.left+E.left,right:M.right-D.right+E.right},se=e.modifiersData.offset;if(g===yl&&se){var _e=se[i];Object.keys(le).forEach(function(Oe){var Ne=[Sr,Nr].indexOf(Oe)>=0?1:-1,Se=[yr,Nr].indexOf(Oe)>=0?"y":"x";le[Oe]+=_e[Se]*Ne})}return le}function bm(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,f=c===void 0?Jd:c,d=si(n),h=d?l?vm:vm.filter(function(m){return si(m)===d}):ss,g=h.filter(function(m){return f.indexOf(m)>=0});g.length===0&&(g=h);var y=g.reduce(function(m,_){return m[_]=Ai(e,{placement:_,boundary:i,rootBoundary:a,padding:s})[Gr(_)],m},{});return Object.keys(y).sort(function(m,_){return y[m]-y[_]})}function vF(e){if(Gr(e)===Qd)return[];var t=wl(e);return[$d(e),t,$d(t)]}function _F(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,c=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,y=r.flipVariations,m=y===void 0?!0:y,_=r.allowedAutoPlacements,w=t.options.placement,E=Gr(w),S=E===w,N=c||(S||!m?[wl(w)]:vF(w)),R=[w].concat(N).reduce(function(gt,tt){return gt.concat(Gr(tt)===Qd?bm(t,{placement:tt,boundary:d,rootBoundary:h,padding:f,flipVariations:m,allowedAutoPlacements:_}):tt)},[]),D=t.rects.reference,O=t.rects.popper,te=new Map,V=!0,M=R[0],le=0;le<R.length;le++){var se=R[le],_e=Gr(se),Oe=si(se)===Ca,Ne=[yr,Nr].indexOf(_e)>=0,Se=Ne?"width":"height",Ee=Ai(t,{placement:se,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),ve=Ne?Oe?Sr:wr:Oe?Nr:yr;D[Se]>O[Se]&&(ve=wl(ve));var ze=wl(ve),Ve=[];if(a&&Ve.push(Ee[_e]<=0),l&&Ve.push(Ee[ve]<=0,Ee[ze]<=0),Ve.every(function(gt){return gt})){M=se,V=!1;break}te.set(se,Ve)}if(V)for(var vt=m?3:1,pt=function(tt){var _t=R.find(function(Ze){var Ce=te.get(Ze);if(Ce)return Ce.slice(0,tt).every(function(A){return A})});if(_t)return M=_t,"break"},Qe=vt;Qe>0;Qe--){var fe=pt(Qe);if(fe==="break")break}t.placement!==M&&(t.modifiersData[n]._skip=!0,t.placement=M,t.reset=!0)}}var zx={name:"flip",enabled:!0,phase:"main",fn:_F,requiresIfExists:["offset"],data:{_skip:!1}};function Qx(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Xx(e){return[yr,Sr,Nr,wr].some(function(t){return e[t]>=0})}function wF(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,s=Ai(t,{elementContext:"reference"}),l=Ai(t,{altBoundary:!0}),c=Qx(s,n),f=Qx(l,i,a),d=Xx(c),h=Xx(f);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var Jx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wF};function EF(e,t,r){var n=Gr(e),i=[wr,yr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[wr,Sr].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function CF(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,s=Jd.reduce(function(d,h){return d[h]=EF(h,t.rects,a),d},{}),l=s[t.placement],c=l.x,f=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=f),t.modifiersData[n]=s}var Zx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:CF};function bF(e){var t=e.state,r=e.name;t.modifiersData[r]=Gu({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var $x={name:"popperOffsets",enabled:!0,phase:"read",fn:bF,data:{}};function xm(e){return e==="x"?"y":"x"}function xF(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,c=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,y=g===void 0?!0:g,m=r.tetherOffset,_=m===void 0?0:m,w=Ai(t,{boundary:c,rootBoundary:f,padding:h,altBoundary:d}),E=Gr(t.placement),S=si(t.placement),N=!S,R=Xs(E),D=xm(R),O=t.modifiersData.popperOffsets,te=t.rects.reference,V=t.rects.popper,M=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,le=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),se=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,_e={x:0,y:0};if(!!O){if(a){var Oe,Ne=R==="y"?yr:wr,Se=R==="y"?Nr:Sr,Ee=R==="y"?"height":"width",ve=O[R],ze=ve+w[Ne],Ve=ve-w[Se],vt=y?-V[Ee]/2:0,pt=S===Ca?te[Ee]:V[Ee],Qe=S===Ca?-V[Ee]:-te[Ee],fe=t.elements.arrow,gt=y&&fe?Qs(fe):{width:0,height:0},tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Uu(),_t=tt[Ne],Ze=tt[Se],Ce=Js(0,te[Ee],gt[Ee]),A=N?te[Ee]/2-vt-Ce-_t-le.mainAxis:pt-Ce-_t-le.mainAxis,B=N?-te[Ee]/2+vt+Ce+Ze+le.mainAxis:Qe+Ce+Ze+le.mainAxis,L=t.elements.arrow&&Ti(t.elements.arrow),Y=L?R==="y"?L.clientTop||0:L.clientLeft||0:0,G=(Oe=se==null?void 0:se[R])!=null?Oe:0,Q=ve+A-G-Y,J=ve+B-G,H=Js(y?zs(ze,Q):ze,ve,y?Si(Ve,J):Ve);O[R]=H,_e[R]=H-ve}if(l){var X,ne=R==="x"?yr:wr,Z=R==="x"?Nr:Sr,de=O[D],Me=D==="y"?"height":"width",Fe=de+w[ne],ot=de-w[Z],jt=[yr,wr].indexOf(E)!==-1,Ht=(X=se==null?void 0:se[D])!=null?X:0,rt=jt?Fe:de-te[Me]-V[Me]-Ht+le.altAxis,kt=jt?de+te[Me]+V[Me]-Ht-le.altAxis:ot,cr=y&&jt?Vx(rt,de,kt):Js(y?rt:Fe,de,y?kt:ot);O[D]=cr,_e[D]=cr-de}t.modifiersData[n]=_e}}var eS={name:"preventOverflow",enabled:!0,phase:"main",fn:xF,requiresIfExists:["offset"]};function Sm(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Tm(e){return e===hr(e)||!Rr(e)?Zs(e):Sm(e)}function SF(e){var t=e.getBoundingClientRect(),r=ba(t.width)/e.offsetWidth||1,n=ba(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Am(e,t,r){r===void 0&&(r=!1);var n=Rr(t),i=Rr(t)&&SF(t),a=zr(t),s=ai(e,i,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((qr(t)!=="body"||eo(a))&&(l=Tm(t)),Rr(t)?(c=ai(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=$s(a))),{x:s.left+l.scrollLeft-c.x,y:s.top+l.scrollTop-c.y,width:s.width,height:s.height}}function TF(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&i(c)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function Im(e){var t=TF(e);return Fx.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function km(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Nm(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var tS={placement:"bottom",modifiers:[],strategy:"absolute"};function rS(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function nS(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?tS:i;return function(l,c,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},tS,a),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],g=!1,y={state:d,setOptions:function(E){var S=typeof E=="function"?E(d.options):E;_(),d.options=Object.assign({},a,d.options,S),d.scrollParents={reference:ii(l)?os(l):l.contextElement?os(l.contextElement):[],popper:os(c)};var N=Im(Nm([].concat(n,d.options.modifiers)));if(d.orderedModifiers=N.filter(function(se){return se.enabled}),!1){var R;if(getBasePlacement(d.options.placement)===auto)var D;var O,te,V,M,le}return m(),y.update()},forceUpdate:function(){if(!g){var E=d.elements,S=E.reference,N=E.popper;if(!!rS(S,N)){d.rects={reference:Am(S,Ti(N),d.options.strategy==="fixed"),popper:Qs(N)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(se){return d.modifiersData[se.name]=Object.assign({},se.data)});for(var R=0,D=0;D<d.orderedModifiers.length;D++){if(d.reset===!0){d.reset=!1,D=-1;continue}var O=d.orderedModifiers[D],te=O.fn,V=O.options,M=V===void 0?{}:V,le=O.name;typeof te=="function"&&(d=te({state:d,options:M,name:le,instance:y})||d)}}}},update:km(function(){return new Promise(function(w){y.forceUpdate(),w(d)})}),destroy:function(){_(),g=!0}};if(!rS(l,c))return y;y.setOptions(f).then(function(w){!g&&f.onFirstUpdate&&f.onFirstUpdate(w)});function m(){d.orderedModifiers.forEach(function(w){var E=w.name,S=w.options,N=S===void 0?{}:S,R=w.effect;if(typeof R=="function"){var D=R({state:d,name:E,instance:y,options:N}),O=function(){};h.push(D||O)}})}function _(){h.forEach(function(w){return w()}),h=[]}return y}}var AF=[Yx,$x,Hx,qx,Zx,zx,eS,Kx,Jx],Rm=nS({defaultModifiers:AF});var IF=(e,t)=>(e%t+t)%t,aS=class{constructor(t,r,n){this.owner=t,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(t,r){t.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(t)}onSuggestionMouseover(t,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(t){this.containerEl.empty();let r=[];t.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=t,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(t){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,t)}setSelectedItem(t,r){let n=IF(t,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},Vu=class{constructor(t){this.inputEl=t,this.scope=new iS.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new aS(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let t=this.inputEl.value,r=this.getSuggestions(t);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(t,r){app.keymap.pushScope(this.scope),t.appendChild(this.suggestEl),this.popper=Rm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function kF(e){e=(0,Ii.normalizePath)(e);let t=app.vault.getAbstractFileByPath(e);return!t||!(t instanceof Ii.TFolder)?null:t}function sS(e){let t=kF(e),r=[];return Ii.Vault.recurseChildren(t,n=>{n instanceof Ii.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var oS;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(oS||(oS={}));var Ku=class extends Vu{constructor(t,r){super(t);this.inputEl=t;this.plugin=r}getSuggestions(t){var s,l,c,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let y=(0,Ii.normalizePath)((c=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:c.templates_folder),m=sS(y);r=[...r,...m]}if(this.plugin.coreTemplatePlugin){let y=(0,Ii.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),m=sS(y);r=[...r,...m]}if(!r)return[];let n=new Set(r),i=[],a=t.toLowerCase();return n.forEach(y=>{y instanceof Ii.TFile&&y.extension==="md"&&y.path.toLowerCase().contains(a)&&i.push(y)}),i}renderSuggestion(t,r){r.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var lS=ut(require("obsidian"));var ju=class extends Vu{getSuggestions(t){let r=app.vault.getAllLoadedFiles(),n=[],i=t.toLowerCase();return r.forEach(a=>{a instanceof lS.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(t,r){r.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var Bm=class extends Kt.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this,r=ha()||As();t.empty(),t.createEl("h2",{text:"Settings for Google Calendar"}),t.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Kt.Setting(t).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(a=>a.setValue(this.plugin.settings.useCustomClient).onChange(s=>U(this,null,function*(){this.plugin.settings.useCustomClient=s,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Kt.Setting(t).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(a=>a.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(s=>U(this,null,function*(){this.plugin.settings.googleClientId=s,yield this.plugin.saveSettings()}))),new Kt.Setting(t).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(a=>a.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(s=>U(this,null,function*(){this.plugin.settings.googleClientSecret=s,yield this.plugin.saveSettings()}))),Kt.Platform.isMobileApp&&new Kt.Setting(t).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(a=>a.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(s=>U(this,null,function*(){this.plugin.settings.googleRefreshToken=s,ru(s)})))):new Kt.Setting(t).setName("Serverurl").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(a=>{a.setValue(this.plugin.settings.googleOAuthServer).onChange(s=>U(this,null,function*(){this.plugin.settings.googleOAuthServer=s,yield this.plugin.saveSettings()}))}),new Kt.Setting(t).setName("Login with google").addButton(a=>{a.setButtonText(r?"Logout":"Login").onClick(()=>{r?(ru(""),mf(""),Ka(""),ja(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?Rx():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new Kt.Setting(t).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(a=>{a.setValue(this.plugin.settings.refreshInterval),a.setLimits(10,360,1),a.setDynamicTooltip(),a.onChange(s=>U(this,null,function*(){this.plugin.settings.refreshInterval=s,yield this.plugin.saveSettings()}))}),new Kt.Setting(t).setName("Default webview theme").addDropdown(a=>U(this,null,function*(){a.addOption("auto","Auto"),a.addOption("dark","Dark"),a.addOption("light","Light"),a.setValue(this.plugin.settings.webViewDefaultColorMode),a.onChange(s=>U(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Kt.Setting(t).setName("Show daily notes").setDesc("Will disply daily notes and allow to open and create daily notes").addToggle(a=>{a.setValue(this.plugin.settings.activateDailyNoteAddon),a.onChange(s=>U(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&new Kt.Setting(t).setName("Daily dot color").setDesc("Color for daily note dots in month view").addText(a=>{a.inputEl.type="color",a.setValue(this.plugin.settings.dailyNoteDotColor),a.onChange(s=>U(this,null,function*(){this.plugin.settings.dailyNoteDotColor=s,yield this.plugin.saveSettings()}))}),new Kt.Setting(t).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(a=>{a.setValue(this.plugin.settings.autoCreateEventNotes),a.onChange(s=>U(this,null,function*(){this.plugin.settings.autoCreateEventNotes=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Kt.Setting(t).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(a=>{a.setValue(this.plugin.settings.autoCreateEventKeepOpen),a.onChange(s=>U(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=s,yield this.plugin.saveSettings(),this.hide(),this.display()}))});let n=new Kt.Setting(t).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(a=>{a.setValue(this.plugin.settings.importStartOffset),a.setLimits(0,7,1),a.setDynamicTooltip(),a.onChange(s=>U(this,null,function*(){a.showTooltip(),this.plugin.settings.importStartOffset=s,yield this.plugin.saveSettings()}))});new Kt.Setting(t).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(a=>{a.setValue(this.plugin.settings.importEndOffset),a.setLimits(0,7,1),a.setDynamicTooltip(),a.onChange(s=>U(this,null,function*(){this.plugin.settings.importEndOffset=s,yield this.plugin.saveSettings()}))}),new Kt.Setting(t).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexable").addToggle(a=>{a.setValue(this.plugin.settings.useDefaultTemplate),a.onChange(s=>U(this,null,function*(){this.plugin.settings.useDefaultTemplate=s,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Kt.Setting(t).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(a=>{new Ku(a.inputEl,this.plugin),a.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(s=>U(this,null,function*(){this.plugin.settings.defaultTemplate=s,yield this.plugin.saveSettings()})),a.containerEl.addClass("templater_search")}),new Kt.Setting(t).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(a=>{new ju(a.inputEl),a.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(s=>U(this,null,function*(){this.plugin.settings.defaultFolder=s,yield this.plugin.saveSettings()})),a.containerEl.addClass("templater_search")}));let i=this.plugin.settings.insertTemplates;if(i.length&&(new Kt.Setting(t).setName("Saved Templates"),i.forEach(a=>{let s=new Kt.Setting(t).setClass("SubSettings").setName(a.name).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>U(this,null,function*(){this.plugin.settings.insertTemplates.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),Yt()){new Kt.Setting(t).setName("Default Calendar").addDropdown(s=>U(this,null,function*(){s.addOption("Default","Select a calendar"),(yield pn()).forEach(c=>{s.addOption(c.id,c.summary)}),s.setValue(this.plugin.settings.defaultCalendar),s.onChange(c=>U(this,null,function*(){this.plugin.settings.defaultCalendar=c,yield this.plugin.saveSettings()}))})),t.createEl("h3","Calendar Blacklist");let a=this.plugin.settings.calendarBlackList;new Kt.Setting(t).setName("Add Item to BlackList").addDropdown(s=>U(this,null,function*(){s.addOption("Default","Select Option to add"),(yield pn()).forEach(c=>{s.addOption(c.id+"_=_"+c.summary,c.summary)}),s.onChange(c=>U(this,null,function*(){let[f,d]=c.split("_=_");a.contains([f,d])||(this.plugin.settings.calendarBlackList=[...a,[f,d]],yield this.plugin.saveSettings());let h=new Kt.Setting(t).setClass("SubSettings").setName(d).addButton(g=>{g.setButtonText("Remove"),g.onClick(()=>U(this,null,function*(){this.plugin.settings.calendarBlackList.remove([f,d]),h.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),a.forEach(s=>{let l=new Kt.Setting(t).setClass("SubSettings").setName(s[1]).addButton(c=>{c.setButtonText("Remove"),c.onClick(()=>U(this,null,function*(){this.plugin.settings.calendarBlackList.remove(s),l.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function Bx(){let e=xt.getInstance();return e.settings.googleClientId==""||e.settings.googleClientSecret==""?(dr("Google Calendar missing settings"),!1):!0}function Yt(){return(!ha()||ha()=="")&&(!As()||As()=="")?(dr("Google Calendar missing settings or not logged in"),!1):!0}var bA=ut(require("obsidian"));var uS=ut(require("obsidian")),cS=ut(to());var th=new Map;function ki(){th.clear()}function lr(){return U(this,arguments,function*({startDate:e,endDate:t,exclude:r,include:n}={}){let i=xt.getInstance();e||(e=window.moment()),e=e.startOf("day"),t||(t=e.clone()),t=t.endOf("day");let a=yield pn();n&&n.length?a=a.filter(l=>n.contains(l.id)||n.contains(l.summary)):r&&r.length&&(a=a.filter(l=>!(r.contains(l.id)||r.contains(l.summary))));let s=[];for(let l=0;l<a.length;l++){let c=yield BF(i,a[l],e,t);s=[...s,...c]}return s=cS.default.orderBy(s,[l=>{var c;return new Date((c=l.start.date)!=null?c:l.start.dateTime)}],"asc"),s})}function NF(e,t,r){return U(this,null,function*(){if(!Yt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(e.id)}/events?`;s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${t}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`);let l=yield(0,uS.requestUrl)({url:s,method:"GET",headers:{Authorization:"Bearer "+(yield An())}});if(l.status!==200){dr("Could not list Google Events");continue}n=yield l.json;let c=n.items.filter(f=>(f.parent=e,f.status!="cancelled"));a=[...a,...c]}while(n.items.length==i);return a})}function RF(e,t,r){let n=[];return e.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],c=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${c})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(t&&g.isBefore(t,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),e=[...e,...n],e}function BF(e,t,r,n){return U(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:t.id});if(th.has(s)){let{events:c,updated:f}=th.get(s);if(f.clone().add(e.settings.refreshInterval,"second").isAfter(window.moment()))return c}let l=yield NF(t,i,a);return l=RF(l,r,n),l=l.filter(c=>c.eventType!=="delete"),th.set(s,{events:l,updated:window.moment()}),l})}var EA=ut(require("obsidian"));var tA=ut(require("obsidian"));function St(){}function Dm(e){return e()}function fS(){return Object.create(null)}function Qr(e){e.forEach(Dm)}function dS(e){return typeof e=="function"}function In(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}var rh;function Yu(e,t){return rh||(rh=document.createElement("a")),rh.href=t,e===rh.href}function hS(e){return Object.keys(e).length===0}function bl(e){return e==null?"":e}var vW=typeof window!="undefined";var _W=new Set;var pS=!1;function DF(){pS=!0}function OF(){pS=!1}function re(e,t){e.appendChild(t)}function oi(e,t,r){let n=LF(e);if(!n.getElementById(t)){let i=ae("style");i.id=t,i.textContent=r,PF(n,i)}}function LF(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function PF(e,t){re(e.head||e,t)}function xe(e,t,r){e.insertBefore(t,r||null)}function be(e){e.parentNode.removeChild(e)}function tn(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function ae(e){return document.createElement(e)}function er(e){return document.createTextNode(e)}function De(){return er(" ")}function li(){return er("")}function Xe(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function ee(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Wu(e){return e===""?null:+e}function MF(e){return Array.from(e.childNodes)}function ui(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function mn(e,t){e.value=t==null?"":t}function Je(e,t,r,n){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}function Zi(e,t){for(let r=0;r<e.options.length;r+=1){let n=e.options[r];if(n.__value===t){n.selected=!0;return}}e.selectedIndex=-1}function xl(e){let t=e.querySelector(":checked")||e.options[0];return t&&t.__value}var wW=new Map;var zu;function Qu(e){zu=e}function gS(){if(!zu)throw new Error("Function called outside component initialization");return zu}function ro(e){gS().$$.on_mount.push(e)}function no(e){gS().$$.on_destroy.push(e)}var Xu=[];var kn=[],nh=[],Om=[],UF=Promise.resolve(),Lm=!1;function FF(){Lm||(Lm=!0,UF.then(mS))}function Sa(e){nh.push(e)}function Ta(e){Om.push(e)}var Pm=new Set,ih=0;function mS(){let e=zu;do{for(;ih<Xu.length;){let t=Xu[ih];ih++,Qu(t),qF(t.$$)}for(Qu(null),Xu.length=0,ih=0;kn.length;)kn.pop()();for(let t=0;t<nh.length;t+=1){let r=nh[t];Pm.has(r)||(Pm.add(r),r())}nh.length=0}while(Xu.length);for(;Om.length;)Om.pop()();Lm=!1,Pm.clear(),Qu(e)}function qF(e){if(e.fragment!==null){e.update(),Qr(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Sa)}}var ah=new Set,io;function sh(){io={r:0,c:[],p:io}}function oh(){io.r||Qr(io.c),io=io.p}function ci(e,t){e&&e.i&&(ah.delete(e),e.i(t))}function Ni(e,t,r,n){if(e&&e.o){if(ah.has(e))return;ah.add(e),io.c.push(()=>{ah.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}var EW=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var CW=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function Aa(e,t,r){let n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function Ju(e){e&&e.c()}function Sl(e,t,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,r),n||Sa(()=>{let c=a.map(Dm).filter(dS);s?s.push(...c):Qr(c),e.$$.on_mount=[]}),l.forEach(Sa)}function ao(e,t){let r=e.$$;r.fragment!==null&&(Qr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function GF(e,t){e.$$.dirty[0]===-1&&(Xu.push(e),FF(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Nn(e,t,r,n,i,a,s,l=[-1]){let c=zu;Qu(e);let f=e.$$={fragment:null,ctx:null,props:a,update:St,not_equal:i,bound:fS(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:fS(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(e,t.props||{},(h,g,...y)=>{let m=y.length?y[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=m)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](m),d&&GF(e,h)),g}):[],f.update(),d=!0,Qr(f.before_update),f.fragment=n?n(f.ctx):!1,t.target){if(t.hydrate){DF();let h=MF(t.target);f.fragment&&f.fragment.l(h),h.forEach(be)}else f.fragment&&f.fragment.c();t.intro&&ci(e.$$.fragment),Sl(e,t.target,t.anchor,t.customElement),OF(),mS()}Qu(c)}var VF;typeof HTMLElement=="function"&&(VF=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(Dm).filter(dS);for(let t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,r){this[e]=r}disconnectedCallback(){Qr(this.$$.on_disconnect)}$destroy(){ao(this,1),this.$destroy=St}$on(e,t){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!hS(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var yn=class{$destroy(){ao(this,1),this.$destroy=St}$on(t,r){let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!hS(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var MS=ut(Um()),{__extends:SW,__assign:TW,__rest:AW,__decorate:IW,__param:kW,__metadata:NW,__awaiter:Er,__generator:RW,__exportStar:BW,__createBinding:DW,__values:OW,__read:LW,__spread:PW,__spreadArrays:MW,__spreadArray:UW,__await:FW,__asyncGenerator:qW,__asyncDelegator:GW,__asyncValues:VW,__makeTemplateObject:KW,__importStar:jW,__importDefault:HW,__classPrivateFieldGet:YW,__classPrivateFieldSet:WW}=MS.default;var US=ut(require("obsidian"));function fh(e,t=!1){return U(this,null,function*(){var i;if(!Yt())return!1;let r=(i=e.recurringEventId)!=null?i:e.id;return t&&e.recurringEventId&&(r=e.id),(yield(0,US.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${e.parent.id}/events/${r}`,method:"DELETE",contentType:"application/json",headers:{Authorization:"Bearer "+(yield An())}})).status==204})}var FS=ut(require("obsidian"));function dh(e,t=!1){return U(this,null,function*(){var s;if(!Yt())return null;let r=(s=e.recurringEventId)!=null?s:e.id;t&&e.recurringEventId&&(r=e.id);let n=e.parent.id;delete e.parent;let i=yield(0,FS.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${r}`,method:"PUT",contentType:"application/json",headers:{Authorization:"Bearer "+(yield An())},body:JSON.stringify(e)});return i.status!==200?(dr("Could not create Google Event"),null):yield i.json})}var qS=ut(require("obsidian"));function GS(e){return U(this,null,function*(){if(!Yt())return null;let t=e.parent.id;e.start.timeZone=e.parent.timeZone,e.end.timeZone=e.parent.timeZone,delete e.parent;let r=yield(0,qS.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${t}/events`,method:"POST",headers:{Authorization:"Bearer "+(yield An())},body:JSON.stringify(e)});return r.status!==200?(dr("Could not create Google Event"),null):yield r.json})}var so=ut(require("obsidian"));var hh=ut(to()),Fm=e=>U(void 0,null,function*(){var s,l;if(!e.settings.autoCreateEventNotes||!Yt())return;let t=Math.abs(e.settings.importStartOffset),r=Math.abs(e.settings.importEndOffset),n=window.moment().local().subtract(t,"day"),i=window.moment().local().add(r,"day"),a=yield lr({startDate:n,endDate:i});for(let c=0;c<a.length;c++){let f=(l=(s=a[c].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield oo(a[c],f[1],f[2]))}}),KF=(e,t)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(t),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=hh.default.get(e,a[1],"");for(let c=0;c<l.length;c++)l[c].displayName?s+=`- [[@${l[c].displayName}]]
`:s+=`- [[@${l[c].email}]]
`}else if(a[1]=="attachments"){let l=hh.default.get(e,a[1],"");for(let c=0;c<l.length;c++)l[c].title?s+=`- [${l[c].title}](${l[c].fileUrl})
`:s+=`- [${l[c].fileUrl}](${l[c].fileUrl})
`}else s=hh.default.get(e,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),t=t.replace(a[0],s!=null?s:"")}}),t},oo=(e,t,r)=>U(void 0,null,function*(){let n=xt.getInstance(),{vault:i}=app,{adapter:a}=i,s=app.fileManager.getNewFileParent("").path;t&&(t.endsWith("-")&&(t=t.slice(0,-1)),t="/"+t.split(/[/\\]/).join("/"),(yield a.exists(t))&&(s=t));let l=(0,so.normalizePath)(`${s}/${e.summary}.md`);if(yield a.exists(l))return i.getAbstractFileByPath(l);let c=yield i.create(l,"");if(dr(`EventNote ${e.summary} created.`),!n.coreTemplatePlugin&&!n.templaterPlugin||!r)return i.getAbstractFileByPath(l);r.match(/.*\.md/)||(r=r+".md");let f={state:{mode:"source"},active:!0},d=yield app.workspace.getLeaf(!0);return yield d.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(d,!1,!0),yield d.openFile(c,f),n.templaterPlugin&&n.coreTemplatePlugin?(yield h(!0))||(yield h(!1))||dr("Template not compatable"):n.templaterPlugin?(yield h(!0))||dr("Template not compatable"):n.coreTemplatePlugin&&((yield h(!1))||dr("Template not compatable")),n.settings.autoCreateEventKeepOpen||d.detach(),i.getAbstractFileByPath(l);function h(g){return U(this,null,function*(){var R,D,O,te,V;let y;g?y=(0,so.normalizePath)((D=(R=n==null?void 0:n.templaterPlugin)==null?void 0:R.settings)==null?void 0:D.templates_folder):y=(0,so.normalizePath)((V=(te=(O=n==null?void 0:n.coreTemplatePlugin)==null?void 0:O.instance)==null?void 0:te.options)==null?void 0:V.folder);let m;if((yield a.exists(r))?m=r:(m=`${y}/${r}`,y==="/"&&(m=r)),!(yield a.exists(m)))return dr(`Template: ${r} doesn't exit.`),!1;let _=i.getAbstractFileByPath(m);if(!(_ instanceof so.TFile))return!1;let w=yield i.cachedRead(_),E=KF(e,w);if(g&&E.contains("{{")&&E.contains("}}"))return!1;if(!g&&E.contains("<%")&&E.contains("%>"))return!1;let S=_.path+".tmp";yield a.write(S,E);let N=app.vault.getAbstractFileByPath(S);if(!(N instanceof so.TFile))return!1;try{return g?yield n.templaterPlugin.templater.append_template_to_active_file(N):yield n.coreTemplatePlugin.instance.insertTemplate(N),a.remove(S),!0}catch(M){return a.remove(S),!1}})}});var ph=["MO","TU","WE","TH","FR","SA","SU"],Tr=function(){function e(t,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=r}return e.fromStr=function(t){return new e(ph.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=ph[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}();var tr=function(e){return e!=null},qn=function(e){return typeof e=="number"},qm=function(e){return ph.indexOf(e)>=0},Xr=Array.isArray,fi=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var r=[],n=e;n<t;n++)r.push(n);return r};var It=function(e,t){var r=0,n=[];if(Xr(e))for(;r<t;r++)n[r]=[].concat(e);else for(;r<t;r++)n[r]=e;return n},VS=function(e){return Xr(e)?e:[e]};function lo(e,t,r){r===void 0&&(r=" ");var n=String(e);return t=t>>0,n.length>t?String(n):(t=t-n.length,t>r.length&&(r+=It(r,t/r.length)),r.slice(0,t)+String(n))}var KS=function(e,t,r){var n=e.split(t);return r?n.slice(0,r).concat([n.slice(r).join(t)]):n},rn=function(e,t){var r=e%t;return r*t<0?r+t:r},gh=function(e,t){return{div:Math.floor(e/t),mod:rn(e,t)}},Gn=function(e){return!tr(e)||e.length===0},Cr=function(e){return!Gn(e)},Rt=function(e,t){return Cr(e)&&e.indexOf(t)!==-1};var ls;(function(e){e.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],e.ONE_DAY=1e3*60*60*24,e.MAXYEAR=9999,e.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),e.PY_WEEKDAYS=[6,0,1,2,3,4,5],e.getYearDay=function(t){var r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return Math.ceil((r.valueOf()-new Date(t.getUTCFullYear(),0,1).valueOf())/e.ONE_DAY)+1},e.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},e.isDate=function(t){return t instanceof Date},e.isValidDate=function(t){return e.isDate(t)&&!isNaN(t.getTime())},e.tzOffset=function(t){return t.getTimezoneOffset()*60*1e3},e.daysBetween=function(t,r){var n=t.getTime()-e.tzOffset(t),i=r.getTime()-e.tzOffset(r),a=n-i;return Math.round(a/e.ONE_DAY)},e.toOrdinal=function(t){return e.daysBetween(t,e.ORDINAL_BASE)},e.fromOrdinal=function(t){return new Date(e.ORDINAL_BASE.getTime()+t*e.ONE_DAY)},e.getMonthDays=function(t){var r=t.getUTCMonth();return r===1&&e.isLeapYear(t.getUTCFullYear())?29:e.MONTH_DAYS[r]},e.getWeekday=function(t){return e.PY_WEEKDAYS[t.getUTCDay()]},e.monthRange=function(t,r){var n=new Date(Date.UTC(t,r,1));return[e.getWeekday(n),e.getMonthDays(n)]},e.combine=function(t,r){return r=r||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},e.clone=function(t){var r=new Date(t.getTime());return r},e.cloneDates=function(t){for(var r=[],n=0;n<t.length;n++)r.push(e.clone(t[n]));return r},e.sort=function(t){t.sort(function(r,n){return r.getTime()-n.getTime()})},e.timeToUntilString=function(t,r){r===void 0&&(r=!0);var n=new Date(t);return[lo(n.getUTCFullYear().toString(),4,"0"),lo(n.getUTCMonth()+1,2,"0"),lo(n.getUTCDate(),2,"0"),"T",lo(n.getUTCHours(),2,"0"),lo(n.getUTCMinutes(),2,"0"),lo(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},e.untilStringToDate=function(t){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(t);if(!n)throw new Error("Invalid UNTIL value: "+t);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(ls||(ls={}));var We=ls;var jF=function(){function e(t,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=r,t==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):t==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):t==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var r=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),Ia=jF;var fT=ut(cT()),{__extends:Il,__assign:vn,__rest:Rz,__decorate:Bz,__param:Dz,__metadata:Oz,__awaiter:Lz,__generator:Pz,__exportStar:Mz,__createBinding:Uz,__values:Fz,__read:qz,__spread:Gz,__spreadArrays:uo,__await:Vz,__asyncGenerator:Kz,__asyncDelegator:jz,__asyncValues:Hz,__makeTemplateObject:Yz,__importStar:Wz,__importDefault:zz,__classPrivateFieldGet:Qz,__classPrivateFieldSet:Xz}=fT.default;var HF=function(e){Il(t,e);function t(r,n,i){var a=e.call(this,r,n)||this;return a.iterator=i,a}return t.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},t}(Ia),Vm=HF;var YF={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},co=YF;var dT=function(e,t){return e.indexOf(t)!==-1},WF=function(e){return e.toString()},zF=function(e,t,r){return t+" "+r+", "+e},QF=function(){function e(t,r,n,i){if(r===void 0&&(r=WF),n===void 0&&(n=co),i===void 0&&(i=zF),this.text=[],this.language=n||co,this.gettext=r,this.dateFormatter=i,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(tr(this.origOptions.byweekday)){var l=Xr(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var r=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var n in t.origOptions){if(dT(["dtstart","wkst","freq"],n))return!0;if(!dT(e.IMPLEMENTED[t.options.freq],n))return!1}return r},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[Pe.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var r,n,i=this.gettext;if(t===-1)return i("last");switch(n=Math.abs(t),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return t<0?r+" "+i("last"):r},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var r=qn(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[r]},e.prototype.plural=function(t){return t%100!=1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,r,n,i){i===void 0&&(i=","),Xr(t)||(t=[t]);var a=function(c,f,d){for(var h="",g=0;g<c.length;g++)g!==0&&(g===c.length-1?h+=" "+d+" ":h+=f+" "),h+=c[g];return h};r=r||function(c){return c.toString()};var s=this,l=function(c){return r&&r.call(s,c)};return n?a(t.map(l),i,n):t.map(l).join(i+" ")},e}(),$i=QF;var XF=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;t=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(t===null||s[0].length>t[0].length)&&(t=s,r=a)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function Zu(e,t){t===void 0&&(t=co);var r={},n=new XF(t.tokens);if(!n.start(e))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Pe.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Pe.WEEKLY,r.byweekday=[Pe.MO,Pe.TU,Pe.WE,Pe.TH,Pe.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Pe.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Pe.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Pe.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Pe.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Pe.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Pe.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Pe[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=c();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Pe[m]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Pe.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=l();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(_),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),y=n.accept("the");if(!!(g||y))do{var m=f(),_=c(),w=l();if(m)_?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Pe[_].nth(m))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(m),n.accept("day(s)"));else if(_)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Pe[_]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Pe.MO,Pe.TU,Pe.WE,Pe.TH,Pe.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(E[0],10))}}else if(w)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(w);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var $e;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})($e||($e={}));function $u(e){return e<$e.HOURLY}var hT=function(e,t){return t===void 0&&(t=co),new Pe(Zu(e,t)||void 0)},kl=["count","until","interval","byweekday","bymonthday","bymonth"];$i.IMPLEMENTED=[];$i.IMPLEMENTED[$e.HOURLY]=kl;$i.IMPLEMENTED[$e.MINUTELY]=kl;$i.IMPLEMENTED[$e.DAILY]=["byhour"].concat(kl);$i.IMPLEMENTED[$e.WEEKLY]=kl;$i.IMPLEMENTED[$e.MONTHLY]=kl;$i.IMPLEMENTED[$e.YEARLY]=["byweekno","byyearday"].concat(kl);var pT=function(e,t,r,n){return new $i(e,t,r,n).toString()},gT=$i.isFullyConvertible;var Nl=function(){function e(t,r,n,i){this.hour=t,this.minute=r,this.second=n,this.millisecond=i||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}();var mT=function(e){Il(t,e);function t(r,n,i,a,s,l,c){var f=e.call(this,a,s,l,c)||this;return f.year=r,f.month=n,f.day=i,f}return t.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},t.prototype.getWeekday=function(){return ls.getWeekday(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(r){this.year+=r},t.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=rn(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},t.prototype.addDaily=function(r){this.day+=r,this.fixDay()},t.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=gh(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),Gn(i)||Rt(i,this.hour))break}},t.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=gh(this.minute,60),l=s.div,c=s.mod;if(l&&(this.minute=c,this.addHours(l,!1,i)),(Gn(i)||Rt(i,this.hour))&&(Gn(a)||Rt(a,this.minute)))break}},t.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=gh(this.second,60),c=l.div,f=l.mod;if(c&&(this.second=f,this.addMinutes(c,!1,i,a)),(Gn(i)||Rt(i,this.hour))&&(Gn(a)||Rt(a,this.minute))&&(Gn(s)||Rt(s,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var r=ls.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>ls.MAXYEAR))return;r=ls.monthRange(this.year,this.month-1)[1]}}},t.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,c=r.byminute,f=r.bysecond;switch(i){case $e.YEARLY:return this.addYears(a);case $e.MONTHLY:return this.addMonths(a);case $e.WEEKLY:return this.addWeekly(a,s);case $e.DAILY:return this.addDaily(a);case $e.HOURLY:return this.addHours(a,n,l);case $e.MINUTELY:return this.addMinutes(a,n,l,c);case $e.SECONDLY:return this.addSeconds(a,n,l,c,f)}},t}(Nl);function Km(e){for(var t=[],r=Object.keys(e),n=0,i=r;n<i.length;n++){var a=i[n];Rt(_T,a)||t.push(a),We.isDate(e[a])&&!We.isValidDate(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return vn({},e)}function yT(e){var t=vn(vn({},ec),Km(e));if(tr(t.byeaster)&&(t.freq=Pe.YEARLY),!(tr(t.freq)&&Pe.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: "+t.freq+" "+e.freq);if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),tr(t.wkst)?qn(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=Pe.MO.weekday,tr(t.bysetpos)){qn(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var r=0;r<t.bysetpos.length;r++){var n=t.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(t.byweekno)||Cr(t.byweekno)||Cr(t.byyearday)||Boolean(t.bymonthday)||Cr(t.bymonthday)||tr(t.byweekday)||tr(t.byeaster)))switch(t.freq){case Pe.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case Pe.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case Pe.WEEKLY:t.byweekday=[We.getWeekday(t.dtstart)];break}if(tr(t.bymonth)&&!Xr(t.bymonth)&&(t.bymonth=[t.bymonth]),tr(t.byyearday)&&!Xr(t.byyearday)&&qn(t.byyearday)&&(t.byyearday=[t.byyearday]),!tr(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(Xr(t.bymonthday)){for(var i=[],a=[],r=0;r<t.bymonthday.length;r++){var n=t.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}t.bymonthday=i,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(tr(t.byweekno)&&!Xr(t.byweekno)&&(t.byweekno=[t.byweekno]),!tr(t.byweekday))t.bynweekday=null;else if(qn(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(qm(t.byweekday))t.byweekday=[Tr.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Tr)!t.byweekday.n||t.freq>Pe.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var s=[],l=[],r=0;r<t.byweekday.length;r++){var c=t.byweekday[r];if(qn(c)){s.push(c);continue}else if(qm(c)){s.push(Tr.fromStr(c).weekday);continue}!c.n||t.freq>Pe.MONTHLY?s.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=Cr(s)?s:null,t.bynweekday=Cr(l)?l:null}return tr(t.byhour)?qn(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<Pe.HOURLY?[t.dtstart.getUTCHours()]:null,tr(t.byminute)?qn(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<Pe.MINUTELY?[t.dtstart.getUTCMinutes()]:null,tr(t.bysecond)?qn(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<Pe.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function vT(e){var t=e.dtstart.getTime()%1e3;if(!$u(e.freq))return[];var r=[];return e.byhour.forEach(function(n){e.byminute.forEach(function(i){e.bysecond.forEach(function(a){r.push(new Nl(n,i,a,t))})})}),r}function tc(e){var t=e.split(`
`).map(JF).filter(function(r){return r!==null});return vn(vn({},t[0]),t[1])}function rc(e){var t={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!r)return t;var n=r[0],i=r[1],a=r[2];return i&&(t.tzid=i),t.dtstart=We.untilStringToDate(a),t}function JF(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return wT(e);var r=t[0],n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return wT(e);case"DTSTART":return rc(e);default:throw new Error("Unsupported RFC prop "+n+" in "+e)}}function wT(e){var t=e.replace(/^RRULE:/i,""),r=rc(t),n=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=$e[l.toUpperCase()];break;case"WKST":r.wkst=di[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=ZF(l),f=s.toLowerCase();r[f]=c;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=$F(l);break;case"DTSTART":case"TZID":var d=rc(e);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=We.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function ZF(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(ET)}return ET(e)}function ET(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function $F(e){var t=e.split(",");return t.map(function(r){if(r.length===2)return di[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=di[a].weekday;return new Tr(s,i)})}var fo=function(){function e(t,r){this.date=t,this.tzid=r}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var t=We.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+t:";TZID="+this.tzid+":"+t},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){var t;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(t=this.tzid,t!=null?t:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},e}();function nc(e){for(var t=[],r="",n=Object.keys(e),i=Object.keys(ec),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Rt(i,n[a])){var s=n[a].toUpperCase(),l=e[n[a]],c="";if(!(!tr(l)||Xr(l)&&!l.length)){switch(s){case"FREQ":c=Pe.FREQUENCIES[e.freq];break;case"WKST":qn(l)?c=new Tr(l).toString():c=l.toString();break;case"BYWEEKDAY":s="BYDAY",c=VS(l).map(function(y){return y instanceof Tr?y:Xr(y)?new Tr(y[0],y[1]):new Tr(y)}).toString();break;case"DTSTART":r=eq(l,e.tzid);break;case"UNTIL":c=We.timeToUntilString(l,!e.tzid);break;default:if(Xr(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);c=f.toString()}else c=String(l)}c&&t.push([s,c])}}var h=t.map(function(y){var m=y[0],_=y[1];return m+"="+_.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(y){return!!y}).join(`
`)}function eq(e,t){return e?"DTSTART"+new fo(new Date(e),t).toString():""}function tq(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(r,n){return r.getTime()===t[n].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var CT=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,r,n){r&&(r=r instanceof Date?We.clone(r):We.cloneDates(r)),t==="all"?this.all=r:(n._value=r,this[t].push(n))},e.prototype._cacheGet=function(t,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!tq(r[g],d[g]))return!0}return!1},s=this[t];if(t==="all")n=this.all;else if(Xr(s))for(var l=0;l<s.length;l++){var c=s[l];if(!(i.length&&a(c))){n=c._value;break}}if(!n&&this.all){for(var f=new Ia(t,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(t,n,r)}return Xr(n)?We.cloneDates(n):n instanceof Date?We.clone(n):n},e}();var bT=uo(It(1,31),It(2,28),It(3,31),It(4,30),It(5,31),It(6,30),It(7,31),It(8,31),It(9,30),It(10,31),It(11,30),It(12,31),It(1,7)),xT=uo(It(1,31),It(2,29),It(3,31),It(4,30),It(5,31),It(6,30),It(7,31),It(8,31),It(9,30),It(10,31),It(11,30),It(12,31),It(1,7)),rq=fi(1,29),nq=fi(1,30),us=fi(1,31),nn=fi(1,32),ST=uo(nn,nq,nn,us,nn,us,nn,nn,us,nn,us,nn,nn.slice(0,7)),TT=uo(nn,rq,nn,us,nn,us,nn,nn,us,nn,us,nn,nn.slice(0,7)),iq=fi(-28,0),aq=fi(-29,0),cs=fi(-30,0),an=fi(-31,0),AT=uo(an,aq,an,cs,an,cs,an,an,cs,an,cs,an,an.slice(0,7)),IT=uo(an,iq,an,cs,an,cs,an,an,cs,an,cs,an,an.slice(0,7)),kT=[0,31,60,91,121,152,182,213,244,274,305,335,366],NT=[0,31,59,90,120,151,181,212,243,273,304,334,365],jm=function(){for(var e=[],t=0;t<55;t++)e=e.concat(fi(7));return e}();function RT(e,t){var r=new Date(Date.UTC(e,0,1)),n=We.isLeapYear(e)?366:365,i=We.isLeapYear(e+1)?366:365,a=We.toOrdinal(r),s=We.getWeekday(r),l=vn(vn({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},sq(e)),{wnomask:null});if(Gn(t.byweekno))return l;l.wnomask=It(0,n+7);var c,f,d=c=rn(7-s+t.wkst,7);d>=4?(d=0,f=l.yearlen+rn(s-t.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=rn(f,7),y=Math.floor(h+g/4),m=0;m<t.byweekno.length;m++){var _=t.byweekno[m];if(_<0&&(_+=y+1),_>0&&_<=y){var w=void 0;_>1?(w=d+(_-1)*7,d!==c&&(w-=7-c)):w=d;for(var E=0;E<7&&(l.wnomask[w]=1,w++,l.wdaymask[w]!==t.wkst);E++);}}if(Rt(t.byweekno,1)){var w=d+y*7;if(d!==c&&(w-=7-c),w<n)for(var m=0;m<7&&(l.wnomask[w]=1,w+=1,l.wdaymask[w]!==t.wkst);m++);}if(d){var S=void 0;if(Rt(t.byweekno,-1))S=-1;else{var N=We.getWeekday(new Date(Date.UTC(e-1,0,1))),R=rn(7-N.valueOf()+t.wkst,7),D=We.isLeapYear(e-1)?366:365,O=void 0;R>=4?(R=0,O=D+rn(N-t.wkst,7)):O=n-d,S=Math.floor(52+rn(O,7)/4)}if(Rt(t.byweekno,S))for(var w=0;w<d;w++)l.wnomask[w]=1}return l}function sq(e){var t=We.isLeapYear(e)?366:365,r=new Date(Date.UTC(e,0,1)),n=We.getWeekday(r);return t===365?{mmask:bT,mdaymask:TT,nmdaymask:IT,wdaymask:jm.slice(n),mrange:NT}:{mmask:xT,mdaymask:ST,nmdaymask:AT,wdaymask:jm.slice(n),mrange:kT}}function BT(e,t,r,n,i,a){var s={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(a.freq===Pe.YEARLY)if(Gn(a.bymonth))l=[[0,r]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],l.push(n.slice(t-1,t+1));else a.freq===Pe.MONTHLY&&(l=[n.slice(t-1,t+1)]);if(Gn(l))return s;s.nwdaymask=It(0,r);for(var c=0;c<l.length;c++)for(var f=l[c],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var y=void 0,m=a.bynweekday[g],_=m[0],w=m[1];w<0?(y=h+(w+1)*7,y-=rn(i[y]-_,7)):(y=d+(w-1)*7,y+=rn(7-i[y]+_,7)),d<=y&&y<=h&&(s.nwdaymask[y]=1)}return s}function DT(e,t){t===void 0&&(t=0);var r=e%19,n=Math.floor(e/100),i=e%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),c=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-c+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,y=Math.floor((r+11*f+22*g)/451),m=Math.floor((f+g-7*y+114)/31),_=(f+g-7*y+114)%31+1,w=Date.UTC(e,m-1,_+t),E=Date.UTC(e,0,1);return[Math.ceil((w-E)/(1e3*60*60*24))]}var oq=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,r){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=RT(t,n)),Cr(n.bynweekday)&&(r!==this.lastmonth||t!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=BT(t,r,a,s,l,n)}tr(n.byeaster)&&(this.eastermask=DT(t,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),e.prototype.ydayset=function(){return[fi(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=It(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},e.prototype.wdayset=function(t,r,n){for(var i=It(null,this.yearlen+7),a=We.toOrdinal(new Date(Date.UTC(t,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},e.prototype.ddayset=function(t,r,n){var i=It(null,this.yearlen),a=We.toOrdinal(new Date(Date.UTC(t,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},e.prototype.htimeset=function(t,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(t,l,n,i))}),We.sort(s),s},e.prototype.mtimeset=function(t,r,n,i){var a=this.options.bysecond.map(function(s){return new Nl(t,r,s,i)});return We.sort(a),a},e.prototype.stimeset=function(t,r,n,i){return[new Nl(t,r,n,i)]},e.prototype.getdayset=function(t){switch(t){case $e.YEARLY:return this.ydayset.bind(this);case $e.MONTHLY:return this.mdayset.bind(this);case $e.WEEKLY:return this.wdayset.bind(this);case $e.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case $e.HOURLY:return this.htimeset.bind(this);case $e.MINUTELY:return this.mtimeset.bind(this);case $e.SECONDLY:return this.stimeset.bind(this)}},e}(),OT=oq;function LT(e,t,r,n,i,a){for(var s=[],l=0;l<e.length;l++){var c=void 0,f=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),f=rn(d,t.length)):(c=Math.floor((d-1)/t.length),f=rn(d-1,t.length));for(var h=[],g=r;g<n;g++){var y=a[g];!tr(y)||h.push(y)}var m=void 0;c<0?m=h.slice(c)[0]:m=h[c];var _=t[f],w=We.fromOrdinal(i.yearordinal+m),E=We.combine(w,_);Rt(s,E)||s.push(E)}return We.sort(s),s}function vh(e,t){var r=t.dtstart,n=t.freq,i=t.interval,a=t.until,s=t.bysetpos,l=t.count;if(l===0||i===0)return ka(e);var c=mT.fromDate(r),f=new OT(t);f.rebuild(c.year,c.month);for(var d=cq(f,c,t);;){var h=f.getdayset(n)(c.year,c.month,c.day),g=h[0],y=h[1],m=h[2],_=uq(g,y,m,f,t);if(Cr(s))for(var w=LT(s,d,y,m,f,g),E=0;E<w.length;E++){var S=w[E];if(a&&S>a)return ka(e);if(S>=r){var N=PT(S,t);if(!e.accept(N)||l&&(--l,!l))return ka(e)}}else for(var E=y;E<m;E++){var R=g[E];if(!!tr(R))for(var D=We.fromOrdinal(f.yearordinal+R),O=0;O<d.length;O++){var te=d[O],S=We.combine(D,te);if(a&&S>a)return ka(e);if(S>=r){var N=PT(S,t);if(!e.accept(N)||l&&(--l,!l))return ka(e)}}}if(t.interval===0||(c.add(t,_),c.year>We.MAXYEAR))return ka(e);$u(n)||(d=f.gettimeset(n)(c.hour,c.minute,c.second,0)),f.rebuild(c.year,c.month)}}function lq(e,t,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,c=r.bynmonthday,f=r.byyearday;return Cr(n)&&!Rt(n,e.mmask[t])||Cr(i)&&!e.wnomask[t]||Cr(a)&&!Rt(a,e.wdaymask[t])||Cr(e.nwdaymask)&&!e.nwdaymask[t]||s!==null&&!Rt(e.eastermask,t)||(Cr(l)||Cr(c))&&!Rt(l,e.mdaymask[t])&&!Rt(c,e.nmdaymask[t])||Cr(f)&&(t<e.yearlen&&!Rt(f,t+1)&&!Rt(f,-e.yearlen+t)||t>=e.yearlen&&!Rt(f,t+1-e.yearlen)&&!Rt(f,-e.nextyearlen+t-e.yearlen))}function PT(e,t){return new fo(e,t.tzid).rezonedDate()}function ka(e){return e.getValue()}function uq(e,t,r,n,i){for(var a=!1,s=t;s<r;s++){var l=e[s];a=lq(n,l,i),a&&(e[l]=null)}return a}function cq(e,t,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return $u(n)?vT(r):n>=Pe.HOURLY&&Cr(i)&&!Rt(i,t.hour)||n>=Pe.MINUTELY&&Cr(a)&&!Rt(a,t.minute)||n>=Pe.SECONDLY&&Cr(s)&&!Rt(s,t.second)?[]:e.gettimeset(n)(t.hour,t.minute,t.second,t.millisecond)}var di={MO:new Tr(0),TU:new Tr(1),WE:new Tr(2),TH:new Tr(3),FR:new Tr(4),SA:new Tr(5),SU:new Tr(6)},ec={freq:$e.YEARLY,dtstart:null,interval:1,wkst:di.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},_T=Object.keys(ec),Pe=function(){function e(t,r){t===void 0&&(t={}),r===void 0&&(r=!1),this._cache=r?null:new CT,this.origOptions=Km(t);var n=yT(t).parsedOptions;this.options=n}return e.parseText=function(t,r){return Zu(t,r)},e.fromText=function(t,r){return hT(t,r)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return vh(t,this.options)},e.prototype._cacheGet=function(t,r){return this._cache?this._cache._cacheGet(t,r):!1},e.prototype._cacheAdd=function(t,r,n){if(!!this._cache)return this._cache._cacheAdd(t,r,n)},e.prototype.all=function(t){if(t)return this._iter(new Vm("all",{},t));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Ia("all",{})),this._cacheAdd("all",r)),r},e.prototype.between=function(t,r,n,i){if(n===void 0&&(n=!1),!We.isValidDate(t)||!We.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:t,inc:n};if(i)return this._iter(new Vm("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new Ia("between",a)),this._cacheAdd("between",s,a)),s},e.prototype.before=function(t,r){if(r===void 0&&(r=!1),!We.isValidDate(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Ia("before",n)),this._cacheAdd("before",i,n)),i},e.prototype.after=function(t,r){if(r===void 0&&(r=!1),!We.isValidDate(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Ia("after",n)),this._cacheAdd("after",i,n)),i},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return nc(this.origOptions)},e.prototype.toText=function(t,r,n){return pT(this,t,r,n)},e.prototype.isFullyConvertibleToText=function(){return gT(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=$e.YEARLY,e.MONTHLY=$e.MONTHLY,e.WEEKLY=$e.WEEKLY,e.DAILY=$e.DAILY,e.HOURLY=$e.HOURLY,e.MINUTELY=$e.MINUTELY,e.SECONDLY=$e.SECONDLY,e.MO=di.MO,e.TU=di.TU,e.WE=di.WE,e.TH=di.TH,e.FR=di.FR,e.SA=di.SA,e.SU=di.SU,e.parseString=tc,e.optionsToString=nc,e}();function MT(e,t,r,n,i,a){var s={},l=e.accept;function c(g,y){r.forEach(function(m){m.between(g,y,!0).forEach(function(_){s[Number(_)]=!0})})}i.forEach(function(g){var y=new fo(g,a).rezonedDate();s[Number(y)]=!0}),e.accept=function(g){var y=Number(g);return isNaN(y)?l.call(this,g):!s[y]&&(c(new Date(y-1),new Date(y+1)),!s[y])?(s[y]=!0,l.call(this,g)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(g){var y=Number(g);return s[y]?!0:(s[y]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new fo(n[f],a).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(g){vh(e,g.options)});var h=e._result;switch(We.sort(h),e.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var UT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function fq(e,t){var r=[],n=[],i=[],a=[],s=rc(e),l=s.dtstart,c=s.tzid,f=mq(e,t.unfold);return f.forEach(function(d){if(!!d){var h=gq(d),g=h.name,y=h.parms,m=h.value;switch(g.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: "+y.join(","));r.push(tc(d));break;case"RDATE":var _=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),w=_[0],E=_[1];E&&!c&&(c=E),n=n.concat(FT(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: "+y.join(","));i.push(tc(m));break;case"EXDATE":a=a.concat(FT(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:c,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function dq(e,t){var r=fq(e,t),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,c=r.tzid,f=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||n.length>1||i.length||a.length||s.length){var d=new ic(f);return d.dtstart(l),d.tzid(c||void 0),n.forEach(function(g){d.rrule(new Pe(Hm(g,l,c),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Pe(Hm(g,l,c),f))}),s.forEach(function(g){d.exdate(g)}),t.compatible&&t.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Pe(Hm(h,h.dtstart||t.dtstart||l,h.tzid||t.tzid||c),f)}function _h(e,t){return t===void 0&&(t={}),dq(e,hq(t))}function Hm(e,t,r){return vn(vn({},e),{dtstart:t,tzid:r})}function hq(e){var t=[],r=Object.keys(e),n=Object.keys(UT);if(r.forEach(function(i){Rt(n,i)||t.push(i)}),t.length)throw new Error("Invalid options: "+t.join(", "));return vn(vn({},UT),e)}function pq(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=KS(e,":",1),r=t[0],n=t[1];return{name:r,value:n}}function gq(e){var t=pq(e),r=t.name,n=t.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function mq(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var r=e.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function yq(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function FT(e,t){return yq(t),e.split(",").map(function(r){return We.untilStringToDate(r)})}function qT(e){var t=this;return function(r){if(r!==void 0&&(t["_"+e]=r),t["_"+e]!==void 0)return t["_"+e];for(var n=0;n<t._rrule.length;n++){var i=t._rrule[n].origOptions[e];if(i)return i}}}var ic=function(e){Il(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this,{},r)||this;return n.dtstart=qT.apply(n,["dtstart"]),n.tzid=qT.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return t.prototype._iter=function(r){return MT(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(r){GT(r,this._rrule)},t.prototype.exrule=function(r){GT(r,this._exrule)},t.prototype.rdate=function(r){VT(r,this._rdate)},t.prototype.exdate=function(r){VT(r,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(r){return _h(r.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(r){return _h(r.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},t.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(nc({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(KT("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(KT("EXDATE",this._exdate,this.tzid())),r},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var r=new t(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},t}(Pe);function GT(e,t){if(!(e instanceof Pe))throw new TypeError(String(e)+" is not RRule instance");Rt(t.map(String),String(e))||t.push(e)}function VT(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");Rt(t.map(Number),Number(e))||(t.push(e),We.sort(t))}function KT(e,t,r){var n=!r||r.toUpperCase()==="UTC",i=n?e+":":e+";TZID="+r+":",a=t.map(function(s){return We.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var Rl=ut(require("obsidian"));var ho=class extends Rl.Modal{constructor(t,r){super(window.app);this.template=null;this.folder=null;this.plugin=xt.getInstance();this.event=t,this.onSumbit=r}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:"You can now select a template to use"}),new Rl.Setting(t).setName("Template").addSearch(r=>{new Ku(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Rl.Setting(t).setName("Folder").addSearch(r=>{new ju(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Rl.Setting(t).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(n=>U(this,null,function*(){let i=yield oo(this.event,this.folder,this.template);this.onSumbit(i),this.close()}))})}onClose(){let{contentEl:t}=this;t.empty()}};function vq(e){oi(e,"svelte-1wq45u1",".weekActive.svelte-1wq45u1.svelte-1wq45u1{background-color:rgb(61, 102, 214) !important}.weekInActive.svelte-1wq45u1.svelte-1wq45u1{background-color:#2a2a2a !important}.buttonRow.svelte-1wq45u1.svelte-1wq45u1{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-1wq45u1.svelte-1wq45u1{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}.disabled.svelte-1wq45u1.svelte-1wq45u1{opacity:0.2}label.svelte-1wq45u1.svelte-1wq45u1{margin-top:5px}.googleFullDayContainer.svelte-1wq45u1.svelte-1wq45u1{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-1wq45u1.svelte-1wq45u1{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-1wq45u1 button.svelte-1wq45u1{width:40%}")}function jT(e,t,r){let n=e.slice();return n[41]=t[r],n[42]=t,n[43]=r,n}function HT(e,t,r){let n=e.slice();return n[44]=t[r],n}function _q(e){let t,r,n,i,a,s,l=e[3],c=[];for(let f=0;f<l.length;f+=1)c[f]=YT(HT(e,l,f));return{c(){t=ae("label"),t.textContent="Calendar",r=De(),n=ae("select");for(let f=0;f<c.length;f+=1)c[f].c();ee(t,"for","calendar"),ee(t,"class","svelte-1wq45u1"),ee(n,"name","calendar"),ee(n,"class","dropdown"),n.disabled=i=e[0].id!==void 0},m(f,d){xe(f,t,d),xe(f,r,d),xe(f,n,d);for(let h=0;h<c.length;h+=1)c[h].m(n,null);a||(s=Xe(n,"change",e[17]),a=!0)},p(f,d){if(d[0]&9){l=f[3];let h;for(h=0;h<l.length;h+=1){let g=HT(f,l,h);c[h]?c[h].p(g,d):(c[h]=YT(g),c[h].c(),c[h].m(n,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=l.length}d[0]&1&&i!==(i=f[0].id!==void 0)&&(n.disabled=i)},d(f){f&&be(t),f&&be(r),f&&be(n),tn(c,f),a=!1,s()}}}function wq(e){let t;return{c(){t=ae("span"),t.textContent="Loading"},m(r,n){xe(r,t,n)},p:St,d(r){r&&be(t)}}}function YT(e){let t,r=e[44].summary+"",n,i,a,s;return{c(){t=ae("option"),n=er(r),ee(t,"id",i=e[44].id),t.__value=a=e[44].id,t.value=t.__value,t.selected=s=e[44].id==e[0].parent.id},m(l,c){xe(l,t,c),re(t,n)},p(l,c){c[0]&8&&r!==(r=l[44].summary+"")&&ui(n,r),c[0]&8&&i!==(i=l[44].id)&&ee(t,"id",i),c[0]&8&&a!==(a=l[44].id)&&(t.__value=a,t.value=t.__value),c[0]&9&&s!==(s=l[44].id==l[0].parent.id)&&(t.selected=s)},d(l){l&&be(t)}}}function Eq(e){let t,r,n,i,a,s,l,c,f,d;return{c(){t=ae("label"),t.textContent="Start Date",r=De(),n=ae("input"),i=De(),a=ae("label"),a.textContent="End Date",s=De(),l=ae("input"),ee(t,"for","eventStartDate"),ee(t,"class","svelte-1wq45u1"),ee(n,"type","datetime-local"),ee(n,"name","eventStartDate"),ee(a,"for","eventEndDate"),ee(a,"class","svelte-1wq45u1"),ee(l,"type","datetime-local"),ee(l,"name","eventEndDate"),ee(l,"min",c=window.moment(e[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){xe(h,t,g),xe(h,r,g),xe(h,n,g),mn(n,e[1]),xe(h,i,g),xe(h,a,g),xe(h,s,g),xe(h,l,g),mn(l,e[2]),f||(d=[Xe(n,"input",e[30]),Xe(l,"input",e[31])],f=!0)},p(h,g){g[0]&2&&mn(n,h[1]),g[0]&2&&c!==(c=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&ee(l,"min",c),g[0]&4&&mn(l,h[2])},d(h){h&&be(t),h&&be(r),h&&be(n),h&&be(i),h&&be(a),h&&be(s),h&&be(l),f=!1,Qr(d)}}}function Cq(e){let t,r,n,i,a;return{c(){t=ae("label"),t.textContent="Date",r=De(),n=ae("input"),ee(t,"for","eventDate"),ee(t,"class","svelte-1wq45u1"),ee(n,"type","date"),ee(n,"name","eventDate")},m(s,l){xe(s,t,l),xe(s,r,l),xe(s,n,l),mn(n,e[12]),i||(a=Xe(n,"input",e[29]),i=!0)},p(s,l){l[0]&4096&&mn(n,s[12])},d(s){s&&be(t),s&&be(r),s&&be(n),i=!1,a()}}}function WT(e){let t,r,n,i,a,s,l,c,f=e[6]&&zT(e);return{c(){t=ae("div"),r=ae("label"),r.textContent="Reccuring",n=De(),i=ae("input"),a=De(),f&&f.c(),s=li(),ee(r,"for","reaccuring"),ee(r,"class","svelte-1wq45u1"),ee(i,"type","checkbox"),ee(i,"name","reaccuring"),ee(t,"class","googleFullDayContainer svelte-1wq45u1")},m(d,h){xe(d,t,h),re(t,r),re(t,n),re(t,i),i.checked=e[6],xe(d,a,h),f&&f.m(d,h),xe(d,s,h),l||(c=Xe(i,"change",e[32]),l=!0)},p(d,h){h[0]&64&&(i.checked=d[6]),d[6]?f?f.p(d,h):(f=zT(d),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},d(d){d&&be(t),d&&be(a),f&&f.d(d),d&&be(s),l=!1,c()}}}function zT(e){let t,r,n,i,a,s,l,c,f,d,h,g,y,m,_,w,E,S,N,R,D,O,te,V,M,le,se,_e,Oe;function Ne(ze,Ve){if(ze[9]=="Until")return xq;if(ze[9]=="For")return bq}let Se=Ne(e,[-1,-1]),Ee=Se&&Se(e),ve=e[7]===$e.WEEKLY&&QT(e);return{c(){t=ae("div"),r=ae("span"),r.textContent="Repeat every",n=De(),i=ae("input"),a=De(),s=ae("select"),l=ae("option"),c=er("Days"),d=ae("option"),h=er("Weeks"),y=ae("option"),m=er("Months"),w=ae("option"),E=er("Years"),N=De(),R=ae("select"),D=ae("option"),D.textContent="Forever",O=ae("option"),O.textContent="Until",te=ae("option"),te.textContent="For",V=De(),Ee&&Ee.c(),M=De(),le=ae("br"),se=De(),ve&&ve.c(),ee(i,"type","number"),ee(i,"name","recurringInterval"),ee(i,"step","1"),ee(i,"min","1"),Je(i,"width","90px",!1),l.__value=f=$e.DAILY,l.value=l.__value,ee(d,"default",""),d.__value=g=$e.WEEKLY,d.value=d.__value,y.__value=_=$e.MONTHLY,y.value=y.__value,w.__value=S=$e.YEARLY,w.value=w.__value,ee(s,"class","dropdown"),e[7]===void 0&&Sa(()=>e[34].call(s)),ee(D,"default",""),D.__value="Forever",D.value=D.__value,O.__value="Until",O.value=O.__value,te.__value="For",te.value=te.__value,ee(R,"class","dropdown"),e[9]===void 0&&Sa(()=>e[35].call(R))},m(ze,Ve){xe(ze,t,Ve),re(t,r),re(t,n),re(t,i),mn(i,e[8]),re(t,a),re(t,s),re(s,l),re(l,c),re(s,d),re(d,h),re(s,y),re(y,m),re(s,w),re(w,E),Zi(s,e[7]),re(t,N),re(t,R),re(R,D),re(R,O),re(R,te),Zi(R,e[9]),re(t,V),Ee&&Ee.m(t,null),re(t,M),re(t,le),re(t,se),ve&&ve.m(t,null),_e||(Oe=[Xe(i,"input",e[33]),Xe(s,"change",e[34]),Xe(R,"change",e[35])],_e=!0)},p(ze,Ve){Ve[0]&256&&Wu(i.value)!==ze[8]&&mn(i,ze[8]),Ve[0]&128&&Zi(s,ze[7]),Ve[0]&512&&Zi(R,ze[9]),Se===(Se=Ne(ze,Ve))&&Ee?Ee.p(ze,Ve):(Ee&&Ee.d(1),Ee=Se&&Se(ze),Ee&&(Ee.c(),Ee.m(t,M))),ze[7]===$e.WEEKLY?ve?ve.p(ze,Ve):(ve=QT(ze),ve.c(),ve.m(t,null)):ve&&(ve.d(1),ve=null)},d(ze){ze&&be(t),Ee&&Ee.d(),ve&&ve.d(),_e=!1,Qr(Oe)}}}function bq(e){let t,r,n,i,a;return{c(){t=ae("input"),r=De(),n=ae("span"),n.textContent="times",ee(t,"type","number"),ee(t,"name","recurringCount"),ee(t,"step","1"),ee(t,"min","1"),t.required=!0,Je(t,"width","90px",!1)},m(s,l){xe(s,t,l),mn(t,e[10]),xe(s,r,l),xe(s,n,l),i||(a=Xe(t,"input",e[37]),i=!0)},p(s,l){l[0]&1024&&Wu(t.value)!==s[10]&&mn(t,s[10])},d(s){s&&be(t),s&&be(r),s&&be(n),i=!1,a()}}}function xq(e){let t,r,n;return{c(){t=ae("input"),ee(t,"type","date"),ee(t,"name","recurringEndDate"),t.required=!0},m(i,a){xe(i,t,a),mn(t,e[11]),r||(n=Xe(t,"input",e[36]),r=!0)},p(i,a){a[0]&2048&&mn(t,i[11])},d(i){i&&be(t),r=!1,n()}}}function QT(e){let t,r=e[14],n=[];for(let i=0;i<r.length;i+=1)n[i]=XT(jT(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=li()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,t,a)},p(i,a){if(a[0]&16384){r=i[14];let s;for(s=0;s<r.length;s+=1){let l=jT(i,r,s);n[s]?n[s].p(l,a):(n[s]=XT(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){tn(n,i),i&&be(t)}}}function XT(e){let t,r=e[41][0].toString()+"",n,i,a,s,l;function c(){return e[38](e[41],e[42],e[43])}return{c(){t=ae("button"),n=er(r),i=De(),ee(t,"class",a=""+(bl(e[41][1]?"weekActive":"weekInActive")+" svelte-1wq45u1"))},m(f,d){xe(f,t,d),re(t,n),re(t,i),s||(l=Xe(t,"click",c),s=!0)},p(f,d){e=f,d[0]&16384&&r!==(r=e[41][0].toString()+"")&&ui(n,r),d[0]&16384&&a!==(a=""+(bl(e[41][1]?"weekActive":"weekInActive")+" svelte-1wq45u1"))&&ee(t,"class",a)},d(f){f&&be(t),s=!1,l()}}}function Sq(e){let t,r,n,i;return{c(){t=ae("div"),r=ae("button"),r.textContent="Create",ee(r,"class","svelte-1wq45u1"),ee(t,"class","buttonRow svelte-1wq45u1")},m(a,s){xe(a,t,s),re(t,r),n||(i=Xe(r,"click",e[18]),n=!0)},p:St,d(a){a&&be(t),n=!1,i()}}}function Tq(e){let t,r,n,i,a,s,l,c,f,d,h;function g(N,R){return N[6]?Iq:Aq}let y=g(e,[-1,-1]),m=y(e);function _(N,R){return N[13]?Nq:kq}let w=_(e,[-1,-1]),E=w(e),S=e[6]&&JT(e);return{c(){t=ae("div"),m.c(),r=De(),E.c(),n=De(),i=ae("div"),a=ae("button"),a.textContent="Update",s=De(),l=ae("button"),l.textContent="Delete",c=De(),S&&S.c(),f=li(),ee(t,"class","buttonRow svelte-1wq45u1"),ee(a,"class","svelte-1wq45u1"),ee(l,"class","svelte-1wq45u1"),ee(i,"class","buttonRow svelte-1wq45u1")},m(N,R){xe(N,t,R),m.m(t,null),re(t,r),E.m(t,null),xe(N,n,R),xe(N,i,R),re(i,a),re(i,s),re(i,l),xe(N,c,R),S&&S.m(N,R),xe(N,f,R),d||(h=[Xe(a,"click",e[21]),Xe(l,"click",e[19])],d=!0)},p(N,R){y===(y=g(N,R))&&m?m.p(N,R):(m.d(1),m=y(N),m&&(m.c(),m.m(t,r))),w===(w=_(N,R))&&E?E.p(N,R):(E.d(1),E=w(N),E&&(E.c(),E.m(t,null))),N[6]?S?S.p(N,R):(S=JT(N),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null)},d(N){N&&be(t),m.d(),E.d(),N&&be(n),N&&be(i),N&&be(c),S&&S.d(N),N&&be(f),d=!1,Qr(h)}}}function Aq(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Show Single Event",ee(t,"class","svelte-1wq45u1")},m(i,a){xe(i,t,a),r||(n=Xe(t,"click",e[25]),r=!0)},p:St,d(i){i&&be(t),r=!1,n()}}}function Iq(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Show Recurring Event",ee(t,"class","svelte-1wq45u1")},m(i,a){xe(i,t,a),r||(n=Xe(t,"click",e[25]),r=!0)},p:St,d(i){i&&be(t),r=!1,n()}}}function kq(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Create Event Note",ee(t,"class","svelte-1wq45u1")},m(i,a){xe(i,t,a),r||(n=Xe(t,"click",e[24]),r=!0)},p:St,d(i){i&&be(t),r=!1,n()}}}function Nq(e){let t,r,n;return{c(){t=ae("button"),t.textContent="Open Event Note",ee(t,"class","svelte-1wq45u1")},m(i,a){xe(i,t,a),r||(n=Xe(t,"click",e[23]),r=!0)},p:St,d(i){i&&be(t),r=!1,n()}}}function JT(e){let t,r,n,i,a,s;return{c(){t=ae("div"),r=ae("button"),r.textContent="Update All",n=De(),i=ae("button"),i.textContent="Delete All",r.disabled=!0,ee(r,"class","disabled svelte-1wq45u1"),ee(i,"class","svelte-1wq45u1"),ee(t,"class","buttonRow svelte-1wq45u1")},m(l,c){xe(l,t,c),re(t,r),re(t,n),re(t,i),a||(s=[Xe(r,"click",e[22]),Xe(i,"click",e[20])],a=!0)},p:St,d(l){l&&be(t),a=!1,Qr(s)}}}function Rq(e){let t,r,n,i,a,s,l,c,f,d,h,g,y,m,_,w,E,S,N;function R(Ne,Se){return Ne[4]?wq:_q}let D=R(e,[-1,-1]),O=D(e);function te(Ne,Se){return Ne[5]?Cq:Eq}let V=te(e,[-1,-1]),M=V(e),le=!e[0].id&&WT(e);function se(Ne,Se){return Ne[0].id?Tq:Sq}let _e=se(e,[-1,-1]),Oe=_e(e);return{c(){t=ae("div"),r=ae("input"),n=De(),i=ae("label"),i.textContent="Description",a=De(),s=ae("textarea"),c=De(),O.c(),f=De(),d=ae("div"),h=ae("label"),h.textContent="Full Day",g=De(),y=ae("input"),m=De(),M.c(),_=De(),le&&le.c(),w=De(),E=ae("div"),Oe.c(),ee(r,"class","summaryInput svelte-1wq45u1"),ee(r,"name","summary"),ee(r,"type","text"),ee(r,"placeholder","Summary"),ee(i,"for","description"),ee(i,"class","svelte-1wq45u1"),ee(s,"name","description"),s.value=l=e[15](),ee(h,"for","fullDay"),ee(h,"class","svelte-1wq45u1"),ee(y,"type","checkbox"),ee(y,"name","fullDay"),ee(d,"class","googleFullDayContainer svelte-1wq45u1"),ee(E,"class","googleEventButtonContainer svelte-1wq45u1"),ee(t,"class","googleEventDetails")},m(Ne,Se){xe(Ne,t,Se),re(t,r),mn(r,e[0].summary),re(t,n),re(t,i),re(t,a),re(t,s),re(t,c),O.m(t,null),re(t,f),re(t,d),re(d,h),re(d,g),re(d,y),y.checked=e[5],re(t,m),M.m(t,null),re(t,_),le&&le.m(t,null),re(t,w),re(t,E),Oe.m(E,null),S||(N=[Xe(r,"input",e[27]),Xe(s,"change",e[16]),Xe(y,"change",e[28])],S=!0)},p(Ne,Se){Se[0]&1&&r.value!==Ne[0].summary&&mn(r,Ne[0].summary),D===(D=R(Ne,Se))&&O?O.p(Ne,Se):(O.d(1),O=D(Ne),O&&(O.c(),O.m(t,f))),Se[0]&32&&(y.checked=Ne[5]),V===(V=te(Ne,Se))&&M?M.p(Ne,Se):(M.d(1),M=V(Ne),M&&(M.c(),M.m(t,_))),Ne[0].id?le&&(le.d(1),le=null):le?le.p(Ne,Se):(le=WT(Ne),le.c(),le.m(t,w)),_e===(_e=se(Ne,Se))&&Oe?Oe.p(Ne,Se):(Oe.d(1),Oe=_e(Ne),Oe&&(Oe.c(),Oe.m(E,null)))},i:St,o:St,d(Ne){Ne&&be(t),O.d(),M.d(),le&&le.d(),Oe.d(),S=!1,Qr(N)}}}function ZT(){let e=15,t=1e3*60*e;return window.moment(new Date(Math.round(new Date().getTime()/t)*t))}function Bq(e,t,r){let{event:n}=t,{closeFunction:i}=t,a,s=!0,l,c,f,d=1,h,g,y,m=xt.getInstance(),_,w,E,S=app.vault.getFiles().find(Ce=>Ce.basename==n.summary),N=[[Pe.MO,!0],[Pe.TU,!0],[Pe.WE,!0],[Pe.TH,!0],[Pe.FR,!0],[Pe.SA,!0],[Pe.SU,!0]];function R(Ce){return l?(Ce.start.date=window.moment(E).format("YYYY-MM-DD"),Ce.end.date=window.moment(E).format("YYYY-MM-DD"),delete Ce.start.dateTime,delete Ce.end.dateTime):(Ce.start.dateTime=window.moment(_).format(),Ce.end.dateTime=window.moment(w).format(),delete Ce.start.date,delete Ce.end.date),Ce}ro(()=>Er(void 0,void 0,void 0,function*(){var Ce,A,B,L;if(r(3,a=yield pn()),r(4,s=!1),r(5,l=((Ce=n==null?void 0:n.start)===null||Ce===void 0?void 0:Ce.dateTime)==null&&((A=n==null?void 0:n.start)===null||A===void 0?void 0:A.date)!==void 0),r(6,c=(n==null?void 0:n.recurringEventId)!==void 0),n.id==null){r(0,n.summary=(B=n.summary)!==null&&B!==void 0?B:"",n),r(0,n.description=(L=n.description)!==null&&L!==void 0?L:"",n),r(0,n.parent=a.find(G=>G.id===m.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(6,c=!1);let Y=ZT();r(1,_=Y.format("YYYY-MM-DDTHH:mm")),r(2,w=Y.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(12,E=Y.format("YYYY-MM-DD")),n.start.date&&r(12,E=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,_=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,w=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else if(l){let Y=ZT();r(1,_=Y.format("YYYY-MM-DDTHH:mm")),r(2,w=Y.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(12,E=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,_=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,w=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(12,E=window.moment().format("YYYY-MM-DD"))}));let D=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",O=Ce=>{Ce.target instanceof HTMLTextAreaElement&&r(0,n.description=Ce.target.value,n)},te=Ce=>{let A=Ce.target;if(A instanceof HTMLSelectElement){let B=A.value;r(0,n.parent.id=B,n)}},V=()=>Er(void 0,void 0,void 0,function*(){if(c){let A=N.map(G=>{if(G[1])return G[0]});A=A.filter(G=>G!==void 0);let B=new ic,L={freq:f,interval:d};h==="For"?L.count=g:h==="Until"&&(L.until=new Date(y)),f===Pe.WEEKLY&&A.length&&(L.byweekday=A);let Y=new Pe(L);B.rrule(Y),r(0,n.recurrence=B.valueOf(),n)}(yield GS(R(n))).id&&i()}),M=Ce=>Er(void 0,void 0,void 0,function*(){let A=!1;n.recurringEventId?A=yield fh(n,!0):A=yield fh(n),A&&i()}),le=()=>Er(void 0,void 0,void 0,function*(){(yield fh(R(n)))&&i()}),se=()=>Er(void 0,void 0,void 0,function*(){let Ce=R(n),A;Ce.recurringEventId?A=yield dh(Ce,!0):A=yield dh(Ce),A.id&&i()}),_e=()=>Er(void 0,void 0,void 0,function*(){(yield dh(R(n))).id&&i()}),Oe=()=>Er(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(S),i()}),Ne=()=>Er(void 0,void 0,void 0,function*(){new ho(n,Ce=>r(13,S=Ce)).open()}),Se=()=>{window.open(n.htmlLink)};function Ee(){n.summary=this.value,r(0,n)}function ve(){l=this.checked,r(5,l)}function ze(){E=this.value,r(12,E)}function Ve(){_=this.value,r(1,_)}function vt(){w=this.value,r(2,w),r(1,_)}function pt(){c=this.checked,r(6,c)}function Qe(){d=Wu(this.value),r(8,d)}function fe(){f=xl(this),r(7,f)}function gt(){h=xl(this),r(9,h)}function tt(){y=this.value,r(11,y)}function _t(){g=Wu(this.value),r(10,g)}let Ze=(Ce,A,B)=>{r(14,A[B][1]=!Ce[1],N)};return e.$$set=Ce=>{"event"in Ce&&r(0,n=Ce.event),"closeFunction"in Ce&&r(26,i=Ce.closeFunction)},e.$$.update=()=>{if(e.$$.dirty[0]&6){e:{let Ce=window.moment(_);window.moment(w).isBefore(Ce)&&r(2,w=Ce.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,_,w,a,s,l,c,f,d,h,g,y,E,S,N,D,O,te,V,M,le,se,_e,Oe,Ne,Se,i,Ee,ve,ze,Ve,vt,pt,Qe,fe,gt,tt,_t,Ze]}var $T=class extends yn{constructor(t){super();Nn(this,t,Bq,Rq,In,{event:0,closeFunction:26},vq,[-1,-1])}},eA=$T;var hi=class extends tA.Modal{constructor(t,r){super(xt.getInstance().app);this.selectedEvent=t,r&&(this.closeFunction=r)}onOpen(){return U(this,null,function*(){let{contentEl:t}=this;new eA({target:t,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:t}=this;t.empty()}};var CA=ut(zm());var wh=ut(zm()),wA=ut(to()),Eh={},eG=new Event("dailyNoteUpdate",{bubbles:!0,cancelable:!1,composed:!1}),dc=e=>U(void 0,null,function*(){if(app.workspace.layoutReady&&e.settings.activateDailyNoteAddon){let t={};try{t=(0,wh.getAllDailyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),e.settings.activateDailyNoteAddon=!1,e.saveSettings()}wA.default.isEqual(Eh,t)==!1&&(Eh=t),document.dispatchEvent(eG)}}),Ch=()=>Eh,hc=e=>(0,wh.getDailyNote)(e,Eh);var Bi=class extends EA.FuzzySuggestModal{constructor(t,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=xt.getInstance();this.eventList=[...t],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>U(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new hi({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield lr({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(t){return t.id=="xxx"?hc(this.currentDate)?"Open daily note":"Create daily note":t.start.date?`${t.start.date}		 | ${t.summary}	`:`${window.moment(t.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${t.summary}	`}onChooseItem(t){return U(this,null,function*(){if(t.id=="xxx"){let r=hc(this.currentDate);r||(r=yield(0,CA.createDailyNote)(this.currentDate)),app.workspace.getLeaf(!0).openFile(r);return}this.modalSelectMode=="details"?(this.open(),new hi(t,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?oo(t,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new ho(t,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var bh=class extends bA.FuzzySuggestModal{constructor(t){super(xt.getInstance().app);this.calendarList=t,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(t){return`${t.summary}	`}onChooseItem(t){return U(this,null,function*(){let r=yield lr({include:[t.id]});new Bi(r,"details").open()})}};var fs;(function(i){i.web="web",i.month="month",i.day="day",i.schedule="schedule"})(fs||(fs={}));var Gh=ut(require("obsidian"));var NA=ut(AA());function pc(e){return e.getHours()/24+e.getMinutes()/(60*24)}function IA(e,t){if(e.start.date||(e==null?void 0:e.eventType)=="multiDay")return 0;let r=pc(new Date(e.start.dateTime));return t*r}function kA(e,t){if(e.start.date||(e==null?void 0:e.eventType)=="multiDay")return 25;let r=pc(new Date(e.start.dateTime)),n=pc(new Date(e.end.dateTime));return t*(n-r)}var Sh=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark";function oG(e){oi(e,"svelte-10n616",'.event.svelte-10n616{display:flex;padding:10px;padding-top:0;position:absolute;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-10n616::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourText.svelte-10n616{display:block;font-family:"consolas"}.timeline.svelte-10n616,.hourText.svelte-10n616,.hourTextContainer.svelte-10n616{overflow:hidden}.timeDisplay.svelte-10n616{position:absolute;height:3px;background:red;overflow:visible}.timeline.svelte-10n616{position:relative;display:flex;flex-direction:row;overflow:visible}')}function RA(e,t,r){let n=e.slice();return n[15]=t[r],n[17]=r,n}function BA(e,t,r){let n=e.slice();return n[18]=t[r],n[17]=r,n}function DA(e,t,r){let n=e.slice();return n[18]=t[r],n[17]=r,n}function lG(e){let t,r,n,i,a=`-${e[1]/52}px`,s,l=window.moment().isSame(e[0],"day"),c,f=`${e[1]}px`,d=`${e[2]}px`,h={length:24},g=[];for(let S=0;S<h.length;S+=1)g[S]=OA(DA(e,h,S));let y={length:24},m=[];for(let S=0;S<y.length;S+=1)m[S]=LA(BA(e,y,S));let _=l&&PA(e),w=e[5],E=[];for(let S=0;S<w.length;S+=1)E[S]=MA(RA(e,w,S));return{c(){t=ae("div"),r=ae("div");for(let S=0;S<g.length;S+=1)g[S].c();n=De(),i=ae("div");for(let S=0;S<m.length;S+=1)m[S].c();s=De(),_&&_.c(),c=De();for(let S=0;S<E.length;S+=1)E[S].c();ee(r,"class","hourLineContainer"),ee(i,"class","hourTextContainer svelte-10n616"),Je(i,"margin-top",a,!1),ee(t,"class","timeline svelte-10n616"),Je(t,"height",f,!1),Je(t,"width",d,!1)},m(S,N){xe(S,t,N),re(t,r);for(let R=0;R<g.length;R+=1)g[R].m(r,null);re(t,n),re(t,i);for(let R=0;R<m.length;R+=1)m[R].m(i,null);re(t,s),_&&_.m(t,null),re(t,c);for(let R=0;R<E.length;R+=1)E[R].m(t,null)},p(S,N){if(N&2){h={length:24};let R;for(R=0;R<h.length;R+=1){let D=DA(S,h,R);g[R]?g[R].p(D,N):(g[R]=OA(D),g[R].c(),g[R].m(r,null))}for(;R<g.length;R+=1)g[R].d(1);g.length=h.length}if(N&2){y={length:24};let R;for(R=0;R<y.length;R+=1){let D=BA(S,y,R);m[R]?m[R].p(D,N):(m[R]=LA(D),m[R].c(),m[R].m(i,null))}for(;R<m.length;R+=1)m[R].d(1);m.length=y.length}if(N&2&&a!==(a=`-${S[1]/52}px`)&&Je(i,"margin-top",a,!1),N&1&&(l=window.moment().isSame(S[0],"day")),l?_?_.p(S,N):(_=PA(S),_.c(),_.m(t,c)):_&&(_.d(1),_=null),N&96){w=S[5];let R;for(R=0;R<w.length;R+=1){let D=RA(S,w,R);E[R]?E[R].p(D,N):(E[R]=MA(D),E[R].c(),E[R].m(t,null))}for(;R<E.length;R+=1)E[R].d(1);E.length=w.length}N&2&&f!==(f=`${S[1]}px`)&&Je(t,"height",f,!1),N&4&&d!==(d=`${S[2]}px`)&&Je(t,"width",d,!1)},d(S){S&&be(t),tn(g,S),tn(m,S),_&&_.d(),tn(E,S)}}}function uG(e){let t;return{c(){t=ae("p"),t.textContent="Loading"},m(r,n){xe(r,t,n)},p:St,d(r){r&&be(t)}}}function OA(e){let t,r=`${e[1]/24}px`;return{c(){t=ae("div"),ee(t,"class","hourLine svelte-10n616"),Je(t,"height",r,!1)},m(n,i){xe(n,t,i)},p(n,i){i&2&&r!==(r=`${n[1]/24}px`)&&Je(t,"height",r,!1)},d(n){n&&be(t)}}}function LA(e){let t,r,n=`${e[1]/24}px`,i=`${e[1]/50}px`;return{c(){t=ae("span"),r=er(e[17]),ee(t,"class","hourText svelte-10n616"),Je(t,"height",n,!1),Je(t,"font-size",i,!1)},m(a,s){xe(a,t,s),re(t,r)},p(a,s){s&2&&n!==(n=`${a[1]/24}px`)&&Je(t,"height",n,!1),s&2&&i!==(i=`${a[1]/50}px`)&&Je(t,"font-size",i,!1)},d(a){a&&be(t)}}}function PA(e){let t,r=`${e[4]}px`,n=`${e[2]}px`;return{c(){t=ae("div"),ee(t,"class","timeDisplay svelte-10n616"),Je(t,"top",r,!1),Je(t,"width",n,!1)},m(i,a){xe(i,t,a)},p(i,a){a&16&&r!==(r=`${i[4]}px`)&&Je(t,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&Je(t,"width",n,!1)},d(i){i&&be(t)}}}function MA(e){let t,r=e[15].event.summary+"",n,i,a=`${e[15].y}px`,s=`${e[15].x}px`,l=`${e[15].width}px`,c=`${e[15].height}px`,f,d;function h(...g){return e[10](e[15],...g)}return{c(){t=ae("div"),n=er(r),ee(t,"class","event svelte-10n616"),ee(t,"id",i=e[15].event.id),Je(t,"top",a,!1),Je(t,"left",s,!1),Je(t,"width",l,!1),Je(t,"height",c,!1),Je(t,"background",Lu(e[15].event),!1)},m(g,y){xe(g,t,y),re(t,n),f||(d=Xe(t,"click",h),f=!0)},p(g,y){e=g,y&32&&r!==(r=e[15].event.summary+"")&&ui(n,r),y&32&&i!==(i=e[15].event.id)&&ee(t,"id",i),y&32&&a!==(a=`${e[15].y}px`)&&Je(t,"top",a,!1),y&32&&s!==(s=`${e[15].x}px`)&&Je(t,"left",s,!1),y&32&&l!==(l=`${e[15].width}px`)&&Je(t,"width",l,!1),y&32&&c!==(c=`${e[15].height}px`)&&Je(t,"height",c,!1),y&32&&Je(t,"background",Lu(e[15].event),!1)},d(g){g&&be(t),f=!1,d()}}}function cG(e){let t;function r(a,s){return a[3]?uG:lG}let n=r(e,-1),i=n(e);return{c(){i.c(),t=li()},m(a,s){i.m(a,s),xe(a,t,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(t.parentNode,t)))},i:St,o:St,d(a){i.d(a),a&&be(t)}}}function fG(e,t,r){let{height:n=700}=t,{width:i=300}=t,{date:a=window.moment()}=t,{include:s}=t,{exclude:l}=t,c=!0,f=0,d=[],h=[],g,y=()=>Er(void 0,void 0,void 0,function*(){yield _();let S=pc(new Date);r(4,f=Math.floor(n*S))}),m=()=>{let S=new NA.default;d.forEach(D=>{let O=D.start.date||D.start.dateTime;S.has(O)?S.get(O).push(D):S.set(O,[D])});let N=0,R=null;for(let D of S.values()){if(D[0].start.dateTime){let O=window.moment(D[0].start.dateTime);R&&O.isBefore(R,"minutes")?N++:N=0,R=window.moment(D[0].end.dateTime)}D.forEach((O,te)=>{let V=30+N*10,M=(i-V)/D.length;r(5,h=[...h,{event:O,x:V+M*te,y:IA(O,n),width:M,height:kA(O,n),fullDay:O.start.date!=null}])})}},_=()=>Er(void 0,void 0,void 0,function*(){if(!a.isValid())return;let S=yield lr({startDate:a,include:s,exclude:l});JSON.stringify(S)!=JSON.stringify(d)&&(d=S,r(5,h=[]),m()),r(3,c=!1)}),w=(S,N)=>{N.shiftKey?window.open(S.htmlLink):new hi(S,()=>{ki(),r(0,a),r(9,g)}).open()};no(()=>{clearInterval(g)});let E=(S,N)=>w(S.event,N);return e.$$set=S=>{"height"in S&&r(1,n=S.height),"width"in S&&r(2,i=S.width),"date"in S&&r(0,a=S.date),"include"in S&&r(7,s=S.include),"exclude"in S&&r(8,l=S.exclude)},e.$$.update=()=>{if(e.$$.dirty&513){e:r(0,a),r(9,g),g&&clearInterval(g),r(3,c=!0),r(9,g=setInterval(y,5e3)),y()}},[a,n,i,c,f,h,w,s,l,g,E]}var UA=class extends yn{constructor(t){super();Nn(this,t,fG,cG,In,{height:1,width:2,date:0,include:7,exclude:8},oG)}},FA=UA;function dG(e){oi(e,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function qA(e){let t,r,n,i,a,s=e[0].format("YYYY-MM-DD")+"",l,c,f,d,h,g,y,m,_,w,E,S,N,R;return{c(){t=ae("div"),r=ae("button"),r.textContent="+",n=De(),i=ae("h3"),a=er("Google Calendar "),l=er(s),c=De(),f=ae("div"),d=ae("button"),d.textContent="<<",h=De(),g=ae("button"),g.textContent="<",y=De(),m=ae("button"),m.textContent="Today",_=De(),w=ae("button"),w.textContent=">",E=De(),S=ae("button"),S.textContent=">>",ee(r,"aria-label","Create Event"),ee(t,"class","titleContainer svelte-169s007"),ee(d,"class","fixedSizeButton svelte-169s007"),ee(d,"aria-label","Back 1 week"),ee(g,"class","fixedSizeButton svelte-169s007"),ee(g,"aria-label","Back 1 day"),ee(m,"class","fixedSizeButton svelte-169s007"),ee(m,"aria-label","Jump to today"),ee(w,"class","fixedSizeButton svelte-169s007"),ee(w,"aria-label","Forward 1 day"),ee(S,"class","fixedSizeButton svelte-169s007"),ee(S,"aria-label","Forward 1 week"),ee(f,"class","navigationContainer svelte-169s007")},m(D,O){xe(D,t,O),re(t,r),re(t,n),re(t,i),re(i,a),re(i,l),xe(D,c,O),xe(D,f,O),re(f,d),re(f,h),re(f,g),re(f,y),re(f,m),re(f,_),re(f,w),re(f,E),re(f,S),N||(R=[Xe(r,"click",e[11]),Xe(d,"click",e[6]),Xe(g,"click",e[7]),Xe(m,"click",e[8]),Xe(w,"click",e[10]),Xe(S,"click",e[9])],N=!0)},p(D,O){O&1&&s!==(s=D[0].format("YYYY-MM-DD")+"")&&ui(l,s)},d(D){D&&be(t),D&&be(c),D&&be(f),N=!1,Qr(R)}}}function hG(e){let t,r,n,i,a,s=e[3]&&e[0]&&qA(e);function l(f){e[13](f)}let c={height:e[1],width:e[2],include:e[4],exclude:e[5]};return e[0]!==void 0&&(c.date=e[0]),n=new FA({props:c}),kn.push(()=>Aa(n,"date",l)),{c(){t=ae("div"),s&&s.c(),r=De(),Ju(n.$$.fragment),Je(t,"padding-left","10px")},m(f,d){xe(f,t,d),s&&s.m(t,null),re(t,r),Sl(n,t,null),a=!0},p(f,[d]){f[3]&&f[0]?s?s.p(f,d):(s=qA(f),s.c(),s.m(t,r)):s&&(s.d(1),s=null);let h={};d&2&&(h.height=f[1]),d&4&&(h.width=f[2]),d&16&&(h.include=f[4]),d&32&&(h.exclude=f[5]),!i&&d&1&&(i=!0,h.date=f[0],Ta(()=>i=!1)),n.$set(h)},i(f){a||(ci(n.$$.fragment,f),a=!0)},o(f){Ni(n.$$.fragment,f),a=!1},d(f){f&&be(t),s&&s.d(),ao(n)}}}function pG(e,t,r){let{height:n=void 0}=t,{width:i=void 0}=t,{date:a=void 0}=t,{navigation:s=!1}=t,{include:l}=t,{exclude:c}=t,f=0,d=()=>r(12,f-=7),h=()=>r(12,f-=1),g=()=>r(12,f=0),y=()=>r(12,f+=7),m=()=>r(12,f+=1),_=E=>{new hi({start:{},end:{}},()=>{ki(),r(0,a),r(3,s),r(12,f)}).open()};function w(E){a=E,r(0,a),r(3,s),r(12,f)}return e.$$set=E=>{"height"in E&&r(1,n=E.height),"width"in E&&r(2,i=E.width),"date"in E&&r(0,a=E.date),"navigation"in E&&r(3,s=E.navigation),"include"in E&&r(4,l=E.include),"exclude"in E&&r(5,c=E.exclude)},e.$$.update=()=>{if(e.$$.dirty&4105){e:r(0,a=s?window.moment().local().add(f,"days"):a)}},[a,n,i,s,l,c,d,h,g,y,m,_,f,w]}var GA=class extends yn{constructor(t){super();Nn(this,t,pG,hG,In,{height:1,width:2,date:0,navigation:3,include:4,exclude:5},dG)}},Th=GA;function gG(e){oi(e,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function mG(e){let t,r,n=`${e[0]}px`,i=`${e[1]}px`;return{c(){t=ae("webview"),Yu(t.src,r=e[3])||ee(t,"src",r),ee(t,"allowpopups",""),Je(t,"width",n,!1),Je(t,"height",i,!1)},m(a,s){xe(a,t,s),e[7](t)},p(a,s){s&8&&!Yu(t.src,r=a[3])&&ee(t,"src",r),s&1&&n!==(n=`${a[0]}px`)&&Je(t,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&Je(t,"height",i,!1)},d(a){a&&be(t),e[7](null)}}}function yG(e){let t,r;return{c(){t=ae("webview"),Yu(t.src,r=e[3])||ee(t,"src",r),ee(t,"allowpopups",""),ee(t,"class","fullSize svelte-1ficnkj")},m(n,i){xe(n,t,i),e[6](t)},p(n,i){i&8&&!Yu(t.src,r=n[3])&&ee(t,"src",r)},d(n){n&&be(t),e[6](null)}}}function vG(e){let t,r;function n(s,l){return s[0]==0?yG:mG}let i=n(e,-1),a=i(e);return{c(){t=ae("div"),r=ae("div"),a.c(),ee(r,"class","content svelte-1ficnkj"),ee(t,"class","box svelte-1ficnkj")},m(s,l){xe(s,t,l),re(t,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:St,o:St,d(s){s&&be(t),a.d()}}}function _G(e,t,r){let n=xt.getInstance(),{date:i=window.moment()}=t,{width:a=0}=t,{height:s=0}=t,{theme:l=n.settings.webViewDefaultColorMode}=t,c,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",ro(()=>{l=="auto"&&r(4,l=Sh()),l=="dark"&&c.addEventListener("dom-ready",()=>{c.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){kn[g?"unshift":"push"](()=>{c=g,r(2,c)})}function h(g){kn[g?"unshift":"push"](()=>{c=g,r(2,c)})}return e.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,c,f,l,i,d,h]}var VA=class extends yn{constructor(t){super();Nn(this,t,_G,vG,In,{date:5,width:0,height:1,theme:4},gG)}},Ah=VA;var yZ=ut(require("obsidian"));function Vr(){}function gc(e,t){for(let r in t)e[r]=t[r];return e}function wG(e){return e&&typeof e=="object"&&typeof e.then=="function"}function KA(e){return e()}function jA(){return Object.create(null)}function hs(e){e.forEach(KA)}function ea(e){return typeof e=="function"}function Xm(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ih(e,t){return e!=e?t==t:e!==t}function EG(e){return Object.keys(e).length===0}function HA(e,t,r,n){if(e){let i=YA(e,t,r,n);return e[0](i)}}function YA(e,t,r,n){return e[1]&&n?gc(r.ctx.slice(),e[1](n(t))):r.ctx}function CG(e,t,r,n){if(e[2]&&n){let i=e[2](n(r));if(t.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(t.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=t.dirty[l]|i[l];return a}return t.dirty|i}return t.dirty}function WA(e,t,r,n,i,a,s){let l=CG(t,n,i,a);if(l){let c=YA(t,r,n,s);e.p(c,l)}}function Ll(e){return e==null?"":e}function ht(e,t){e.appendChild(t)}function Kr(e,t,r){e.insertBefore(t,r||null)}function Br(e){e.parentNode.removeChild(e)}function kh(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function Gt(e){return document.createElement(e)}function Pl(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function go(e){return document.createTextNode(e)}function Vn(){return go(" ")}function Nh(){return go("")}function Na(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function st(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function zA(e,t){let r=Object.getOwnPropertyDescriptors(e.__proto__);for(let n in t)t[n]==null?e.removeAttribute(n):n==="style"?e.style.cssText=t[n]:n==="__value"?e.value=e[n]=t[n]:r[n]&&r[n].set?e[n]=t[n]:st(e,n,t[n])}function bG(e){return Array.from(e.childNodes)}function mc(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function br(e,t,r){e.classList[r?"add":"remove"](t)}var Rh;function ps(e){Rh=e}function xG(){if(!Rh)throw new Error("Function called outside component initialization");return Rh}var yc=[],QA=[],Bh=[],XA=[],SG=Promise.resolve(),Jm=!1;function TG(){Jm||(Jm=!0,SG.then(ty))}function Zm(e){Bh.push(e)}var $m=!1,ey=new Set;function ty(){if(!$m){$m=!0;do{for(let e=0;e<yc.length;e+=1){let t=yc[e];ps(t),AG(t.$$)}for(ps(null),yc.length=0;QA.length;)QA.pop()();for(let e=0;e<Bh.length;e+=1){let t=Bh[e];ey.has(t)||(ey.add(t),t())}Bh.length=0}while(yc.length);for(;XA.length;)XA.pop()();Jm=!1,$m=!1,ey.clear()}}function AG(e){if(e.fragment!==null){e.update(),hs(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Zm)}}var Dh=new Set,mo;function yo(){mo={r:0,c:[],p:mo}}function vo(){mo.r||hs(mo.c),mo=mo.p}function Wt(e,t){e&&e.i&&(Dh.delete(e),e.i(t))}function ur(e,t,r,n){if(e&&e.o){if(Dh.has(e))return;Dh.add(e),mo.c.push(()=>{Dh.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}}function JA(e,t){let r=t.token={};function n(i,a,s,l){if(t.token!==r)return;t.resolved=l;let c=t.ctx;s!==void 0&&(c=c.slice(),c[s]=l);let f=i&&(t.current=i)(c),d=!1;t.block&&(t.blocks?t.blocks.forEach((h,g)=>{g!==a&&h&&(yo(),ur(h,1,1,()=>{t.blocks[g]===h&&(t.blocks[g]=null)}),vo())}):t.block.d(1),f.c(),Wt(f,1),f.m(t.mount(),t.anchor),d=!0),t.block=f,t.blocks&&(t.blocks[a]=f),d&&ty()}if(wG(e)){let i=xG();if(e.then(a=>{ps(i),n(t.then,1,t.value,a),ps(null)},a=>{if(ps(i),n(t.catch,2,t.error,a),ps(null),!t.hasCatch)throw a}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function ZA(e,t){ur(e,1,1,()=>{t.delete(e.key)})}function $A(e,t,r,n,i,a,s,l,c,f,d,h){let g=e.length,y=a.length,m=g,_={};for(;m--;)_[e[m].key]=m;let w=[],E=new Map,S=new Map;for(m=y;m--;){let O=h(i,a,m),te=r(O),V=s.get(te);V?n&&V.p(O,t):(V=f(te,O),V.c()),E.set(te,w[m]=V),te in _&&S.set(te,Math.abs(m-_[te]))}let N=new Set,R=new Set;function D(O){Wt(O,1),O.m(l,d),s.set(O.key,O),d=O.first,y--}for(;g&&y;){let O=w[y-1],te=e[g-1],V=O.key,M=te.key;O===te?(d=O.first,g--,y--):E.has(M)?!s.has(V)||N.has(V)?D(O):R.has(M)?g--:S.get(V)>S.get(M)?(R.add(V),D(O)):(N.add(M),g--):(c(te,s),g--)}for(;g--;){let O=e[g];E.has(O.key)||c(O,s)}for(;y;)D(w[y-1]);return w}function Oh(e,t){let r={},n={},i={$$scope:1},a=e.length;for(;a--;){let s=e[a],l=t[a];if(l){for(let c in s)c in l||(n[c]=1);for(let c in l)i[c]||(r[c]=l[c],i[c]=1);e[a]=l}else for(let c in s)i[c]=1}for(let s in n)s in r||(r[s]=void 0);return r}function ry(e){return typeof e=="object"&&e!==null?e:{}}function Ra(e){e&&e.c()}function ta(e,t,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,r),n||Zm(()=>{let c=a.map(KA).filter(ea);s?s.push(...c):hs(c),e.$$.on_mount=[]}),l.forEach(Zm)}function ra(e,t){let r=e.$$;r.fragment!==null&&(hs(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function IG(e,t){e.$$.dirty[0]===-1&&(yc.push(e),TG(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _o(e,t,r,n,i,a,s=[-1]){let l=Rh;ps(e);let c=e.$$={fragment:null,ctx:null,props:a,update:Vr,not_equal:i,bound:jA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:jA(),dirty:s,skip_bound:!1},f=!1;if(c.ctx=r?r(e,t.props||{},(d,h,...g)=>{let y=g.length?g[0]:h;return c.ctx&&i(c.ctx[d],c.ctx[d]=y)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](y),f&&IG(e,d)),h}):[],c.update(),f=!0,hs(c.before_update),c.fragment=n?n(c.ctx):!1,t.target){if(t.hydrate){let d=bG(t.target);c.fragment&&c.fragment.l(d),d.forEach(Br)}else c.fragment&&c.fragment.c();t.intro&&Wt(e.$$.fragment),ta(e,t.target,t.anchor,t.customElement),ty()}ps(l)}var gs=class{$destroy(){ra(this,1),this.$destroy=Vr}$on(t,r){let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!EG(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};function kG(e,t="day"){let r=e.clone().startOf(t).format();return`${t}-${r}`}var Lh=kG;function NG(){var e=Gt("style");e.id="svelte-1widvzq-style",e.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",ht(document.head,e)}function RG(e){let t,r,n;return{c(){t=Pl("svg"),r=Pl("circle"),st(r,"cx","3"),st(r,"cy","3"),st(r,"r","2"),st(t,"class",n=""+(Ll(`hollow ${e[0]}`)+" svelte-1widvzq")),st(t,"viewBox","0 0 6 6"),st(t,"xmlns","http://www.w3.org/2000/svg"),br(t,"active",e[2])},m(i,a){Kr(i,t,a),ht(t,r)},p(i,a){a&1&&n!==(n=""+(Ll(`hollow ${i[0]}`)+" svelte-1widvzq"))&&st(t,"class",n),a&5&&br(t,"active",i[2])},d(i){i&&Br(t)}}}function BG(e){let t,r,n;return{c(){t=Pl("svg"),r=Pl("circle"),st(r,"cx","3"),st(r,"cy","3"),st(r,"r","2"),st(t,"class",n=""+(Ll(`dot filled ${e[0]}`)+" svelte-1widvzq")),st(t,"viewBox","0 0 6 6"),st(t,"xmlns","http://www.w3.org/2000/svg"),br(t,"active",e[2])},m(i,a){Kr(i,t,a),ht(t,r)},p(i,a){a&1&&n!==(n=""+(Ll(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&st(t,"class",n),a&5&&br(t,"active",i[2])},d(i){i&&Br(t)}}}function DG(e){let t;function r(a,s){return a[1]?BG:RG}let n=r(e),i=n(e);return{c(){i.c(),t=Nh()},m(a,s){i.m(a,s),Kr(a,t,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(t.parentNode,t)))},i:Vr,o:Vr,d(a){i.d(a),a&&Br(t)}}}function OG(e,t,r){let{className:n=""}=t,{isFilled:i}=t,{isActive:a}=t;return e.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var ny=class extends gs{constructor(t){super();document.getElementById("svelte-1widvzq-style")||NG(),_o(this,t,OG,DG,Xm,{className:0,isFilled:1,isActive:2})}},LG=e=>({}),e2=e=>({metadata:null}),PG=e=>({metadata:e&1}),t2=e=>({metadata:e[3]});function MG(e){let t,r=e[2].default,n=HA(r,e,e[1],e2);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),t=!0},p(i,a){n&&n.p&&a&2&&WA(n,r,i,i[1],a,LG,e2)},i(i){t||(Wt(n,i),t=!0)},o(i){ur(n,i),t=!1},d(i){n&&n.d(i)}}}function UG(e){let t,r,n,i={ctx:e,current:null,token:null,hasCatch:!1,pending:GG,then:qG,catch:FG,value:3,blocks:[,,,]};return JA(r=e[0],i),{c(){t=Nh(),i.block.c()},m(a,s){Kr(a,t,s),i.block.m(a,i.anchor=s),i.mount=()=>t.parentNode,i.anchor=t,n=!0},p(a,s){if(e=a,i.ctx=e,!(s&1&&r!==(r=e[0])&&JA(r,i))){let l=e.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Wt(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];ur(l)}n=!1},d(a){a&&Br(t),i.block.d(a),i.token=null,i=null}}}function FG(e){return{c:Vr,m:Vr,p:Vr,i:Vr,o:Vr,d:Vr}}function qG(e){let t,r=e[2].default,n=HA(r,e,e[1],t2);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),t=!0},p(i,a){n&&n.p&&a&3&&WA(n,r,i,i[1],a,PG,t2)},i(i){t||(Wt(n,i),t=!0)},o(i){ur(n,i),t=!1},d(i){n&&n.d(i)}}}function GG(e){return{c:Vr,m:Vr,p:Vr,i:Vr,o:Vr,d:Vr}}function VG(e){let t,r,n,i,a=[UG,MG],s=[];function l(c,f){return c[0]?0:1}return t=l(e),r=s[t]=a[t](e),{c(){r.c(),n=Nh()},m(c,f){s[t].m(c,f),Kr(c,n,f),i=!0},p(c,[f]){let d=t;t=l(c),t===d?s[t].p(c,f):(yo(),ur(s[d],1,1,()=>{s[d]=null}),vo(),r=s[t],r?r.p(c,f):(r=s[t]=a[t](c),r.c()),Wt(r,1),r.m(n.parentNode,n))},i(c){i||(Wt(r),i=!0)},o(c){ur(r),i=!1},d(c){s[t].d(c),c&&Br(n)}}}function KG(e,t,r){let{$$slots:n={},$$scope:i}=t,{metadata:a}=t;return e.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var iy=class extends gs{constructor(t){super();_o(this,t,KG,VG,Ih,{metadata:0})}};function jG(){return navigator.appVersion.indexOf("Mac")!==-1}function Ph(e){return jG()?e.metaKey:e.ctrlKey}function HG(...e){return window.moment.weekdaysShort(!0)}function r2(e){return e.isoWeekday()===6||e.isoWeekday()===7}function YG(e){return e[0].weekday(0)}function WG(e,...t){let r=window.moment().locale(),n=[],i,a=e.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let c=0;c<42;c++)c%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function zG(){var e=Gt("style");e.id="svelte-q3wqg9-style",e.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",ht(document.head,e)}function n2(e,t,r){let n=e.slice();return n[11]=t[r],n}function i2(e){let t,r,n=[e[11]],i={};for(let a=0;a<n.length;a+=1)i=gc(i,n[a]);return t=new ny({props:i}),{c(){Ra(t.$$.fragment)},m(a,s){ta(t,a,s),r=!0},p(a,s){let l=s&128?Oh(n,[ry(a[11])]):{};t.$set(l)},i(a){r||(Wt(t.$$.fragment,a),r=!0)},o(a){ur(t.$$.fragment,a),r=!1},d(a){ra(t,a)}}}function QG(e){let t,r=e[0].format("D")+"",n,i,a,s,l,c,f,d=e[7].dots,h=[];for(let _=0;_<d.length;_+=1)h[_]=i2(n2(e,d,_));let g=_=>ur(h[_],1,1,()=>{h[_]=null}),y=[{class:s=`day ${e[7].classes.join(" ")}`},e[7].dataAttributes||{}],m={};for(let _=0;_<y.length;_+=1)m=gc(m,y[_]);return{c(){t=Gt("div"),n=go(r),i=Vn(),a=Gt("div");for(let _=0;_<h.length;_+=1)h[_].c();st(a,"class","dot-container svelte-q3wqg9"),zA(t,m),br(t,"active",e[6]===Lh(e[0],"day")),br(t,"adjacent-month",!e[0].isSame(e[5],"month")),br(t,"today",e[0].isSame(e[4],"day")),br(t,"svelte-q3wqg9",!0)},m(_,w){Kr(_,t,w),ht(t,n),ht(t,i),ht(t,a);for(let E=0;E<h.length;E+=1)h[E].m(a,null);l=!0,c||(f=[Na(t,"click",function(){ea(e[2]&&e[8])&&(e[2]&&e[8]).apply(this,arguments)}),Na(t,"contextmenu",function(){ea(e[3]&&e[9])&&(e[3]&&e[9]).apply(this,arguments)}),Na(t,"pointerover",function(){ea(e[1]&&e[10])&&(e[1]&&e[10]).apply(this,arguments)})],c=!0)},p(_,w){if(e=_,(!l||w&1)&&r!==(r=e[0].format("D")+"")&&mc(n,r),w&128){d=e[7].dots;let E;for(E=0;E<d.length;E+=1){let S=n2(e,d,E);h[E]?(h[E].p(S,w),Wt(h[E],1)):(h[E]=i2(S),h[E].c(),Wt(h[E],1),h[E].m(a,null))}for(yo(),E=d.length;E<h.length;E+=1)g(E);vo()}zA(t,m=Oh(y,[(!l||w&128&&s!==(s=`day ${e[7].classes.join(" ")}`))&&{class:s},w&128&&(e[7].dataAttributes||{})])),br(t,"active",e[6]===Lh(e[0],"day")),br(t,"adjacent-month",!e[0].isSame(e[5],"month")),br(t,"today",e[0].isSame(e[4],"day")),br(t,"svelte-q3wqg9",!0)},i(_){if(!l){for(let w=0;w<d.length;w+=1)Wt(h[w]);l=!0}},o(_){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)ur(h[w]);l=!1},d(_){_&&Br(t),kh(h,_),c=!1,hs(f)}}}function XG(e){let t,r,n;return r=new iy({props:{metadata:e[7],$$slots:{default:[QG,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:e}}}),{c(){t=Gt("td"),Ra(r.$$.fragment)},m(i,a){Kr(i,t,a),ta(r,t,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Wt(r.$$.fragment,i),n=!0)},o(i){ur(r.$$.fragment,i),n=!1},d(i){i&&Br(t),ra(r)}}}function JG(e,t,r){let{date:n}=t,{metadata:i}=t,{onHover:a}=t,{onClick:s}=t,{onContextMenu:l}=t,{today:c}=t,{displayedMonth:f=null}=t,{selectedId:d=null}=t,h=m=>s(n,Ph(m)),g=m=>l(n,m),y=m=>a(n,m.target,Ph(m));return e.$$set=m=>{"date"in m&&r(0,n=m.date),"metadata"in m&&r(7,i=m.metadata),"onHover"in m&&r(1,a=m.onHover),"onClick"in m&&r(2,s=m.onClick),"onContextMenu"in m&&r(3,l=m.onContextMenu),"today"in m&&r(4,c=m.today),"displayedMonth"in m&&r(5,f=m.displayedMonth),"selectedId"in m&&r(6,d=m.selectedId)},[n,a,s,l,c,f,d,i,h,g,y]}var a2=class extends gs{constructor(t){super();document.getElementById("svelte-q3wqg9-style")||zG(),_o(this,t,JG,XG,Ih,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function ZG(){var e=Gt("style");e.id="svelte-156w7na-style",e.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",ht(document.head,e)}function $G(e){let t,r,n,i,a;return{c(){t=Gt("div"),r=Pl("svg"),n=Pl("path"),st(n,"fill","currentColor"),st(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),st(r,"focusable","false"),st(r,"role","img"),st(r,"xmlns","http://www.w3.org/2000/svg"),st(r,"viewBox","0 0 320 512"),st(r,"class","svelte-156w7na"),st(t,"class","arrow svelte-156w7na"),st(t,"aria-label",e[1]),br(t,"is-mobile",e[3]),br(t,"right",e[2]==="right")},m(s,l){Kr(s,t,l),ht(t,r),ht(r,n),i||(a=Na(t,"click",function(){ea(e[0])&&e[0].apply(this,arguments)}),i=!0)},p(s,[l]){e=s,l&2&&st(t,"aria-label",e[1]),l&4&&br(t,"right",e[2]==="right")},i:Vr,o:Vr,d(s){s&&Br(t),i=!1,a()}}}function e9(e,t,r){let{onClick:n}=t,{tooltip:i}=t,{direction:a}=t,s=window.app.isMobile;return e.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var ay=class extends gs{constructor(t){super();document.getElementById("svelte-156w7na-style")||ZG(),_o(this,t,e9,$G,Xm,{onClick:0,tooltip:1,direction:2})}};function t9(){var e=Gt("style");e.id="svelte-1vwr9dd-style",e.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",ht(document.head,e)}function r9(e){let t,r,n,i=e[0].format("MMM")+"",a,s,l,c=e[0].format("YYYY")+"",f,d,h,g,y,m,_,w,E,S,N;return g=new ay({props:{direction:"left",onClick:e[3],tooltip:"Previous Month"}}),w=new ay({props:{direction:"right",onClick:e[2],tooltip:"Next Month"}}),{c(){t=Gt("div"),r=Gt("h3"),n=Gt("span"),a=go(i),s=Vn(),l=Gt("span"),f=go(c),d=Vn(),h=Gt("div"),Ra(g.$$.fragment),y=Vn(),m=Gt("div"),m.textContent=`${e[4]}`,_=Vn(),Ra(w.$$.fragment),st(n,"class","month svelte-1vwr9dd"),st(l,"class","year svelte-1vwr9dd"),st(r,"class","title svelte-1vwr9dd"),st(m,"class","reset-button svelte-1vwr9dd"),st(h,"class","right-nav svelte-1vwr9dd"),st(t,"class","nav svelte-1vwr9dd"),br(t,"is-mobile",e[5])},m(R,D){Kr(R,t,D),ht(t,r),ht(r,n),ht(n,a),ht(r,s),ht(r,l),ht(l,f),ht(t,d),ht(t,h),ta(g,h,null),ht(h,y),ht(h,m),ht(h,_),ta(w,h,null),E=!0,S||(N=[Na(r,"click",function(){ea(e[1])&&e[1].apply(this,arguments)}),Na(m,"click",function(){ea(e[1])&&e[1].apply(this,arguments)})],S=!0)},p(R,[D]){e=R,(!E||D&1)&&i!==(i=e[0].format("MMM")+"")&&mc(a,i),(!E||D&1)&&c!==(c=e[0].format("YYYY")+"")&&mc(f,c);let O={};D&8&&(O.onClick=e[3]),g.$set(O);let te={};D&4&&(te.onClick=e[2]),w.$set(te)},i(R){E||(Wt(g.$$.fragment,R),Wt(w.$$.fragment,R),E=!0)},o(R){ur(g.$$.fragment,R),ur(w.$$.fragment,R),E=!1},d(R){R&&Br(t),ra(g),ra(w),S=!1,hs(N)}}}function n9(e,t,r){let{displayedMonth:n}=t,{today:i}=t,{resetDisplayedMonth:a}=t,{incrementDisplayedMonth:s}=t,{decrementDisplayedMonth:l}=t,c=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return e.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,c,f,i]}var s2=class extends gs{constructor(t){super();document.getElementById("svelte-1vwr9dd-style")||t9(),_o(this,t,n9,r9,Xm,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function i9(){var e=Gt("style");e.id="svelte-egt0yd-style",e.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",ht(document.head,e)}function o2(e,t,r){let n=e.slice();return n[11]=t[r],n}function l2(e){let t,r,n=[e[11]],i={};for(let a=0;a<n.length;a+=1)i=gc(i,n[a]);return t=new ny({props:i}),{c(){Ra(t.$$.fragment)},m(a,s){ta(t,a,s),r=!0},p(a,s){let l=s&64?Oh(n,[ry(a[11])]):{};t.$set(l)},i(a){r||(Wt(t.$$.fragment,a),r=!0)},o(a){ur(t.$$.fragment,a),r=!1},d(a){ra(t,a)}}}function a9(e){let t,r,n,i,a,s,l,c,f=e[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=l2(o2(e,f,g));let h=g=>ur(d[g],1,1,()=>{d[g]=null});return{c(){t=Gt("div"),r=go(e[0]),n=Vn(),i=Gt("div");for(let g=0;g<d.length;g+=1)d[g].c();st(i,"class","dot-container svelte-egt0yd"),st(t,"class",a=""+(Ll(`week-num ${e[6].classes.join(" ")}`)+" svelte-egt0yd")),br(t,"active",e[5]===Lh(e[1][0],"week"))},m(g,y){Kr(g,t,y),ht(t,r),ht(t,n),ht(t,i);for(let m=0;m<d.length;m+=1)d[m].m(i,null);s=!0,l||(c=[Na(t,"click",function(){ea(e[3]&&e[8])&&(e[3]&&e[8]).apply(this,arguments)}),Na(t,"contextmenu",function(){ea(e[4]&&e[9])&&(e[4]&&e[9]).apply(this,arguments)}),Na(t,"pointerover",function(){ea(e[2]&&e[10])&&(e[2]&&e[10]).apply(this,arguments)})],l=!0)},p(g,y){if(e=g,(!s||y&1)&&mc(r,e[0]),y&64){f=e[6].dots;let m;for(m=0;m<f.length;m+=1){let _=o2(e,f,m);d[m]?(d[m].p(_,y),Wt(d[m],1)):(d[m]=l2(_),d[m].c(),Wt(d[m],1),d[m].m(i,null))}for(yo(),m=f.length;m<d.length;m+=1)h(m);vo()}(!s||y&64&&a!==(a=""+(Ll(`week-num ${e[6].classes.join(" ")}`)+" svelte-egt0yd")))&&st(t,"class",a),y&98&&br(t,"active",e[5]===Lh(e[1][0],"week"))},i(g){if(!s){for(let y=0;y<f.length;y+=1)Wt(d[y]);s=!0}},o(g){d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)ur(d[y]);s=!1},d(g){g&&Br(t),kh(d,g),l=!1,hs(c)}}}function s9(e){let t,r,n;return r=new iy({props:{metadata:e[6],$$slots:{default:[a9,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:e}}}),{c(){t=Gt("td"),Ra(r.$$.fragment),st(t,"class","svelte-egt0yd")},m(i,a){Kr(i,t,a),ta(r,t,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Wt(r.$$.fragment,i),n=!0)},o(i){ur(r.$$.fragment,i),n=!1},d(i){i&&Br(t),ra(r)}}}function o9(e,t,r){let{weekNum:n}=t,{days:i}=t,{metadata:a}=t,{onHover:s}=t,{onClick:l}=t,{onContextMenu:c}=t,{selectedId:f=null}=t,d,h=m=>l(d,Ph(m)),g=m=>c(i[0],m),y=m=>s(d,m.target,Ph(m));return e.$$set=m=>{"weekNum"in m&&r(0,n=m.weekNum),"days"in m&&r(1,i=m.days),"metadata"in m&&r(6,a=m.metadata),"onHover"in m&&r(2,s=m.onHover),"onClick"in m&&r(3,l=m.onClick),"onContextMenu"in m&&r(4,c=m.onContextMenu),"selectedId"in m&&r(5,f=m.selectedId)},e.$$.update=()=>{e.$$.dirty&2&&r(7,d=YG(i))},[n,i,s,l,c,f,a,d,h,g,y]}var u2=class extends gs{constructor(t){super();document.getElementById("svelte-egt0yd-style")||i9(),_o(this,t,o9,s9,Ih,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function c2(e){return U(this,null,function*(){let t={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(e)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),t)})}function f2(e,t,...r){return c2(e.map(n=>n.getDailyMetadata(t)))}function d2(e,t,...r){return c2(e.map(n=>n.getWeeklyMetadata(t)))}function l9(){var e=Gt("style");e.id="svelte-pcimu8-style",e.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",ht(document.head,e)}function h2(e,t,r){let n=e.slice();return n[18]=t[r],n}function p2(e,t,r){let n=e.slice();return n[21]=t[r],n}function g2(e,t,r){let n=e.slice();return n[24]=t[r],n}function m2(e,t,r){let n=e.slice();return n[27]=t[r],n}function y2(e){let t;return{c(){t=Gt("col")},m(r,n){Kr(r,t,n)},d(r){r&&Br(t)}}}function v2(e){let t;return{c(){t=Gt("col"),st(t,"class","svelte-pcimu8"),br(t,"weekend",r2(e[27]))},m(r,n){Kr(r,t,n)},p(r,n){n&16384&&br(t,"weekend",r2(r[27]))},d(r){r&&Br(t)}}}function _2(e){let t;return{c(){t=Gt("th"),t.textContent="W",st(t,"class","svelte-pcimu8")},m(r,n){Kr(r,t,n)},d(r){r&&Br(t)}}}function w2(e){let t,r=e[24]+"",n;return{c(){t=Gt("th"),n=go(r),st(t,"class","svelte-pcimu8")},m(i,a){Kr(i,t,a),ht(t,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&mc(n,r)},d(i){i&&Br(t)}}}function E2(e){let t,r,n=[e[18],{metadata:d2(e[8],e[18].days[0],e[10])},{onClick:e[7]},{onContextMenu:e[5]},{onHover:e[3]},{selectedId:e[9]}],i={};for(let a=0;a<n.length;a+=1)i=gc(i,n[a]);return t=new u2({props:i}),{c(){Ra(t.$$.fragment)},m(a,s){ta(t,a,s),r=!0},p(a,s){let l=s&18344?Oh(n,[s&16384&&ry(a[18]),s&17664&&{metadata:d2(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};t.$set(l)},i(a){r||(Wt(t.$$.fragment,a),r=!0)},o(a){ur(t.$$.fragment,a),r=!1},d(a){ra(t,a)}}}function C2(e,t){let r,n,i;return n=new a2({props:{date:t[21],today:t[10],displayedMonth:t[0],onClick:t[6],onContextMenu:t[4],onHover:t[2],metadata:f2(t[8],t[21],t[10]),selectedId:t[9]}}),{key:e,first:null,c(){r=Nh(),Ra(n.$$.fragment),this.first=r},m(a,s){Kr(a,r,s),ta(n,a,s),i=!0},p(a,s){t=a;let l={};s&16384&&(l.date=t[21]),s&1024&&(l.today=t[10]),s&1&&(l.displayedMonth=t[0]),s&64&&(l.onClick=t[6]),s&16&&(l.onContextMenu=t[4]),s&4&&(l.onHover=t[2]),s&17664&&(l.metadata=f2(t[8],t[21],t[10])),s&512&&(l.selectedId=t[9]),n.$set(l)},i(a){i||(Wt(n.$$.fragment,a),i=!0)},o(a){ur(n.$$.fragment,a),i=!1},d(a){a&&Br(r),ra(n,a)}}}function b2(e,t){let r,n,i=[],a=new Map,s,l,c=t[1]&&E2(t),f=t[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=p2(t,f,h),y=d(g);a.set(y,i[h]=C2(y,g))}return{key:e,first:null,c(){r=Gt("tr"),c&&c.c(),n=Vn();for(let h=0;h<i.length;h+=1)i[h].c();s=Vn(),this.first=r},m(h,g){Kr(h,r,g),c&&c.m(r,null),ht(r,n);for(let y=0;y<i.length;y+=1)i[y].m(r,null);ht(r,s),l=!0},p(h,g){t=h,t[1]?c?(c.p(t,g),g&2&&Wt(c,1)):(c=E2(t),c.c(),Wt(c,1),c.m(r,n)):c&&(yo(),ur(c,1,1,()=>{c=null}),vo()),g&18261&&(f=t[18].days,yo(),i=$A(i,g,d,1,t,f,a,r,ZA,C2,s,p2),vo())},i(h){if(!l){Wt(c);for(let g=0;g<f.length;g+=1)Wt(i[g]);l=!0}},o(h){ur(c);for(let g=0;g<i.length;g+=1)ur(i[g]);l=!1},d(h){h&&Br(r),c&&c.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function u9(e){let t,r,n,i,a,s,l,c,f,d,h,g,y=[],m=new Map,_;r=new s2({props:{today:e[10],displayedMonth:e[0],incrementDisplayedMonth:e[11],decrementDisplayedMonth:e[12],resetDisplayedMonth:e[13]}});let w=e[1]&&y2(),E=e[14][1].days,S=[];for(let V=0;V<E.length;V+=1)S[V]=v2(m2(e,E,V));let N=e[1]&&_2(),R=e[15],D=[];for(let V=0;V<R.length;V+=1)D[V]=w2(g2(e,R,V));let O=e[14],te=V=>V[18].weekNum;for(let V=0;V<O.length;V+=1){let M=h2(e,O,V),le=te(M);m.set(le,y[V]=b2(le,M))}return{c(){t=Gt("div"),Ra(r.$$.fragment),n=Vn(),i=Gt("table"),a=Gt("colgroup"),w&&w.c(),s=Vn();for(let V=0;V<S.length;V+=1)S[V].c();l=Vn(),c=Gt("thead"),f=Gt("tr"),N&&N.c(),d=Vn();for(let V=0;V<D.length;V+=1)D[V].c();h=Vn(),g=Gt("tbody");for(let V=0;V<y.length;V+=1)y[V].c();st(i,"class","calendar svelte-pcimu8"),st(t,"id","calendar-container"),st(t,"class","container svelte-pcimu8"),br(t,"is-mobile",e[16])},m(V,M){Kr(V,t,M),ta(r,t,null),ht(t,n),ht(t,i),ht(i,a),w&&w.m(a,null),ht(a,s);for(let le=0;le<S.length;le+=1)S[le].m(a,null);ht(i,l),ht(i,c),ht(c,f),N&&N.m(f,null),ht(f,d);for(let le=0;le<D.length;le+=1)D[le].m(f,null);ht(i,h),ht(i,g);for(let le=0;le<y.length;le+=1)y[le].m(g,null);_=!0},p(V,[M]){let le={};if(M&1024&&(le.today=V[10]),M&1&&(le.displayedMonth=V[0]),r.$set(le),V[1]?w||(w=y2(),w.c(),w.m(a,s)):w&&(w.d(1),w=null),M&16384){E=V[14][1].days;let se;for(se=0;se<E.length;se+=1){let _e=m2(V,E,se);S[se]?S[se].p(_e,M):(S[se]=v2(_e),S[se].c(),S[se].m(a,null))}for(;se<S.length;se+=1)S[se].d(1);S.length=E.length}if(V[1]?N||(N=_2(),N.c(),N.m(f,d)):N&&(N.d(1),N=null),M&32768){R=V[15];let se;for(se=0;se<R.length;se+=1){let _e=g2(V,R,se);D[se]?D[se].p(_e,M):(D[se]=w2(_e),D[se].c(),D[se].m(f,null))}for(;se<D.length;se+=1)D[se].d(1);D.length=R.length}M&18431&&(O=V[14],yo(),y=$A(y,M,te,1,V,O,m,g,ZA,b2,null,h2),vo())},i(V){if(!_){Wt(r.$$.fragment,V);for(let M=0;M<O.length;M+=1)Wt(y[M]);_=!0}},o(V){ur(r.$$.fragment,V);for(let M=0;M<y.length;M+=1)ur(y[M]);_=!1},d(V){V&&Br(t),ra(r),w&&w.d(),kh(S,V),N&&N.d(),kh(D,V);for(let M=0;M<y.length;M+=1)y[M].d()}}}function c9(e,t,r){let{localeData:n}=t,{showWeekNums:i=!1}=t,{onHoverDay:a}=t,{onHoverWeek:s}=t,{onContextMenuDay:l}=t,{onContextMenuWeek:c}=t,{onClickDay:f}=t,{onClickWeek:d}=t,{sources:h=[]}=t,{selectedId:g}=t,{today:y=window.moment()}=t,{displayedMonth:m=y}=t,_,w,E=window.app.isMobile;function S(){r(0,m=m.clone().add(1,"month"))}function N(){r(0,m=m.clone().subtract(1,"month"))}function R(){r(0,m=y.clone())}return e.$$set=D=>{"localeData"in D&&r(17,n=D.localeData),"showWeekNums"in D&&r(1,i=D.showWeekNums),"onHoverDay"in D&&r(2,a=D.onHoverDay),"onHoverWeek"in D&&r(3,s=D.onHoverWeek),"onContextMenuDay"in D&&r(4,l=D.onContextMenuDay),"onContextMenuWeek"in D&&r(5,c=D.onContextMenuWeek),"onClickDay"in D&&r(6,f=D.onClickDay),"onClickWeek"in D&&r(7,d=D.onClickWeek),"sources"in D&&r(8,h=D.sources),"selectedId"in D&&r(9,g=D.selectedId),"today"in D&&r(10,y=D.today),"displayedMonth"in D&&r(0,m=D.displayedMonth)},e.$$.update=()=>{e.$$.dirty&131073&&r(14,_=WG(m,n)),e.$$.dirty&132096&&r(15,w=HG(y,n))},[m,i,a,s,l,c,f,d,h,g,y,S,N,R,_,w,E,n]}var Mh=class extends gs{constructor(t){super();document.getElementById("svelte-pcimu8-style")||l9(),_o(this,t,c9,u9,Ih,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var Uh=ut(to());function f9(e){let t,r,n,i=`${e[1]}px`,a=`${e[2]}px`,s,l=[p9,h9],c=[];function f(d,h){return d[3]?0:1}return r=f(e,-1),n=c[r]=l[r](e),{c(){t=ae("div"),n.c(),ee(t,"class","calendarContainer"),Je(t,"width",i,!1),Je(t,"height",a,!1)},m(d,h){xe(d,t,h),c[r].m(t,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?c[r].p(d,h):(sh(),Ni(c[g],1,1,()=>{c[g]=null}),oh(),n=c[r],n?n.p(d,h):(n=c[r]=l[r](d),n.c()),ci(n,1),n.m(t,null)),h&2&&i!==(i=`${d[1]}px`)&&Je(t,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&Je(t,"height",a,!1)},i(d){s||(ci(n),s=!0)},o(d){Ni(n),s=!1},d(d){d&&be(t),c[r].d()}}}function d9(e){let t,r,n,i,a=[m9,g9],s=[];function l(c,f){return c[3]?0:1}return r=l(e,-1),n=s[r]=a[r](e),{c(){t=ae("div"),n.c(),ee(t,"class","calendarContainer")},m(c,f){xe(c,t,f),s[r].m(t,null),i=!0},p(c,f){let d=r;r=l(c,f),r===d?s[r].p(c,f):(sh(),Ni(s[d],1,1,()=>{s[d]=null}),oh(),n=s[r],n?n.p(c,f):(n=s[r]=a[r](c),n.c()),ci(n,1),n.m(t,null))},i(c){i||(ci(n),i=!0)},o(c){Ni(n),i=!1},d(c){c&&be(t),s[r].d()}}}function h9(e){let t,r,n,i,a,s;function l(h){e[15](h)}function c(h){e[16](h)}function f(h){e[17](h)}let d={showWeekNums:!1,onClickDay:e[7]};return e[4]!==void 0&&(d.sources=e[4]),e[0]!==void 0&&(d.displayedMonth=e[0]),e[5]!==void 0&&(d.today=e[5]),r=new Mh({props:d}),kn.push(()=>Aa(r,"sources",l)),kn.push(()=>Aa(r,"displayedMonth",c)),kn.push(()=>Aa(r,"today",f)),{c(){t=ae("div"),Ju(r.$$.fragment),Je(t,"--theme-color",e[6].settings.dailyNoteDotColor)},m(h,g){xe(h,t,g),Sl(r,t,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],Ta(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],Ta(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],Ta(()=>a=!1)),r.$set(y),(!s||g&64)&&Je(t,"--theme-color",h[6].settings.dailyNoteDotColor)},i(h){s||(ci(r.$$.fragment,h),s=!0)},o(h){Ni(r.$$.fragment,h),s=!1},d(h){h&&be(t),ao(r)}}}function p9(e){let t;return{c(){t=ae("p"),t.textContent="Loading..."},m(r,n){xe(r,t,n)},p:St,i:St,o:St,d(r){r&&be(t)}}}function g9(e){let t,r,n,i,a,s;function l(h){e[12](h)}function c(h){e[13](h)}function f(h){e[14](h)}let d={showWeekNums:!1,onClickDay:e[7]};return e[4]!==void 0&&(d.sources=e[4]),e[0]!==void 0&&(d.displayedMonth=e[0]),e[5]!==void 0&&(d.today=e[5]),r=new Mh({props:d}),kn.push(()=>Aa(r,"sources",l)),kn.push(()=>Aa(r,"displayedMonth",c)),kn.push(()=>Aa(r,"today",f)),{c(){t=ae("div"),Ju(r.$$.fragment),Je(t,"--daily-dot-color",e[6].settings.dailyNoteDotColor)},m(h,g){xe(h,t,g),Sl(r,t,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],Ta(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],Ta(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],Ta(()=>a=!1)),r.$set(y),(!s||g&64)&&Je(t,"--daily-dot-color",h[6].settings.dailyNoteDotColor)},i(h){s||(ci(r.$$.fragment,h),s=!0)},o(h){Ni(r.$$.fragment,h),s=!1},d(h){h&&be(t),ao(r)}}}function m9(e){let t;return{c(){t=ae("p"),t.textContent="Loading..."},m(r,n){xe(r,t,n)},p:St,i:St,o:St,d(r){r&&be(t)}}}function y9(e){let t,r,n,i,a=[d9,f9],s=[];function l(c,f){return c[1]==0||c[2]==0?0:1}return t=l(e,-1),r=s[t]=a[t](e),{c(){r.c(),n=li()},m(c,f){s[t].m(c,f),xe(c,n,f),i=!0},p(c,[f]){let d=t;t=l(c,f),t===d?s[t].p(c,f):(sh(),Ni(s[d],1,1,()=>{s[d]=null}),oh(),r=s[t],r?r.p(c,f):(r=s[t]=a[t](c),r.c()),ci(r,1),r.m(n.parentNode,n))},i(c){i||(ci(r),i=!0)},o(c){Ni(r),i=!1},d(c){s[t].d(c),c&&be(n)}}}function v9(e,t,r){let{displayedMonth:n=window.moment()}=t,{width:i=0}=t,{height:a=0}=t,{include:s}=t,{exclude:l}=t,c=Ch(),f,d,h,g=!0,y,m=window.moment(),_=xt.getInstance();function w(M){return Er(this,void 0,void 0,function*(){r(6,_);let le=M.clone().startOf("month").subtract(6,"days"),se=M.clone().endOf("month").add(12,"days"),_e=yield lr({startDate:le,endDate:se,include:s,exclude:l});if(Uh.default.isEqual(_e,h)&&Uh.default.isEqual(c,Ch()))return;c=Ch();let Oe=Uh.default.groupBy(_e,Se=>{var Ee;return window.moment((Ee=Se.start.date)!==null&&Ee!==void 0?Ee:Se.start.dateTime).startOf("day").format()});h=_e;let Ne={getDailyMetadata:Se=>Er(this,void 0,void 0,function*(){let Ee=[];_.settings.activateDailyNoteAddon&&hc(Se)&&(Ee=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let ve=Oe[Se.startOf("day").format()];return ve?(Ee=[...Ee,...Array(ve.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:ve.length+""},dots:Ee}):{dataAttributes:{amount:Ee.length+""},dots:Ee}})};r(3,g=!1),r(4,y=null),r(4,y=[Ne])})}let E=(M,le)=>M.filter(se=>se.start.date?window.moment(se.start.date).isSame(le,"day"):window.moment(se.start.dateTime).isSame(le,"day")),S=(M,le)=>{new Bi(E(h,M),"details",M,!1,()=>{ki(),r(0,n)}).open()};no(()=>{clearInterval(f),clearInterval(d)});function N(M){y=M,r(4,y)}function R(M){n=M,r(0,n)}function D(M){m=M,r(5,m),r(10,f),r(0,n),r(11,d)}function O(M){y=M,r(4,y)}function te(M){n=M,r(0,n)}function V(M){m=M,r(5,m),r(10,f),r(0,n),r(11,d)}return e.$$set=M=>{"displayedMonth"in M&&r(0,n=M.displayedMonth),"width"in M&&r(1,i=M.width),"height"in M&&r(2,a=M.height),"include"in M&&r(8,s=M.include),"exclude"in M&&r(9,l=M.exclude)},e.$$.update=()=>{if(e.$$.dirty&3073){e:f&&clearInterval(f),r(10,f=setInterval(()=>w(n),1e3)),d&&clearInterval(d),r(11,d=setInterval(()=>r(5,m=window.moment()),6e4)),w(n)}},[n,i,a,g,y,m,_,S,s,l,f,d,N,R,D,O,te,V]}var x2=class extends yn{constructor(t){super();Nn(this,t,v9,y9,In,{displayedMonth:0,width:1,height:2,include:8,exclude:9})}},Fh=x2;function _9(e){oi(e,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function S2(e,t,r){let n=e.slice();return n[15]=t[r][0],n[1]=t[r][1],n}function T2(e,t,r){let n=e.slice();return n[18]=t[r],n}function w9(e){let t,r=[...e[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=I2(S2(e,r,i));return{c(){t=ae("div");for(let i=0;i<n.length;i+=1)n[i].c();ee(t,"class","scheduleContent svelte-1f1t9un")},m(i,a){xe(i,t,a);for(let s=0;s<n.length;s+=1)n[s].m(t,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=S2(i,r,s);n[s]?n[s].p(l,a):(n[s]=I2(l),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&be(t),tn(n,i)}}}function E9(e){let t;return{c(){t=ae("span"),t.textContent="LOADING"},m(r,n){xe(r,t,n)},p:St,d(r){r&&be(t)}}}function A2(e){let t,r,n,i,a,s,l,c,f=e[3](e[18])+"",d,h,g,y,m=e[18].summary+"",_,w,E,S;function N(...R){return e[13](e[18],...R)}return{c(){t=ae("div"),r=ae("div"),n=ae("div"),i=ae("div"),s=De(),l=ae("div"),c=ae("span"),d=er(f),h=De(),g=ae("div"),y=ae("span"),_=er(m),w=De(),ee(i,"class","circle svelte-1f1t9un"),Je(i,"background",Lu(e[18]),!1),ee(n,"class",a=""+(bl(e[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),ee(l,"class","timeContainer svelte-1f1t9un"),ee(r,"class","circleTime svelte-1f1t9un"),ee(g,"class","eventTitleContainer svelte-1f1t9un"),ee(t,"class","dayEvent svelte-1f1t9un")},m(R,D){xe(R,t,D),re(t,r),re(r,n),re(n,i),re(r,s),re(r,l),re(l,c),re(c,d),re(t,h),re(t,g),re(g,y),re(y,_),re(t,w),E||(S=Xe(t,"click",N),E=!0)},p(R,D){e=R},d(R){R&&be(t),E=!1,S()}}}function I2(e){let t,r,n,i,a=e[15].slice(0,2)+"",s,l,c,f,d=e[15].slice(2)+"",h,g,y,m,_,w;function E(){return e[12](e[1])}let S=e[1],N=[];for(let R=0;R<S.length;R+=1)N[R]=A2(T2(e,S,R));return{c(){t=ae("div"),r=ae("div"),n=ae("div"),i=ae("span"),s=er(a),c=De(),f=ae("span"),h=er(d),g=De(),y=ae("div");for(let R=0;R<N.length;R+=1)N[R].c();m=De(),ee(n,"class",l=""+(bl(e[6](e[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),ee(f,"class","dayText svelte-1f1t9un"),ee(r,"class","dateDisplay svelte-1f1t9un"),ee(y,"class","dayEvents svelte-1f1t9un"),ee(t,"class","dayContainer svelte-1f1t9un")},m(R,D){xe(R,t,D),re(t,r),re(r,n),re(n,i),re(i,s),re(r,c),re(r,f),re(f,h),re(t,g),re(t,y);for(let O=0;O<N.length;O+=1)N[O].m(y,null);re(t,m),_||(w=Xe(n,"click",E),_=!0)},p(R,D){if(e=R,D&28){S=e[1];let O;for(O=0;O<S.length;O+=1){let te=T2(e,S,O);N[O]?N[O].p(te,D):(N[O]=A2(te),N[O].c(),N[O].m(y,null))}for(;O<N.length;O+=1)N[O].d(1);N.length=S.length}},d(R){R&&be(t),tn(N,R),_=!1,w()}}}function C9(e){let t;function r(a,s){return a[0]?E9:w9}let n=r(e,-1),i=n(e);return{c(){t=ae("div"),i.c(),ee(t,"class","scheduleContainer svelte-1f1t9un")},m(a,s){xe(a,t,s),i.m(t,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(t,null)))},i:St,o:St,d(a){a&&be(t),i.d()}}}function b9(e,t,r){let{timeSpan:n=7}=t,{date:i=window.moment()}=t,{include:a}=t,{exclude:s}=t,l,c=new Map,f=!1,d=[],h=()=>Er(void 0,void 0,void 0,function*(){let S=yield lr({startDate:i,endDate:i.clone().add(n,"day"),include:a,exclude:s});if(JSON.stringify(S)==JSON.stringify(d)){r(0,f=!1);return}c.clear(),r(1,d=S),d.forEach(N=>{let R=N.start.date?window.moment(N.start.date).format("DD MMM, ddd"):window.moment(N.start.dateTime).format("DD MMM, ddd");c.has(R)?c.get(R).push(N):c.set(R,[N])}),r(0,f=!1)}),g=S=>{if(S.start.date)return"All day";{let N=window.moment(S.start.dateTime).format("hh:mma"),R=window.moment(S.end.dateTime).format("hh:mma");return`${N}-${R}`}},y=(S,N)=>{N.shiftKey?window.open(S.htmlLink):new hi(S,()=>{ki(),r(7,i),r(11,l)}).open()},m=S=>Er(void 0,void 0,void 0,function*(){let N=window.moment(S.start.date||S.start.dateTime),R=yield lr({startDate:N});new Bi(R,"details",N,!1,()=>{ki(),r(7,i),r(11,l)}).open()}),_=S=>{let N=window.moment(S.start.date||S.start.dateTime);return window.moment().local().isSame(N,"day")};no(()=>{clearInterval(l)});let w=S=>m(S[0]),E=(S,N)=>y(S,N);return e.$$set=S=>{"timeSpan"in S&&r(8,n=S.timeSpan),"date"in S&&r(7,i=S.date),"include"in S&&r(9,a=S.include),"exclude"in S&&r(10,s=S.exclude)},e.$$.update=()=>{if(e.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,c,g,y,m,_,i,n,a,s,l,w,E]}var k2=class extends yn{constructor(t){super();Nn(this,t,b9,C9,In,{timeSpan:8,date:7,include:9,exclude:10},_9)}},qh=k2;var N2=ut(require("obsidian")),Ml=class extends N2.MarkdownRenderChild{constructor(t,r,n){super(r);this.a=t,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function R2(e,t,r){return U(this,null,function*(){let{type:n,height:i,width:a,date:s,navigation:l,timespan:c,exclude:f,include:d,theme:h}=(0,Gh.parseYaml)(e);n||(n=fs.day);let g=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,g,!0).isValid()){let y;s==null?y=void 0:s=="today"?y=window.moment():s=="tomorrow"?y=window.moment().add(1,"day"):s=="yesterday"?y=window.moment().subtract(1,"day"):y=window.moment(s),t.style.padding="10px",n==fs.web?Gh.Platform.isDesktopApp&&r.addChild(new Ml(Ah,t,{height:i!=null?i:500,width:a!=null?a:500,date:y,theme:h!=null?h:"auto"})):n==fs.day?r.addChild(new Ml(Th,t,{height:i,width:a,date:y,navigation:l,include:d,exclude:f})):n==fs.month?r.addChild(new Ml(Fh,t,{height:i,width:a,displayedMonth:y,include:d,exclude:f})):n==fs.schedule&&r.addChild(new Ml(qh,t,{timeSpan:c,date:y,include:d,exclude:f}))}})}var B2=ut(require("obsidian"));var vc="google-calendar-view-day",sy=class extends B2.ItemView{constructor(t){super(t)}getViewType(){return vc}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return U(this,null,function*(){this.timeline=new Th({target:this.contentEl,props:{navigation:!0}})})}onClose(){return U(this,null,function*(){this.timeline.$destroy()})}};var D2=ut(require("obsidian"));var _c="google-calendar-view-month",oy=class extends D2.ItemView{constructor(t){super(t)}getViewType(){return _c}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return U(this,null,function*(){this.calendar=new Fh({target:this.contentEl,props:{}})})}onClose(){return U(this,null,function*(){this.calendar.$destroy()})}};var O2=ut(require("obsidian"));var wc="google-calendar-view-web",ly=class extends O2.ItemView{constructor(t){super(t)}getViewType(){return wc}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return U(this,null,function*(){this.calendar=new Ah({target:this.contentEl})})}onClose(){return U(this,null,function*(){this.calendar.$destroy()})}};var L2=ut(require("obsidian"));var Ec="google-calendar-view-schedule",uy=class extends L2.ItemView{constructor(t){super(t)}getViewType(){return Ec}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return U(this,null,function*(){this.calendar=new qh({target:this.contentEl,props:{}})})}onClose(){return U(this,null,function*(){this.calendar.$destroy()})}};var P2=ut(require("obsidian")),cy=class extends P2.FuzzySuggestModal{constructor(t,r,n,i,a){super(xt.getInstance().app);this.eventList=t,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(t){return`${t.summary}	`}onChooseItem(t){return U(this,null,function*(){let r=`[${t.summary}](${t.htmlLink}&cal=${t.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function M2(e){Cc("@today",e)||Cc("@tomorrow",e)||Cc("@yesterday",e)||Cc("@REGEX",e)||Cc("@YYYY-MM-DD",e)}function Cc(e,t){var s;let r=t.getCursor(),n=t.getCursor(),i="",a=window.moment();if(e==="@REGEX"){let l=t.getLine(r.line);if(l.length>50)return!1;let c=(s=l.match(/.*@([+,-])(\d+) /))!=null?s:[];if(c.length!=3||t.getCursor().ch!=c.index+c[0].length)return!1;if(n=un(en({},r),{ch:r.ch-c[1].length-c[2].length-1}),n.ch<0)return;i=t.getRange(n,r),c[1]=="+"?a=window.moment().add(c[2],"day"):a=window.moment().subtract(c[2],"day")}else if(e==="@YYYY-MM-DD"){if(n=un(en({},r),{ch:r.ch-e.length}),i=t.getRange(n,r),i.length!="@YYYY-MM-DD".length||!i.startsWith("@")||i.substring(1).length>100)return!1;let l=window.moment(i.substring(1));if(l.isValid())a=l;else return!1}else{if(n=un(en({},r),{ch:r.ch-e.length}),n.ch<0||t.getRange(n,r)!=e)return!1;switch(e){case"@today":a=window.moment();break;case"@tomorrow":a=window.moment().add(1,"day");break;case"@yesterday":a=window.moment().add(-1,"day");break;default:return!1}}return lr({startDate:a}).then(l=>{new cy(l,t,n,r,i).open()}),!0}var U2=ut(require("obsidian"));function Vh(e,t){return U(this,null,function*(){if(!Yt())return null;let r=yield(0,U2.requestUrl)({url:`https://www.googleapis.com/calendar/v3/calendars/${t}/events/${e}`,headers:{Authorization:"Bearer "+(yield An())}});return r.status!==200?(dr("Could not get Google Event"),null):yield r.json})}var F2=ut(to());function x9(e){return U(this,null,function*(){let t=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=t.exec(e),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>U(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield Vh(s,a[2])}}))):[]})}function q2(e){return U(this,null,function*(){let t=e.getCursor(),r=e.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield x9(r);!s.length||a.forEach(l=>U(this,null,function*(){let c=l[1]?parseInt(l[1]):0,f=e.getCursor();if(f.ch-=3,e.getRange(f,e.getCursor())!="}} ")return!1;let d=F2.default.get(s[c],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),e.setValue(r),t.ch+=d.length-l[0].length,e.setCursor(t)}))})}var G2=ut(require("obsidian"));var Ul=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var fy=class extends G2.EditorSuggest{constructor(t){super(t)}onTrigger(t,r){let i=r.getLine(t.line).substring(0,t.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:t,start:{ch:i.index+a,line:t.line},query:i[2]}}}getSuggestions(t){return Ul.filter(r=>t.query===r.substring(0,t.query.length))}renderSuggestion(t,r){r.createEl("span",{text:t,cls:"suggestionText"})}selectSuggestion(t){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(t,this.context.start,this.context.end),Ul.filter(i=>i.startsWith(`${t}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var rI=ut(require("obsidian"));var bc=ut(require("obsidian")),dy=class extends bc.Modal{constructor(t,r){super(t);this.onSubmit=r}onOpen(){let{contentEl:t}=this;t.createEl("h1",{text:"Enter a name for the template"}),new bc.Setting(t).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new bc.Setting(t).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:t}=this;t.empty()}};function S9(e){oi(e,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function V2(e,t,r){let n=e.slice();return n[21]=t[r],n}function K2(e,t,r){let n=e.slice();return n[21]=t[r],n}function j2(e,t,r){let n=e.slice();return n[26]=t[r],n[27]=t,n[28]=r,n}function H2(e,t,r){let n=e.slice();return n[29]=t[r],n[30]=t,n[31]=r,n}function Y2(e,t,r){let n=e.slice();return n[32]=t[r],n}function W2(e){let t,r=e[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=z2(Y2(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=li()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,t,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=Y2(i,r,s);n[s]?n[s].p(l,a):(n[s]=z2(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){tn(n,i),i&&be(t)}}}function z2(e){let t,r=e[32].name+"",n,i;return{c(){t=ae("option"),n=er(r),t.__value=i=e[32].name,t.value=t.__value},m(a,s){xe(a,t,s),re(t,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&ui(n,r),s[0]&1&&i!==(i=a[32].name)&&(t.__value=i,t.value=t.__value)},d(a){a&&be(t)}}}function T9(e){let t;return{c(){t=ae("span"),t.textContent="Loading..."},m(r,n){xe(r,t,n)},p:St,d(r){r&&be(t)}}}function A9(e){let t,r=e[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=Q2(H2(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=li()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,t,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=H2(i,r,s);n[s]?n[s].p(l,a):(n[s]=Q2(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){tn(n,i),i&&be(t)}}}function Q2(e){let t,r,n=e[29][0].summary+"",i,a,s,l,c,f,d,h;function g(){e[17].call(l,e[30],e[31])}return{c(){t=ae("div"),r=ae("label"),i=er(n),s=De(),l=ae("input"),f=De(),ee(r,"for",a=e[29][0].id),ee(l,"type","checkbox"),ee(l,"id",c=e[29][0].id),ee(t,"class","optionItem svelte-6isfqn")},m(y,m){xe(y,t,m),re(t,r),re(r,i),re(t,s),re(t,l),l.checked=e[29][1],re(t,f),d||(h=[Xe(l,"change",g),Xe(l,"change",e[7])],d=!0)},p(y,m){e=y,m[0]&16&&n!==(n=e[29][0].summary+"")&&ui(i,n),m[0]&16&&a!==(a=e[29][0].id)&&ee(r,"for",a),m[0]&16&&c!==(c=e[29][0].id)&&ee(l,"id",c),m[0]&16&&(l.checked=e[29][1])},d(y){y&&be(t),d=!1,Qr(h)}}}function I9(e){let t;return{c(){t=ae("span"),t.textContent="Loading..."},m(r,n){xe(r,t,n)},p:St,d(r){r&&be(t)}}}function k9(e){let t,r=e[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=X2(j2(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=li()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,t,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=j2(i,r,s);n[s]?n[s].p(l,a):(n[s]=X2(l),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){tn(n,i),i&&be(t)}}}function X2(e){let t,r,n=e[26][0].summary+"",i,a,s,l,c,f,d,h;function g(){e[18].call(l,e[27],e[28])}return{c(){t=ae("div"),r=ae("label"),i=er(n),s=De(),l=ae("input"),f=De(),ee(r,"for",a=e[26][0].id),ee(l,"type","checkbox"),ee(l,"id",c=e[26][0].id),ee(t,"class","optionItem svelte-6isfqn")},m(y,m){xe(y,t,m),re(t,r),re(r,i),re(t,s),re(t,l),l.checked=e[26][1],re(t,f),d||(h=Xe(l,"change",g),d=!0)},p(y,m){e=y,m[0]&8&&n!==(n=e[26][0].summary+"")&&ui(i,n),m[0]&8&&a!==(a=e[26][0].id)&&ee(r,"for",a),m[0]&8&&c!==(c=e[26][0].id)&&ee(l,"id",c),m[0]&8&&(l.checked=e[26][1])},d(y){y&&be(t),d=!1,h()}}}function J2(e){let t,r,n,i,a,s,l,c=Ul,f=[];for(let g=0;g<c.length;g+=1)f[g]=Z2(K2(e,c,g));let d=e[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=$2(V2(e,d,g));return{c(){t=ae("h4"),t.textContent="Table structure",r=De(),n=ae("select");for(let g=0;g<f.length;g+=1)f[g].c();i=De(),a=ae("div");for(let g=0;g<h.length;g+=1)h[g].c();ee(n,"name","tableOptions"),ee(n,"class","dropdown"),ee(a,"class","optionList svelte-6isfqn")},m(g,y){xe(g,t,y),xe(g,r,y),xe(g,n,y);for(let m=0;m<f.length;m+=1)f[m].m(n,null);xe(g,i,y),xe(g,a,y);for(let m=0;m<h.length;m+=1)h[m].m(a,null);s||(l=Xe(n,"change",e[8]),s=!0)},p(g,y){if(y&0){c=Ul;let m;for(m=0;m<c.length;m+=1){let _=K2(g,c,m);f[m]?f[m].p(_,y):(f[m]=Z2(_),f[m].c(),f[m].m(n,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=c.length}if(y[0]&544){d=g[5];let m;for(m=0;m<d.length;m+=1){let _=V2(g,d,m);h[m]?h[m].p(_,y):(h[m]=$2(_),h[m].c(),h[m].m(a,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=d.length}},d(g){g&&be(t),g&&be(r),g&&be(n),tn(f,g),g&&be(i),g&&be(a),tn(h,g),s=!1,l()}}}function Z2(e){let t,r=e[21]+"",n,i;return{c(){t=ae("option"),n=er(r),t.__value=i=e[21],t.value=t.__value},m(a,s){xe(a,t,s),re(t,n)},p:St,d(a){a&&be(t)}}}function $2(e){let t,r,n=e[21]+"",i,a,s,l,c,f,d;function h(){return e[19](e[21])}return{c(){t=ae("div"),r=ae("span"),i=er(n),a=De(),s=ae("input"),c=De(),ee(s,"type","checkbox"),ee(s,"id",l=e[21]),s.checked=!0,ee(t,"class","optionItem svelte-6isfqn")},m(g,y){xe(g,t,y),re(t,r),re(r,i),re(t,a),re(t,s),re(t,c),f||(d=Xe(s,"click",h),f=!0)},p(g,y){e=g,y[0]&32&&n!==(n=e[21]+"")&&ui(i,n),y[0]&32&&l!==(l=e[21])&&ee(s,"id",l)},d(g){g&&be(t),f=!1,d()}}}function N9(e){let t,r,n,i,a,s,l,c,f,d,h,g,y,m,_,w,E,S,N,R,D,O,te,V,M,le,se,_e,Oe,Ne,Se,Ee,ve,ze,Ve,vt,pt,Qe=e[0].settings.insertTemplates.length&&W2(e);function fe(B,L){return B[4]?A9:T9}let gt=fe(e,[-1,-1]),tt=gt(e);function _t(B,L){return B[3]?k9:I9}let Ze=_t(e,[-1,-1]),Ce=Ze(e),A=e[2]=="table"&&J2(e);return{c(){t=ae("div"),r=ae("div"),n=ae("select"),i=ae("option"),i.textContent="None",Qe&&Qe.c(),a=De(),s=ae("h1"),s.textContent="Insert Options",l=De(),c=ae("button"),c.textContent="Save as template",f=De(),d=ae("hr"),h=De(),g=ae("div"),y=ae("div"),m=ae("label"),m.textContent="Insert type",_=De(),w=ae("select"),E=ae("option"),E.textContent="Bullet",S=ae("option"),S.textContent="Table",N=De(),R=ae("div"),D=ae("label"),D.textContent="Insert date",O=De(),te=ae("input"),M=De(),le=ae("h4"),le.textContent="Calendars",se=De(),_e=ae("div"),tt.c(),Oe=De(),Ne=ae("h4"),Ne.textContent="Events",Se=De(),Ee=ae("div"),Ce.c(),ve=De(),A&&A.c(),ze=De(),Ve=ae("button"),Ve.textContent="Insert",i.__value="None",i.value=i.__value,ee(n,"class","dropdown left"),e[1]===void 0&&Sa(()=>e[15].call(n)),ee(s,"class","center svelte-6isfqn"),ee(c,"class","right svelte-6isfqn"),ee(r,"class","header svelte-6isfqn"),ee(m,"for","insertType"),ee(E,"default",""),E.__value="bullet",E.value=E.__value,S.__value="table",S.value=S.__value,ee(w,"class","dropdown"),e[2]===void 0&&Sa(()=>e[16].call(w)),ee(y,"class","input svelte-6isfqn"),ee(D,"for","date"),ee(te,"type","date"),ee(te,"name","date"),ee(te,"id","date"),te.value=V=window.moment().format("YYYY-MM-DD"),ee(R,"class","input svelte-6isfqn"),ee(g,"class","settingsContainer svelte-6isfqn"),ee(_e,"class","calendarList svelte-6isfqn"),ee(Ee,"class","eventList svelte-6isfqn"),ee(Ve,"class","svelte-6isfqn"),ee(t,"class","optionContainer svelte-6isfqn")},m(B,L){xe(B,t,L),re(t,r),re(r,n),re(n,i),Qe&&Qe.m(n,null),Zi(n,e[1]),re(r,a),re(r,s),re(r,l),re(r,c),re(t,f),re(t,d),re(t,h),re(t,g),re(g,y),re(y,m),re(y,_),re(y,w),re(w,E),re(w,S),Zi(w,e[2]),re(g,N),re(g,R),re(R,D),re(R,O),re(R,te),re(t,M),re(t,le),re(t,se),re(t,_e),tt.m(_e,null),re(t,Oe),re(t,Ne),re(t,Se),re(t,Ee),Ce.m(Ee,null),re(t,ve),A&&A.m(t,null),re(t,ze),re(t,Ve),vt||(pt=[Xe(n,"change",e[15]),Xe(n,"change",e[12]),Xe(c,"click",e[11]),Xe(w,"change",e[16]),Xe(te,"change",e[10]),Xe(Ve,"click",e[6])],vt=!0)},p(B,L){B[0].settings.insertTemplates.length?Qe?Qe.p(B,L):(Qe=W2(B),Qe.c(),Qe.m(n,null)):Qe&&(Qe.d(1),Qe=null),L[0]&3&&Zi(n,B[1]),L[0]&4&&Zi(w,B[2]),gt===(gt=fe(B,L))&&tt?tt.p(B,L):(tt.d(1),tt=gt(B),tt&&(tt.c(),tt.m(_e,null))),Ze===(Ze=_t(B,L))&&Ce?Ce.p(B,L):(Ce.d(1),Ce=Ze(B),Ce&&(Ce.c(),Ce.m(Ee,null))),B[2]=="table"?A?A.p(B,L):(A=J2(B),A.c(),A.m(t,ze)):A&&(A.d(1),A=null)},i:St,o:St,d(B){B&&be(t),Qe&&Qe.d(),tt.d(),Ce.d(),A&&A.d(),vt=!1,Qr(pt)}}}function R9(e,t,r){let{onSubmit:n}=t,{insertEventsModal:i}=t,a=xt.getInstance(),s,l,c,f,d=[".summary",".description"];ro(()=>Er(void 0,void 0,void 0,function*(){let V=yield pn();r(4,f=V.map(le=>[le,!0]));let M=yield lr();r(3,c=M.map(le=>[le,!0]))}));let h=()=>{let V=c.filter(M=>M[1]).map(M=>M[0]);n(l,V,d,i)},g=V=>{c.forEach(M=>{M[0].parent.id==V.target.id&&(M[1]=V.target.checked)}),r(3,c)},y=V=>{let M=V.target.value;M=="on"&&(M=V.target.id),d.contains(M)?d.remove(M):d.push(M),r(5,d)},m=V=>{d.contains(V)&&d.remove(V),r(5,d)},_=V=>Er(void 0,void 0,void 0,function*(){let M=yield pn();r(4,f=M.map(se=>[se,!0]));let le=yield lr({startDate:window.moment(V.target.value).local()});r(3,c=le.map(se=>[se,!0])),r(3,c)}),w=()=>f.filter(V=>V[1]).map(V=>V[0].id),E=()=>{new dy(app,V=>{let M={name:V,insertType:l,tableOptions:d,calendarList:w()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,M],a),a.saveSettings(),dr("Added template")}).open()},S=V=>{let M=V.target.value;if(M=="None")return;let se=a.settings.insertTemplates.find(_e=>_e.name==M);!se||(r(2,l=se.insertType),r(5,d=se.tableOptions),f.forEach(_e=>_e[1]=se.calendarList.contains(_e[0].id)),c.forEach(_e=>_e[1]=se.calendarList.contains(_e[0].parent.id)),r(4,f),r(3,c))};function N(){s=xl(this),r(1,s),r(0,a)}function R(){l=xl(this),r(2,l)}function D(V,M){V[M][1]=this.checked,r(4,f)}function O(V,M){V[M][1]=this.checked,r(3,c)}let te=V=>m(V);return e.$$set=V=>{"onSubmit"in V&&r(13,n=V.onSubmit),"insertEventsModal"in V&&r(14,i=V.insertEventsModal)},[a,s,l,c,f,d,h,g,y,m,_,E,S,n,i,N,R,D,O,te]}var eI=class extends yn{constructor(t){super();Nn(this,t,R9,N9,In,{onSubmit:13,insertEventsModal:14},S9,[-1,-1])}},tI=eI;var nI=ut(to()),hy=class extends rI.Modal{constructor(t){super(xt.getInstance().app);this.editor=t}onOpen(){return U(this,null,function*(){let{contentEl:t}=this;new tI({target:t,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:t}=this;t.empty()}onSubmit(t,r,n,i){let a="",s="",l="";t=="bullet"?(r.forEach(c=>{l+=`
- ${`[${c.summary}](${c.htmlLink}&cal=${c.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):t=="table"&&(n.forEach(c=>{c=c.split(".").join(" ").toLocaleUpperCase(),a+=`| ${c} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(c=>{n.forEach(f=>{let d=nI.default.get(c,f.substring(1),"");f==".summary"&&(d=`[${d}](${c.htmlLink}&cal=${c.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(c.start.date?window.moment(c.start.date):window.moment(c.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(c.start.date?window.moment(c.end.date):window.moment(c.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var py=class{constructor(){}make(){return{getCalendars:()=>pn(),getEvent:(t,r)=>Vh(t,r),getEvents:t=>lr(t)}}};var B9={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:Sh(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8"},xt=class extends Fl.Plugin{constructor(){super(...arguments);this.events=[];this.initView=t=>U(this,null,function*(){this.app.workspace.getLeavesOfType(t).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:t})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(t).first())});this.onLayoutReady=()=>{var n;dc(this);let t=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;t&&t.enabled&&(this.coreTemplatePlugin=t);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),Fm(this)}}static getInstance(){return xt.instance}onload(){return U(this,null,function*(){xt.instance=this,this.api=new py().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>dc(this))),this.events.push(this.app.vault.on("delete",()=>dc(this))),this.events.push(this.app.vault.on("rename",()=>dc(this))),this.events.forEach(t=>{this.registerEvent(t)}),this.registerMarkdownCodeBlockProcessor("gEvent",(t,r,n)=>R2(t,r,n)),this.registerEditorSuggest(new fy(this.app)),this.registerView(vc,t=>new sy(t)),this.registerView(_c,t=>new oy(t)),this.registerView(wc,t=>new ly(t)),this.registerView(Ec,t=>new uy(t)),this.registerEvent(this.app.workspace.on("editor-change",t=>{M2(t),q2(t)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(vc)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(_c)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(wc)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(Ec)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:t=>{let r=Yt();if(t)return r;!r||pn().then(n=>{new bh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:t=>{let r=Yt();if(t)return r;!r||new hi({start:{},end:{}},()=>{ki()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:t=>{let r=Yt();if(t)return r;!r||pn().then(n=>{new bh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:t=>{let r=Yt();if(t)return r;!r||lr().then(n=>{new Bi(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:t=>{let r=Yt();if(t)return r;!r||Fm(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:t=>{let r=Yt();if(t)return r;!r||lr().then(n=>{new Bi(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:t=>{let r=Yt();if(t)return r;!r||lr().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),c=window.moment();return!(c.isBefore(s)||c.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),c=window.moment();return!(c.isBefore(s)||c.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?oo(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new ho(i[0],()=>{}).open():new Bi(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:t=>{t.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",t.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:t=>{t.replaceRange("{{gEvent.}}",t.getCursor());let r=t.getCursor();r.ch+="{{gEvent.".length,t.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(t,r)=>{let n=Yt();if(t)return n;!n||new hy(r).open()}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let t=ha();if(t==null||t==""){new Fl.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(t),new Fl.Notice("Token copied")}}),this.settingsTab=new Bm(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",t=>U(this,null,function*(){this.settings.useCustomClient||(mf(t.uid),Ka(t.at),ja(+new Date+36e5),new Fl.Notice("Login successfull!"),this.settingsTab.display())}))})}onunload(){this.app.workspace.detachLeavesOfType(vc),this.app.workspace.detachLeavesOfType(_c),this.app.workspace.detachLeavesOfType(wc),this.app.workspace.detachLeavesOfType(Ec);for(let t in this.events)this.app.vault.offref(t);this.events=[]}loadSettings(){return U(this,null,function*(){this.settings=Object.assign({},B9,yield this.loadData())})}saveSettings(){return U(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
